
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Ulp</title>
<meta name="description" content="Documentation of Coq module Ulp" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Ulp</h1>
<div class="coq">
<br/>
<h1> Unit in the Last Place: our definition using fexp and its properties, successor and predecessor </h1>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Reals.html">Reals</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Raux.html">Raux</a></span> <span class="id"><a href="compcert.flocq.Core.Defs.html">Defs</a></span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html">Round_pred</a></span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html">Generic_fmt</a></span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html">Float_prop</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcore_ulp">Fcore_ulp</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_ulp.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_ulp.fexp">fexp</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<div class="doc">Definition and basic properties about the minimal exponent, when it exists </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Z_le_dec_aux">Z_le_dec_aux</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">Z</span> \/ ~ (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5928')">Proof.</div>
<div class="proofscript" id="proof5928">
<span class="tactic">intros</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_dec">Z_le_dec</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">negligible_exp</span></span> is either none (as in FLX) or Some n such that n &lt;= fexp n. </div>
<span class="kwd">Definition</span> <span class="id"><a name="negligible_exp">negligible_exp</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#LPO_Z">LPO_Z</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#Z_le_dec_aux">Z_le_dec_aux</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#z">z</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#z">z</a></span>))) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#inleft">inleft</a></span> <span class="id">N</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">N</span>)<br/>
&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#inright">inright</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="negligible_exp_prop">negligible_exp_prop</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="negligible_None">negligible_None</a></span>: (<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span>)%<span class="id">Z</span>) -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_prop">negligible_exp_prop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="negligible_Some">negligible_Some</a></span>: <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_prop">negligible_exp_prop</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="negligible_exp_spec">negligible_exp_spec</a></span>: <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_prop">negligible_exp_prop</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5929')">Proof.</div>
<div class="proofscript" id="proof5929">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#LPO_Z">LPO_Z</a></span> <span class="kwd">as</span> [(<span class="id">n</span>,<span class="id">Hn</span>)|<span class="id">Hn</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_Some">negligible_Some</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_None">negligible_None</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Hn</span> <span class="id">n</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligible_exp_spec</span>': (<span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> /\ <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> /\ (<span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span>)%<span class="id">Z</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5930')">Proof.</div>
<div class="proofscript" id="proof5930">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#LPO_Z">LPO_Z</a></span> <span class="kwd">as</span> [(<span class="id">n</span>,<span class="id">Hn</span>)|<span class="id">Hn</span>].<br/>
<span class="id">right</span>; <span class="tactic">simpl</span>; <span class="id">exists</span> <span class="id">n</span>; <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="id">left</span>; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Hn</span> <span class="id">n</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Context</span> { <span class="id">valid_exp</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#m">m</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#m">m</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#n">n</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5931')">Proof.</div>
<div class="proofscript" id="proof5931">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">m</span> <span class="id">Hn</span> <span class="id">Hm</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">n</span> <span class="id">m</span>); <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<br/>
<div class="doc">Definition and basic properties about the ulp </div>
<div class="doc">Now includes a nice ulp(0): ulp(0) is now 0 when there is no minimal
   exponent, such as in FLX, and beta^(fexp n) when there is a n such
   that n &lt;= fexp n. For instance, the value of ulp(O) is then
   beta^emin in FIX and FLT. The main lemma to use is ulp_neq_0 that
   is equivalent to the previous "unfold ulp" provided the value is
   not zero. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ulp">ulp</a></span> <span class="id">x</span> := <span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool">Req_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> 0 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>   =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>  =&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)<br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_neq_0">ulp_neq_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5932')">Proof.</div>
<div class="proofscript" id="proof5932">
<span class="tactic">intros</span>  <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span> <span class="id">x</span>); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>; <span class="id">now</span> <span class="id">contradict</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="F">F</a></span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_opp">ulp_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5933')">Proof.</div>
<div class="proofscript" id="proof5933">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>), <span class="id">H1</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H2</span>; <span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_abs">ulp_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5934')">Proof.</div>
<div class="proofscript" id="proof5934">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_abs">cexp_abs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_no_R0">Rabs_no_R0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_ge_0">ulp_ge_0</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5935')">Proof.</div>
<div class="proofscript" id="proof5935">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span>; <span class="tactic">intros</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le_id">ulp_le_id</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5936')">Proof.</div>
<div class="proofscript" id="proof5936">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le_abs">ulp_le_abs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5937')">Proof.</div>
<div class="proofscript" id="proof5937">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_abs">ulp_abs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_le_id">ulp_le_id</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_abs">generic_format_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_DN_ulp">round_UP_DN_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5938')">Proof.</div>
<div class="proofscript" id="proof5938">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">apply</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">V</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_bpow">ulp_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> + 1)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5939')">Proof.</div>
<div class="proofscript" id="proof5939">
<span class="tactic">intros</span> <span class="id">e</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_fexp">cexp_fexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">e</span> + 1 - 1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ">Zlt_succ</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_ulp_0">generic_format_ulp_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5940')">Proof.</div>
<div class="proofscript" id="proof5940">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_bpow_ge_ulp_0">generic_format_bpow_ge_ulp_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5941')">Proof.</div>
<div class="proofscript" id="proof5941">
<span class="tactic">intros</span> <span class="id">e</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">H1</span> (<span class="id">e</span>+1)%<span class="id">Z</span>); <span class="tactic">omega</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">e</span>+1) (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>+1))); <span class="tactic">intros</span> <span class="id">H4</span>.<br/>
<span class="id">absurd</span> (<span class="id">e</span>+1 &lt;= <span class="id">e</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H4</span>).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>+1)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#le_bpow">le_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The three following properties are equivalent:
      <span class="bracket"><span class="id">Exp_not_FTZ</span></span> ;  forall x, F (ulp x) ; forall x, ulp 0 &lt;= ulp x </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_ulp">generic_format_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5942')">Proof.</div>
<div class="proofscript" id="proof5942">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_ulp_0">generic_format_ulp_0</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="not_FTZ_generic_format_ulp">not_FTZ_generic_format_ulp</a></span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>,  <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5943')">Proof.</div>
<div class="proofscript" id="proof5943">
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">e</span>.<br/>
<span class="id">specialize</span> (<span class="id">H</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span>-1))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow_inv</span>' <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">replace</span> (<span class="id">e</span>-1+1)%<span class="id">Z</span> <span class="kwd">with</span> <span class="id">e</span> <span class="kwd">in</span> <span class="id">H</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_ge_ulp_0">ulp_ge_ulp_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5944')">Proof.</div>
<div class="proofscript" id="proof5944">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">H1</span>,<span class="id">H2</span>); <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">H2</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">l</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">l</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">l</span>)); <span class="tactic">intros</span> <span class="id">Hl</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span> <span class="id">n</span> <span class="id">l</span>); <span class="tactic">trivial</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>) (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">l</span>)); <span class="tactic">trivial</span>; <span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">absurd</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">l</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (2:= <span class="id">H</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zeq_le">Zeq_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="not_FTZ_ulp_ge_ulp_0">not_FTZ_ulp_ge_ulp_0</a></span>:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5945')">Proof.</div>
<div class="proofscript" id="proof5945">
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">e</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow_inv</span>' <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_bpow_ge_ulp_0">generic_format_bpow_ge_ulp_0</a></span>.<br/>
<span class="tactic">replace</span> <span class="id">e</span> <span class="kwd">with</span> ((<span class="id">e</span>-1)+1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_bpow">ulp_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_le_pos">ulp_le_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> },<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5946')">Proof with</div>
<div class="proofscript" id="proof5946">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Hx</span> <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hm</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_le">mag_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_ulp_0">ulp_ge_ulp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#monotone_exp_not_FTZ">monotone_exp_not_FTZ</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le">ulp_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> },<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5947')">Proof.</div>
<div class="proofscript" id="proof5947">
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_abs">ulp_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_abs">ulp_abs</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_le_pos">ulp_le_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties when there is no minimal exponent </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eq_0_round_0_negligible_exp">eq_0_round_0_negligible_exp</a></span> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="kwd">forall</span> <span class="id">rnd</span> {<span class="id">Vr</span>: <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span>} <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = 0%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = 0%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5948')">Proof.</div>
<div class="proofscript" id="proof5948">
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">rnd</span> <span class="id">Vr</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">try</span> <span class="id">easy</span>; <span class="tactic">intros</span> <span class="id">Hx2</span>.<br/>
<span class="id">absurd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>) = 0%<span class="id">R</span>).<br/>
2: <span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> - 1)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#abs_round_ge_generic">abs_round_ge_generic</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'; [<span class="tactic">intros</span> (<span class="id">K1</span>,<span class="id">K2</span>)|<span class="id">idtac</span>].<br/>
<span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>-1+1)%<span class="id">Z</span>.<br/>
<span class="id">specialize</span> (<span class="id">K2</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>)); <span class="id">now</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">zarith</span>.<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">Hn1</span>,<span class="id">Hn2</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">Hn1</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">discriminate</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_mag_le">bpow_mag_le</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<div class="doc">Definition and properties of pred and succ </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pred_pos">pred_pos</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool">Req_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - 1)) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - 1)))%<span class="id">R</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="succ">succ</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool">Rle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(- <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pred">pred</a></span> <span class="id">x</span> := (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_eq_pos">pred_eq_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5949')">Proof.</div>
<div class="proofscript" id="proof5949">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">K</span>:(<span class="id">x</span> = 0)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_cancel">Ropp_le_cancel</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">K</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_eq_pos">succ_eq_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5950')">Proof.</div>
<div class="proofscript" id="proof5950">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_opp">succ_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5951')">Proof.</div>
<div class="proofscript" id="proof5951">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_opp">pred_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5952')">Proof.</div>
<div class="proofscript" id="proof5952">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">pred and succ are in the format </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="id_m_ulp_ge_bpow">id_m_ulp_ge_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,  <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5953')">Proof.</div>
<div class="proofscript" id="proof5953">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Fx</span> <span class="id">Hx</span>' <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (1 &lt;= <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>.<br/>
<span class="tactic">assert</span> (0 &lt;  <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">intros</span> <span class="id">Hm</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#bpow_le_F2R_m1">bpow_le_F2R_m1</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>), <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">contradict</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span>  &lt;- <span class="id">Hm</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>), <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5954')">Proof.</div>
<div class="proofscript" id="proof5954">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_p1_le_bpow">F2R_p1_le_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_pred_aux1">generic_format_pred_aux1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5955')">Proof.</div>
<div class="proofscript" id="proof5955">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Ex</span>).<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Zx</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Ex</span>' : (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1) &lt; <span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id">ex</span>)%<span class="id">R</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Ex</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Ex</span> <span class="kwd">as</span> (<span class="id">H</span>,<span class="id">H</span>'); <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">contradict</span> <span class="id">Hx</span>; <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span> <span class="id">ex</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_fexp">cexp_fexp</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 0) <span class="kwd">with</span> 1%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#id_m_ulp_ge_bpow">id_m_ulp_ge_bpow</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">intro</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">ex</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>  &lt; <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">split</span> ; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>) ; <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> ; <span class="id">easy</span>.<br/>
<span class="tactic">clear</span> -<span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Ex</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>').<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 3 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="tactic">assert</span> (0 &lt;  <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Ex</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_pred_aux2">generic_format_pred_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_val">mag_val</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> - 1))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5956')">Proof.</div>
<div class="proofscript" id="proof5956">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">e</span> <span class="id">Hx</span>.<br/>
<span class="id">pose</span> (<span class="id">f</span>:=(<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1)))%<span class="id">R</span>).<br/>
<span class="id">fold</span> <span class="id">f</span>.<br/>
<span class="tactic">assert</span> (<span class="id">He</span>:(<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1) &lt;= <span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>); <span class="tactic">clear</span> <span class="id">He</span>; <span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">f</span> = <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id">e</span>-1-(<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))) -1) (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))))%<span class="id">R</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">replace</span> (<span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1) + <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span>-1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zeq_le">Zeq_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_fexp">cexp_fexp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))).<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2) + <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat">Rplus_le_compat</a></span> ; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2*<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>;[<span class="id">right</span>; <span class="tactic">ring</span>|<span class="id">idtac</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 1*<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="tactic">apply</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_is_le_bool">Zle_is_le_bool</a></span>.<br/>
<span class="id">now</span> <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Zpower_pos</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> (1+(<span class="id">e</span>-2))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span>-1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">replace</span> <span class="id">f</span> <span class="kwd">with</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id">He</span>.<br/>
<span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_succ_aux1">generic_format_succ_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5957')">Proof.</div>
<div class="proofscript" id="proof5957">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Ex</span>).<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Zx</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Ex</span>' := <span class="id">Ex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Ex</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span> <span class="id">x</span> <span class="id">ex</span>) ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span> <span class="id">ex</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_fexp">cexp_fexp</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 0) <span class="kwd">with</span> 1%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Ex</span>').<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_le_0_compat">Rplus_le_le_0_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span>)) ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Zx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_fexp">cexp_fexp</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span> <span class="id">ex</span>) ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H2</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_pred_pos">generic_format_pred_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5958')">Proof.</div>
<div class="proofscript" id="proof5958">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Zx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred_aux2">generic_format_pred_aux2</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred_aux1">generic_format_pred_aux1</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_succ">generic_format_succ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5959')">Proof.</div>
<div class="proofscript" id="proof5959">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zx</span> <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ_aux1">generic_format_succ_aux1</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_ulp_0">generic_format_ulp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred_pos">generic_format_pred_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_pred">generic_format_pred</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5960')">Proof.</div>
<div class="proofscript" id="proof5960">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_lt_id">pred_pos_lt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5961')">Proof.</div>
<div class="proofscript" id="proof5961">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_gt_id">succ_gt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5962')">Proof.</div>
<div class="proofscript" id="proof5962">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_lt_id">pred_pos_lt_id</a></span>.<br/>
<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_lt_id">pred_lt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5963')">Proof.</div>
<div class="proofscript" id="proof5963">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_ge_id">succ_ge_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5964')">Proof.</div>
<div class="proofscript" id="proof5964">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0).<br/>
<span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">rewrite</span> <span class="id">V</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">intros</span>; <span class="id">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_le_id">pred_le_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5965')">Proof.</div>
<div class="proofscript" id="proof5965">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_ge_0">pred_pos_ge_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5966')">Proof.</div>
<div class="proofscript" id="proof5966">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">ex</span> - 1 + 1 - 1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_le_id">ulp_le_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_ge_0">pred_ge_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5967')">Proof.</div>
<div class="proofscript" id="proof5967">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp_aux1">pred_pos_plus_ulp_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>-<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5968')">Proof.</div>
<div class="proofscript" id="proof5968">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : <span class="id">x</span> &lt;&gt; 0%<span class="id">R</span>) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span>' : <span class="id">x</span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> ; <span class="tactic">intros</span> <span class="id">M</span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">Hex</span> <span class="id">T</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Lex</span>:(<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_val">mag_val</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) = <span class="id">ex</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">T</span>; <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Lex</span> <span class="kwd">in</span> *.<br/>
<span class="tactic">clear</span> <span class="id">T</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Hex</span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">ex</span> - 1 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span> &lt; <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span> ; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>) ; <span class="tactic">rewrite</span> &lt;- <span class="id">M</span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
&nbsp;&nbsp;<span class="id">lra</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="tactic">by</span> <span class="id">lra</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> ; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">Hex</span> <span class="id">T</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Lex</span>:(<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_val">mag_val</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) = <span class="id">ex</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">T</span>; <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Lex</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">T</span>.<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="kwd">in</span> <span class="id">Hex</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>; <span class="id">easy</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Hex</span> <span class="kwd">as</span> ([<span class="id">H1</span>|<span class="id">H1</span>],<span class="id">H2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id">x</span>-<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#id_m_ulp_ge_bpow">id_m_ulp_ge_bpow</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">right</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Lex</span>.<br/>
<span class="id">lra</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Lex</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp_aux2">pred_pos_plus_ulp_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_val">mag_val</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> =  <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>-1)) &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>-1))) + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>-1))) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5969')">Proof.</div>
<div class="proofscript" id="proof5969">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">e</span> <span class="id">Hxe</span> <span class="id">Zp</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1)))) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1))).<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">He</span>:(<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1) &lt;= <span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hxe</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>); <span class="tactic">clear</span> <span class="id">He</span>; <span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> ; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))).<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2) + <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat">Rplus_le_compat</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2*<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>;[<span class="id">right</span>; <span class="tactic">ring</span>|<span class="id">idtac</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 1*<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="tactic">apply</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_is_le_bool">Zle_is_le_bool</a></span>.<br/>
<span class="id">now</span> <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Zpower_pos</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> (1+(<span class="id">e</span>-2))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span>-1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id">Hxe</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxe</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">contradict</span> <span class="id">Zp</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxe</span>, <span class="id">He</span>; <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp_aux3">pred_pos_plus_ulp_aux3</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_val">mag_val</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> =  <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#e">e</a></span>-1)) = 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0 = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5970')">Proof.</div>
<div class="proofscript" id="proof5970">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span> <span class="id">e</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H3</span>:(<span class="id">x</span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1)))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_uniq">Rminus_diag_uniq</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">H4</span>: (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1) = <span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_inj">bpow_inj</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">specialize</span> (<span class="id">K</span> (<span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="id">contradict</span> <span class="id">K</span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H3</span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">n</span> (<span class="id">e</span>-1)); <span class="tactic">intros</span> <span class="id">H6</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The following one is false for x = 0 in FTZ </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5971')">Proof.</div>
<div class="proofscript" id="proof5971">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_EM_T">Req_EM_T</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_val">mag_val</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) -1))) 0); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp_aux3">pred_pos_plus_ulp_aux3</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp_aux2">pred_pos_plus_ulp_aux2</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp_aux1">pred_pos_plus_ulp_aux1</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_plus_ulp">pred_plus_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5972')">Proof.</div>
<div class="proofscript" id="proof5972">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Rounding x + small epsilon </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="mag_plus_eps">mag_plus_eps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5973')">Proof.</div>
<div class="proofscript" id="proof5973">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Zx</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">He</span>).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_p1_le_bpow">F2R_p1_le_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_le_0_compat">Rplus_le_le_0_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5974')">Proof.</div>
<div class="proofscript" id="proof5974">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zx</span> <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="tactic">at</span> 1 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#mag_plus_eps">mag_plus_eps</a></span> ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#m">m</a></span> <span class="id">_</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span> <span class="id">_</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> ((<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>) * <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat">Rplus_le_compat</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;x=0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Zx</span> <span class="kwd">in</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Heps</span>); <span class="tactic">intros</span> <span class="id">P</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">revert</span> <span class="id">Heps</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="id">exfalso</span> ; <span class="id">lra</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">assert</span>(<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">H</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id">eps</span> * <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>)))) <span class="kwd">with</span> 0%<span class="id">Z</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="id">ring_simplify</span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">P</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_plus_eps_pos">round_UP_plus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5975')">Proof with</div>
<div class="proofscript" id="proof5975">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span>.<br/>
<span class="tactic">case</span> <span class="id">Zx</span>; <span class="tactic">intros</span> <span class="id">Zx1</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">intros</span> (<span class="id">Heps1</span>,[<span class="id">Heps2</span>|<span class="id">Heps2</span>]).<br/>
<span class="tactic">assert</span> (<span class="id">Heps</span>: (0 &lt;= <span class="id">eps</span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Heps2</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span> := <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hd</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#mag_plus_eps">mag_plus_eps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Fs</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span> <span class="kwd">in</span> <span class="id">Hd</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="kwd">with</span> (2 := <span class="id">Hd</span>).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Heps2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ_aux1">generic_format_succ_aux1</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;x=0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Zx1</span>, 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Heps</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="id">lra</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">assert</span>(<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id">eps</span> * <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>)))) <span class="kwd">with</span> 1%<span class="id">Z</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil_imp">Zceil_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="id">ring_simplify</span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">intros</span> <span class="id">P</span>; <span class="tactic">rewrite</span> <span class="id">P</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_ulp_0">generic_format_ulp_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_pred_plus_eps_pos">round_UP_pred_plus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) )%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5976')">Proof.</div>
<div class="proofscript" id="proof5976">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_plus_eps_pos">round_UP_plus_eps_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred">generic_format_pred</a></span>; <span class="tactic">trivial</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_minus_eps_pos">round_DN_minus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5977')">Proof.</div>
<div class="proofscript" id="proof5977">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hpx</span> <span class="id">Fx</span> <span class="id">eps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="tactic">intros</span> <span class="id">Heps</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">replace</span> (<span class="id">x</span>-<span class="id">eps</span>)%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id">x</span> + (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id">x</span>)-<span class="id">eps</span>))%<span class="id">R</span>.<br/>
2: <span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 3; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> <span class="id">x</span>); <span class="tactic">trivial</span>.<br/>
2: <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred_pos">generic_format_pred_pos</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_plus_eps">round_DN_plus_eps</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt; <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool">Rle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5978')">Proof.</div>
<div class="proofscript" id="proof5978">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id">x</span>+<span class="id">eps</span>)).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">replace</span> (-(<span class="id">x</span>+<span class="id">eps</span>))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (-<span class="id">x</span>) + (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (-<span class="id">x</span>)) - <span class="id">eps</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_pred_plus_eps_pos">round_UP_pred_plus_eps_pos</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> <span class="id">eps</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (<span class="id">eps</span>-<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (- <span class="id">x</span>)))%<span class="id">R</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_plus_eps">round_UP_plus_eps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt;= <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool">Rle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5979')">Proof with</div>
<div class="proofscript" id="proof5979">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_plus_eps_pos">round_UP_plus_eps_pos</a></span>; <span class="tactic">assumption</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id">x</span>+<span class="id">eps</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_opp">round_UP_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">replace</span> (-(<span class="id">x</span>+<span class="id">eps</span>))%<span class="id">R</span> <span class="kwd">with</span> (-<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">x</span> + (-<span class="id">eps</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (-<span class="id">x</span>))))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_opp">pred_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> <span class="id">eps</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id">eps</span>-<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">x</span>))%<span class="id">R</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#trans_eq">trans_eq</a></span> <span class="kwd">with</span> (-<span class="id">x</span> +-<span class="id">eps</span>)%<span class="id">R</span>;[<span class="id">idtac</span>|<span class="tactic">ring</span>].<br/>
<span class="tactic">pattern</span> (-<span class="id">x</span>)%<span class="id">R</span> <span class="tactic">at</span> 3; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> (-<span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="id">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="le_pred_pos_lt">le_pred_pos_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5980')">Proof with</div>
<div class="proofscript" id="proof5980">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">H</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>); <span class="tactic">intros</span> <span class="id">V</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Zy</span>:(0 &lt; <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Zp</span>: (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Zp</span>:(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_0">pred_ge_0</a></span> ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zp</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">generalize</span> <span class="id">H0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> (<span class="id">ey</span>,<span class="id">Hey</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hy2</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">Hy3</span>.<br/>
<span class="tactic">assert</span> (<span class="id">ey</span>-1 = <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">ey</span> -1))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_inj">bpow_inj</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hy2</span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id">Hy3</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Zx</span>: (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Hex</span>).<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">Zx</span>).<br/>
<span class="tactic">assert</span> (<span class="id">ex</span> &lt;= <span class="id">ey</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_lt_bpow">bpow_lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">y</span>).<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>); <span class="tactic">intros</span> <span class="id">Hexy</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">ey</span>-1))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">absurd</span> (0 &lt; <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) &lt; 1)%<span class="id">Z</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#lt_IZR">lt_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) *<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> <span class="id">ex</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H3</span>,&lt;-<span class="id">H1</span>, &lt;- <span class="id">Hy2</span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hex</span>.<br/>
<span class="id">absurd</span> (<span class="id">y</span> &lt;= <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="kwd">in</span> <span class="id">Hex</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hexy</span>, <span class="id">Hy2</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">Hy3</span>.<br/>
<span class="tactic">assert</span> (<span class="id">y</span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ey</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_uniq">Rminus_diag_uniq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hy3</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">y</span> <span class="id">ey</span>); <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Hy2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_reg_l">Zplus_reg_l</a></span> <span class="kwd">with</span> 1%<span class="id">Z</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#trans_eq">trans_eq</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id">y</span>)) (<span class="id">y</span>-<span class="id">x</span>)); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (-<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id">y</span>))%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">x</span>+(-<span class="id">x</span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> <span class="id">y</span>)))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H1</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> <span class="id">y</span>) <span class="tactic">at</span> 1; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>; <span class="tactic">ring</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> (<span class="id">y</span>-(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_minus_eps_pos">round_DN_minus_eps_pos</a></span> <span class="kwd">with</span> (<span class="id">eps</span>:=(<span class="id">y</span>-<span class="id">x</span>)%<span class="id">R</span>); <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">y</span>-(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">V</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>); <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="succ_le_lt_aux">succ_le_lt_aux</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5981')">Proof with</div>
<div class="proofscript" id="proof5981">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span> <span class="id">Zx</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>) (<span class="id">y</span>-<span class="id">x</span>)); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (-<span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span> (<span class="id">x</span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span> + -<span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> <span class="id">y</span> <span class="kwd">with</span> (<span class="id">x</span>+(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="id">absurd</span> (<span class="id">x</span> &lt; <span class="id">y</span>)%<span class="id">R</span>.<br/>
2: <span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span> <span class="kwd">with</span> (<span class="id">eps</span>:=(<span class="id">y</span>-<span class="id">x</span>)%<span class="id">R</span>); <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">x</span>+(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le_lt">succ_le_lt</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5982')">Proof with</div>
<div class="proofscript" id="proof5982">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">H</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_lt_aux">succ_le_lt_aux</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">y</span> 0); <span class="tactic">intros</span> <span class="id">Hy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#le_pred_pos_lt">le_pred_pos_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (-0)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="id">now</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_ge_gt">pred_ge_gt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5983')">Proof.</div>
<div class="proofscript" id="proof5983">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_lt">succ_le_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_gt_ge">succ_gt_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5984')">Proof.</div>
<div class="proofscript" id="proof5984">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_lt_le">pred_lt_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5985')">Proof.</div>
<div class="proofscript" id="proof5985">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="succ_pred_pos">succ_pred_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5986')">Proof.</div>
<div class="proofscript" id="proof5986">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_ulp_0">pred_ulp_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0) = 0%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5987')">Proof.</div>
<div class="proofscript" id="proof5987">
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> [<span class="id">H1</span> <span class="id">_</span>]; <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">ring</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">H2</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> + 1 - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_eq">Rminus_diag_eq</a></span>, <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_0">succ_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> 0 = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5988')">Proof.</div>
<div class="proofscript" id="proof5988">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_0">pred_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Ropp">Ropp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5989')">Proof.</div>
<div class="proofscript" id="proof5989">
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_0">succ_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_opp">pred_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_succ_pos">pred_succ_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5990')">Proof.</div>
<div class="proofscript" id="proof5990">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_lt_le">Rnot_lt_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_lt">succ_le_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">Fx</span>) <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred">generic_format_pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_gt">pred_ge_gt</a></span> <span class="kwd">with</span> (1 := <span class="id">Fx</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_pred">succ_pred</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5991')">Proof.</div>
<div class="proofscript" id="proof5991">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [[<span class="id">Hx</span>|<span class="id">Hx</span>]|<span class="id">Hx</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_pred_pos">succ_pred_pos</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_0">pred_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ulp_0">pred_ulp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ_pos">pred_succ_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_succ">pred_succ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5992')">Proof.</div>
<div class="proofscript" id="proof5992">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_opp">pred_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_pred">succ_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_pred_plus_eps">round_UP_pred_plus_eps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt;= <span class="kwd">if</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool">Rle_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> 0 <span class="kwd">then</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5993')">Proof.</div>
<div class="proofscript" id="proof5993">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_plus_eps">round_UP_plus_eps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_pred">succ_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred">generic_format_pred</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="tactic">at</span> 4.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ">pred_succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">generalize</span> <span class="id">Heps</span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">H1</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>'; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">H2</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id">H1</span>'.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_minus_eps">round_DN_minus_eps</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span> &lt;= <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool">Rle_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> 0) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5994')">Proof.</div>
<div class="proofscript" id="proof5994">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span>-<span class="id">eps</span>)%<span class="id">R</span> <span class="kwd">with</span> (-(-<span class="id">x</span>+<span class="id">eps</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">pattern</span> (-<span class="id">x</span>)%<span class="id">R</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ">pred_succ</a></span> (-<span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_pred_plus_eps">round_UP_pred_plus_eps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ">pred_succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">generalize</span> <span class="id">Heps</span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">H1</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (-<span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H2</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>' <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">apply</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Error of a rounding, expressed in number of ulps </div>
<div class="doc">false for x=0 in the FLX format </div>
<span class="kwd">Theorem</span> <span class="id"><a name="error_lt_ulp">error_lt_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5995')">Proof with</div>
<div class="proofscript" id="proof5995">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>] ; <span class="tactic">rewrite</span> <span class="id">H</span> ; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hu</span>: (<span class="id">x</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">destruct</span> <span class="id">Hu</span> <span class="kwd">as</span> [<span class="id">Hu</span>|<span class="id">Hu</span>].<br/>
<span class="tactic">exact</span> <span class="id">Hu</span>.<br/>
<span class="tactic">elim</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hu</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span>: (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> &lt;= <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">destruct</span> <span class="id">Hd</span> <span class="kwd">as</span> [<span class="id">Hd</span>|<span class="id">Hd</span>].<br/>
<span class="tactic">exact</span> <span class="id">Hd</span>.<br/>
<span class="tactic">elim</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hd</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="error_le_ulp">error_le_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5996')">Proof with</div>
<div class="proofscript" id="proof5996">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span>  <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0).<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>; <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>; <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp">error_lt_ulp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="error_le_half_ulp">error_le_half_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5997')">Proof with</div>
<div class="proofscript" id="proof5997">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">set</span> (<span class="id">d</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_pt">round_N_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">choice</span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">Hr1</span>, <span class="id">Hr2</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id">x</span> - <span class="id">d</span>) (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span> - <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;rnd(x)&nbsp;=&nbsp;rndd(x)&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">d</span> - <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id">Hr2</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> 2%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id">d</span> - <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="id">right</span>. <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="comment">(*&nbsp;.&nbsp;rnd(x)&nbsp;=&nbsp;rndu(x)&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hu</span>: (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span> = <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="tactic">unfold</span> <span class="id">d</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span> - <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id">Hr2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hu</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> 2%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (- (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span> - <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="id">right</span>. <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hu</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_DN">ulp_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5998')">Proof with</div>
<div class="proofscript" id="proof5998">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="id">x</span>) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hd</span>|<span class="id">Hd</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp_DN">cexp_DN</a></span> <span class="kwd">with</span> (2 := <span class="id">Hd</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">e</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">He</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span> <span class="kwd">in</span> <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#exp_small_round_0">exp_small_round_0</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp_spec">negligible_exp_spec</a></span> <span class="kwd">as</span> [<span class="id">H0</span>|<span class="id">k</span> <span class="id">Hk</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_not_le">Zlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">H0</span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="tactic">f_equal</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span>.<br/>
- <span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_neq_0_negligible_exp">round_neq_0_negligible_exp</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#negligible_exp">negligible_exp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5999')">Proof with</div>
<div class="proofscript" id="proof5999">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">rndn</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">K</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">_</span>,<span class="id">Hn</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="id">absurd</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> &lt; <span class="id">e</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_not_lt">Zle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#exp_small_round_0">exp_small_round_0</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">rndn</span> <span class="id">x</span>...<br/>
<span class="tactic">apply</span> (<span class="id">Hn</span> <span class="id">e</span>).<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">_</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">allows rnd x to be 0 </div>
<span class="kwd">Theorem</span> <span class="id"><a name="error_lt_ulp_round">error_lt_ulp_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> } <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6000')">Proof with</div>
<div class="proofscript" id="proof6000">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hm</span>.<br/>
<span class="comment">(*&nbsp;wlog&nbsp;*)</span><br/>
<span class="tactic">cut</span> (<span class="kwd">forall</span> <span class="id">rnd</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>).<br/>
<span class="tactic">intros</span> <span class="id">M</span> <span class="id">rnd</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">M</span>.<br/>
<span class="id">contradict</span> <span class="id">H</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_not_eq">sym_not_eq</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_opp">round_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">replace</span> (- <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id">rnd</span>) (- <span class="id">x</span>) - - - <span class="id">x</span>)%<span class="id">R</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(-(<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id">rnd</span>) (- <span class="id">x</span>) - (-<span class="id">x</span>)))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">M</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_opp">valid_rnd_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="comment">(*&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp">error_lt_ulp</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_DN">ulp_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_le_pos">ulp_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">rewrite</span> <span class="id">V</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="error_le_ulp_round">error_le_ulp_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> } <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6001')">Proof.</div>
<div class="proofscript" id="proof6001">
<span class="tactic">intros</span> <span class="id">Mexp</span> <span class="id">rnd</span> <span class="id">Vrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
{ <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>; [|<span class="tactic">exact</span> <span class="id">Vrnd</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>. }<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp_round">error_lt_ulp_round</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">allows both x and rnd x to be 0 </div>
<span class="kwd">Theorem</span> <span class="id"><a name="error_le_half_ulp_round">error_le_half_ulp_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> },<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6002')">Proof with</div>
<div class="proofscript" id="proof6002">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice</span>) <span class="id">x</span>) 0); <span class="tactic">intros</span> <span class="id">Hfx</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">right</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">choice</span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hfx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">N</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="id">contradict</span> <span class="id">Hfx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_neq_0_negligible_exp">round_neq_0_negligible_exp</a></span>...<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">Hn</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">N</span>).<br/>
<span class="id">right</span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> -1 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice</span>) <span class="id">x</span> - <span class="id">x</span>)).<br/>
<span class="id">right</span>; <span class="tactic">rewrite</span> <span class="id">Hfx</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hfx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp_round">error_lt_ulp_round</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>, <span class="id">H1</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice</span>) <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_DN">ulp_DN</a></span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_le">ulp_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_le_generic">round_le_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_le_pos">ulp_le_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_DN">ulp_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 2; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_plus_distr">Ropp_plus_distr</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_le">pred_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6003')">Proof.</div>
<div class="proofscript" id="proof6003">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> [<span class="id">Hxy</span>| -&gt;].<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_gt">pred_ge_gt</a></span> <span class="kwd">with</span> (2 := <span class="id">Fy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred">generic_format_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hxy</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_le_id">pred_le_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le">succ_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6004')">Proof.</div>
<div class="proofscript" id="proof6004">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_cancel">Ropp_le_cancel</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_opp">pred_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_le">pred_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_le_inv">pred_le_inv</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6005')">Proof.</div>
<div class="proofscript" id="proof6005">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_pred">succ_pred</a></span> <span class="id">x</span>), &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_pred">succ_pred</a></span> <span class="id">y</span>); <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le">succ_le</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred">generic_format_pred</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le_inv">succ_le_inv</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6006')">Proof.</div>
<div class="proofscript" id="proof6006">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ">pred_succ</a></span> <span class="id">x</span>), &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ">pred_succ</a></span> <span class="id">y</span>); <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_le">pred_le</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_lt">pred_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6007')">Proof.</div>
<div class="proofscript" id="proof6007">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_le">Rgt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_le_inv">pred_le_inv</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_lt">succ_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6008')">Proof.</div>
<div class="proofscript" id="proof6008">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_le">Rgt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_inv">succ_le_inv</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Adding <span class="bracket"><span class="id">ulp</span></span> is a, somewhat reasonable, overapproximation of <span class="bracket"><span class="id">succ</span></span>. </div>
<span class="kwd">Lemma</span> <span class="id"><a name="succ_le_plus_ulp">succ_le_plus_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6009')">Proof.</div>
<div class="proofscript" id="proof6009">
<span class="tactic">intros</span> <span class="id">Mexp</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Px</span>|<span class="id">Nx</span>]; [<span class="id">now</span> <span class="id">right</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span>|].<br/>
<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> (- (-<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_false">Rle_bool_false</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Nx</span>), &lt;-<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (-<span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (-<span class="id">x</span>) - 1))) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
{ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="id">x</span>); <span class="id">ring_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>, <span class="id">Mexp</span>; <span class="id">lia</span>. }<br/>
&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>); <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<div class="doc">And it also lies in the format. </div>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_plus_ulp">generic_format_plus_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6010')">Proof.</div>
<div class="proofscript" id="proof6010">
<span class="tactic">intros</span> <span class="id">Mexp</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Px</span>|<span class="id">Nx</span>].<br/>
{ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span> <span class="id">_</span> <span class="id">Px</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>. }<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> (- (-<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>; <span class="tactic">rewrite</span> &lt;-<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (-<span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> (-<span class="id">x</span>) - 1))) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hfe</span> : (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> &lt; <span class="id">e</span>)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#mag_generic_gt">mag_generic_gt</a></span>; [|<span class="id">lra</span>|]. }<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">e</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">m</span> := <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">_</span> - <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id">m</span> - 1) * <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>))%<span class="id">R</span>; [|<span class="tactic">unfold</span> <span class="id">m</span>; <span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">He</span>; <span class="tactic">unfold</span> <span class="id">m</span>; <span class="tactic">rewrite</span> <span class="id">He</span>; <span class="tactic">simpl</span>; <span class="id">ring_simplify</span> (1 - 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span> <span class="id">p</span> <span class="id">Hp</span>; <span class="tactic">unfold</span> <span class="id">m</span>; <span class="tactic">rewrite</span> <span class="id">Hp</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">f</span> := {| <span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Defs.Fnum</a></span> := (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">p</span> - 1)%<span class="id">Z</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Defs.Fexp</span> := <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> |} : <span class="id"><a href="compcert.flocq.Core.Defs.html#float">Defs.float</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">generic_format_F2R</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>); [|<span class="tactic">intro</span> <span class="id">Hm</span>'; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">simpl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">Defs.F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">p</span>)); [|<span class="id">now</span> <span class="tactic">simpl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">He</span> : (1 &lt;= <span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span>); [<span class="id">lia</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">e</span>' := <span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id">_</span> (<span class="id">_</span> * <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id">e</span>' = <span class="id">e</span> - 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>); [|<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id">Mexp</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">e</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id">_</span>)); [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> 1); <span class="id">ring_simplify</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> 0); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">beta_pos</span> : (0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> 2); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb_le">Z.leb_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_prop">radix_prop</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">replace</span> (<span class="id">e</span> - 1 - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> + -1  + <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">beta_pos</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">lra</span>]; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (2 * <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">change</span> 2%<span class="id">R</span> <span class="kwd">with</span> (1 + 1)%<span class="id">R</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_1">bpow_1</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>; <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb_le">Z.leb_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_prop">radix_prop</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>))); [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;-!<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> + - <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span> <span class="kwd">with</span> 0%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>; <span class="id">lra</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">Hp</span>; <span class="id">exfalso</span>; <span class="id">lia</span>. }<br/>
<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span> (-<span class="id">x</span>)).<br/>
{ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred_pos">generic_format_pred_pos</a></span>; [|<span class="id">lra</span>]. }<br/>
<span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_pos">pred_pos</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_ge_UP_gt">round_DN_ge_UP_gt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6011')">Proof with</div>
<div class="proofscript" id="proof6011">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fy</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_lt_le">Rnot_lt_le</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">RIneq.Rle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_le_DN_lt">round_UP_le_DN_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6012')">Proof with</div>
<div class="proofscript" id="proof6012">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fy</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_lt_le">Rnot_lt_le</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">RIneq.Rle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_UP_le_DN">pred_UP_le_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6013')">Proof with</div>
<div class="proofscript" id="proof6013">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_le_id">pred_le_id</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) 0); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_bool_true">Rle_bool_true</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="id">contradict</span> <span class="id">Zx</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_neq_0_negligible_exp">round_neq_0_negligible_exp</a></span>...<br/>
<span class="tactic">intros</span> <span class="id">L</span>; <span class="tactic">apply</span> <span class="id">Fx</span>; <span class="tactic">rewrite</span> <span class="id">L</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">Hn</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (- <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)); <span class="tactic">trivial</span>; <span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">absurd</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> &lt;= - <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_le_DN_lt">round_UP_le_DN_lt</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">assert</span> (<span class="kwd">let</span> <span class="id">u</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> <span class="kwd">in</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)%<span class="id">R</span> <span class="kwd">as</span> <span class="id">Hup</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_ge_UP_gt">round_DN_ge_UP_gt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_pred">generic_format_pred</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="UP_le_succ_DN">UP_le_succ_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6014')">Proof.</div>
<div class="proofscript" id="proof6014">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_opp">round_DN_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_opp">round_UP_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_UP_le_DN">pred_UP_le_DN</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_UP_eq_DN">pred_UP_eq_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  ~ <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6015')">Proof with</div>
<div class="proofscript" id="proof6015">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_UP_le_DN">pred_UP_le_DN</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_ge_gt">pred_ge_gt</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_UP_lt">round_DN_UP_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Fx</span> <span class="kwd">as</span> <span class="id">HE</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">HE</span>) (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">HE</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_DN_eq_UP">succ_DN_eq_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  ~ <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6016')">Proof with</div>
<div class="proofscript" id="proof6016">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_UP_eq_DN">pred_UP_eq_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_pred">succ_pred</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_eq">round_DN_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">d</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6017')">Proof with</div>
<div class="proofscript" id="proof6017">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">d</span> <span class="id">Fd</span> (<span class="id">Hxd1</span>,<span class="id">Hxd2</span>).<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>); <span class="tactic">intros</span> (<span class="id">T1</span>,(<span class="id">T2</span>,<span class="id">T3</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">T3</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">NFx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_inv">succ_le_inv</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_lt">succ_le_lt</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_inv">succ_le_inv</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_DN_eq_UP">succ_DN_eq_UP</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>...<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_eq">round_UP_eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">u</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6018')">Proof with</div>
<div class="proofscript" id="proof6018">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">u</span> <span class="id">Fu</span> <span class="id">Hux</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">u</span>).<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_eq">round_DN_eq</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">split</span>;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>|<span class="id">idtac</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_opp">succ_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_ulp_0">ulp_ulp_0</a></span> : <span class="kwd">forall</span> {<span class="id">H</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span>},<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6019')">Proof.</div>
<div class="proofscript" id="proof6019">
<span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">case</span> (<span class="id">negligible_exp_spec</span>').<br/>
<span class="tactic">intros</span> (<span class="id">K1</span>,<span class="id">K2</span>).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0) <span class="kwd">with</span> 0%<span class="id">R</span> <span class="tactic">at</span> 1; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">K1</span>.<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">Hn1</span>,<span class="id">Hn2</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_bpow">ulp_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hn1</span>; <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_ulp_0">ulp_ge_ulp_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_succ_pos">ulp_succ_pos</a></span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6020')">Proof with</div>
<div class="proofscript" id="proof6020">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>); <span class="tactic">intros</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_eq_pos">succ_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">H</span>:(<span class="id">x</span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id">x</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> <span class="id">e</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">destruct</span> <span class="id">H</span>;[<span class="id">left</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="tactic">at</span> 1.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_lt">Rgt_lt</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>...<br/>
2: <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="tactic">at</span> 2.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">f_equal</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>; <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#trans_eq">trans_eq</a></span> <span class="kwd">with</span> <span class="id">e</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique_pos">mag_unique_pos</a></span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">He</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique_pos">mag_unique_pos</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_round_pos">ulp_round_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Not_FTZ_</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span>},<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6021')">Proof with</div>
<div class="proofscript" id="proof6021">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Not_FTZ_</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Hr</span>; <span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_DN">ulp_DN</a></span>; <span class="id">now</span> <span class="id">left</span>...<br/>
<span class="tactic">assert</span> (<span class="id">M</span>:(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>...<br/>
<span class="tactic">destruct</span> <span class="id">M</span> <span class="kwd">as</span> [<span class="id">M</span>|<span class="id">M</span>].<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_DN_eq_UP">succ_DN_eq_UP</a></span> <span class="id">x</span>)...<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_succ_pos">ulp_succ_pos</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)); <span class="tactic">try</span> <span class="tactic">intros</span> <span class="id">Y</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_DN">ulp_DN</a></span> <span class="kwd">in</span> <span class="id">Y</span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">right</span>; <span class="tactic">rewrite</span> <span class="id">Y</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#mag_DN">mag_DN</a></span>...<br/>
<span class="id">left</span>; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_DN_eq_UP">succ_DN_eq_UP</a></span> <span class="id">x</span>)...<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">M</span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_0">succ_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_ulp_0">ulp_ulp_0</a></span>...<br/>
<span class="tactic">case</span> (<span class="id">negligible_exp_spec</span>').<br/>
<span class="tactic">intros</span> (<span class="id">K1</span>,<span class="id">K2</span>).<br/>
<span class="id">absurd</span> (<span class="id">x</span> = 0)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#eq_0_round_0_negligible_exp">eq_0_round_0_negligible_exp</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span>...<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">Hn1</span>,<span class="id">Hn2</span>)).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> 0) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
2: <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
2: <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hn1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>; <span class="tactic">f_equal</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>...<br/>
<span class="tactic">assert</span> (<span class="id">e</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#exp_small_round_0_pos">exp_small_round_0_pos</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>...<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>...<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>); <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_round">ulp_round</a></span> : <span class="kwd">forall</span> { <span class="id">Not_FTZ_</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span>},<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6022')">Proof with</div>
<div class="proofscript" id="proof6022">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Not_FTZ_</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rtotal_order">Rtotal_order</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_round_pos">ulp_round_pos</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id">rnd</span>) (-<span class="id">x</span>)).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_opp">round_opp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Y</span>;<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_opp">mag_opp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Y</span>; <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_opp">round_opp</a></span>, <span class="id">Y</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zx</span> <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="id">left</span>; <span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_round_pos">ulp_round_pos</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="succ_round_ge_id">succ_round_ge_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6023')">Proof.</div>
<div class="proofscript" id="proof6023">
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Vrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Raux.Zceil</a></span> <span class="id">x</span>)).<br/>
{ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>]; <span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
{ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#UP_le_succ_DN">UP_le_succ_DN</a></span>. }<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of rounding to nearest and ulp </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_le_midp">round_N_le_midp</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#v">v</a></span> &lt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)/2)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>)  <span class="id"><a href="compcert.flocq.Core.Ulp.html#v">v</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6024')">Proof with</div>
<div class="proofscript" id="proof6024">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span> <span class="id">Fu</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">V</span>: ((<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span> = 0 /\ <span class="id">u</span> = 0) \/ <span class="id">u</span> &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>)%<span class="id">R</span>).<br/>
<span class="id">specialize</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_ge_id">succ_ge_id</a></span> <span class="id">u</span>); <span class="tactic">intros</span> <span class="id">P</span>; <span class="tactic">destruct</span> <span class="id">P</span> <span class="kwd">as</span> [<span class="id">P</span>|<span class="id">P</span>].<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">u</span> 0); <span class="tactic">intros</span> <span class="id">Zu</span>.<br/>
<span class="id">left</span>; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">P</span>.<br/>
<span class="id">right</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">destruct</span> <span class="id">V</span> <span class="kwd">as</span> [(<span class="id">V1</span>,<span class="id">V2</span>)|<span class="id">V</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">V2</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_le_generic">round_le_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">left</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">V1</span>,<span class="id">V2</span>; <span class="id">right</span>; <span class="id">field</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">T</span>: (<span class="id">u</span> &lt; (<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>)%<span class="id">R</span>) <span class="tactic">by</span> <span class="id">lra</span>.<br/>
<span class="tactic">destruct</span> <span class="id">T</span> <span class="kwd">as</span> (<span class="id">T1</span>,<span class="id">T2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html#Rnd_N_pt_monotone">Rnd_N_pt_monotone</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id">v</span> ((<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2)%<span class="id">R</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_pt">round_N_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html#Rnd_N_pt_DN">Rnd_N_pt_DN</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>)%<span class="id">R</span>.<br/>
<span class="tactic">pattern</span> <span class="id">u</span> <span class="tactic">at</span> 3; <span class="tactic">replace</span> <span class="id">u</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> ((<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_DN_eq">round_DN_eq</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">left</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>) <span class="tactic">at</span> 2; <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> ((<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_UP_eq">round_UP_eq</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_succ">generic_format_succ</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_succ">pred_succ</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">left</span>; <span class="tactic">assumption</span>.<br/>
<span class="id">right</span>; <span class="id">field</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_ge_midp">round_N_ge_midp</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span>,<br/>
&nbsp;<span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> -&gt;  ((<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)/2 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#v">v</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>)  <span class="id"><a href="compcert.flocq.Core.Ulp.html#v">v</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6025')">Proof with</div>
<div class="proofscript" id="proof6025">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span> <span class="id">Fu</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">v</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">u</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_N_le_midp">round_N_le_midp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_cancel">Ropp_lt_cancel</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred">pred</a></span>.<br/>
<span class="id">right</span>; <span class="id">field</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_DN">round_N_eq_DN</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">d</span>:=<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">u</span>:=<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>&lt;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)/2)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6026')">Proof with</div>
<div class="proofscript" id="proof6026">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_N_le_midp">round_N_le_midp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>).<br/>
<span class="id">right</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; <span class="tactic">trivial</span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_DN_eq_UP">succ_DN_eq_UP</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_DN_pt">round_N_eq_DN_pt</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Defs.html#Rnd_DN_pt">Rnd_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Defs.html#Rnd_UP_pt">Rnd_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>&lt;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)/2)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6027')">Proof with</div>
<div class="proofscript" id="proof6027">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">Hd</span> <span class="id">Hu</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H0</span>:(<span class="id">d</span> = <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html#Rnd_DN_pt_unique">Rnd_DN_pt_unique</a></span> <span class="kwd">with</span> (1:=<span class="id">Hd</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_N_eq_DN">round_N_eq_DN</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html#Rnd_UP_pt_unique">Rnd_UP_pt_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) <span class="id">u</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_UP">round_N_eq_UP</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">d</span>:=<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">u</span>:=<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)/2 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6028')">Proof with</div>
<div class="proofscript" id="proof6028">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_le_generic">round_le_generic</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_N_ge_midp">round_N_ge_midp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>).<br/>
<span class="id">right</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; <span class="tactic">trivial</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#pred_UP_eq_DN">pred_UP_eq_DN</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_UP_pt">round_N_eq_UP_pt</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Defs.html#Rnd_DN_pt">Rnd_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Defs.html#Rnd_UP_pt">Rnd_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>)/2 &lt; <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Ulp.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6029')">Proof with</div>
<div class="proofscript" id="proof6029">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">Hd</span> <span class="id">Hu</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H0</span>:(<span class="id">u</span> = <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html#Rnd_UP_pt_unique">Rnd_UP_pt_unique</a></span> <span class="kwd">with</span> (1:=<span class="id">Hu</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#round_N_eq_UP">round_N_eq_UP</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Round_pred.html#Rnd_DN_pt_unique">Rnd_DN_pt_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#F">F</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id">d</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_plus_ulp_ge">round_N_plus_ulp_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> } <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">rx</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice2">choice2</a></span>) <span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#choice1">choice1</a></span>) (<span class="id"><a href="compcert.flocq.Core.Ulp.html#rx">rx</a></span> + <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#rx">rx</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6030')">Proof.</div>
<div class="proofscript" id="proof6030">
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">rx</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Vrnd1</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice1</span>)) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Vrnd2</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>)) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#succ">succ</a></span> <span class="id">rx</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_round_ge_id">succ_round_ge_id</a></span>|].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#succ_le_plus_ulp">succ_le_plus_ulp</a></span>|<span class="id">now</span> <span class="tactic">simpl</span>|].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#generic_format_plus_ulp">generic_format_plus_ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#Fcore_ulp">Fcore_ulp</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
