
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Globalenvs</title>
<meta name="description" content="Documentation of Coq module Globalenvs" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Globalenvs</h1>
<div class="coq">
<br/>
<div class="doc">Global environments are a component of the dynamic semantics of
  all languages involved in the compiler.  A global environment
  maps symbol names (names of functions and of global variables)
  to the corresponding memory addresses.  It also maps memory addresses
  of functions to the corresponding function descriptions.
  Global environments, along with the initial memory state at the beginning
  of program execution, are built from the program of interest, as follows:
<ul>
<li>
 A distinct memory address is assigned to each function of the program.
  These function addresses use negative numbers to distinguish them from
  addresses of memory blocks.  The associations of function name to function
  address and function address to function description are recorded in
  the global environment.
</li>
<li>
 For each global variable, a memory block is allocated and associated to
  the name of the variable.
</li>
</ul>
  These operations reflect (at a high level of abstraction) what takes
  place during program linking and program loading in a real operating
  system. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.funind.Recdef.html">Recdef</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zwf.html">Zwf</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Axioms.html">Axioms</a></span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">s</span> #1" := (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">s</span>) (<span class="tactic">at</span> <span class="id">level</span> 9, <span class="id">format</span> "<span class="id">s</span> '#1'") : <span class="id">pair_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">s</span> #2" := (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">s</span>) (<span class="tactic">at</span> <span class="id">level</span> 9, <span class="id">format</span> "<span class="id">s</span> '#2'") : <span class="id">pair_scope</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">pair_scope</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<div class="doc">Auxiliary function for initialization of global variables. </div>
<br/>
<span class="id">Function</span> <span class="id">store_zeros</span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) {<span class="kwd">wf</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zwf.html#Zwf">Zwf</a></span> 0) <span class="id">n</span>}: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> 0 <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Values.html#Vzero">Vzero</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 1) (<span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> - 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1312')">Proof.</div>
<div class="proofscript" id="proof1312">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zwf.html#Zwf_well_founded">Zwf_well_founded</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Unset</span> <span class="id">Elimination</span> <span class="id">Schemes</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Unset</span> <span class="id">Case</span> <span class="id">Analysis</span> <span class="id">Schemes</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="Genv">Genv</a></span>.<br/>
<br/>
<h1> Global environments </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.GENV">GENV</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.F">F</a></span>: <span class="kwd">Type</span>.  <span class="docright">(* The type of function descriptions  *)</span><br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.V">V</a></span>: <span class="kwd">Type</span>.  <span class="docright">(* The type of information attached to variables  *)</span><br/>
<br/>
<div class="doc">The type of symbol tables. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Genv.symtbl">symtbl</a></span>: <span class="kwd">Type</span> := <span class="id"><a name="Genv.mkstbl">mkstbl</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_public">genv_public</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>;              <span class="docright">(* which symbol names are public  *)</span><br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_symb">genv_symb</a></span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>;             <span class="docright">(* mapping symbol -&gt; block  *)</span><br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_info">genv_info</a></span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_next">genv_next</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>;                     <span class="docright">(* next symbol pointer  *)</span><br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_symb_range">genv_symb_range</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_symb">genv_symb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_next">genv_next</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_info_range">genv_info_range</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">g</span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_info">genv_info</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_next">genv_next</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_vars_inj">genv_vars_inj</a></span>: <span class="kwd">forall</span> <span class="id">id1</span> <span class="id">id2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_symb">genv_symb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id2">id2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_symb">genv_symb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#id2">id2</a></span><br/>
}.<br/>
<br/>
<div class="doc">The type of global environments. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Genv.t">t</a></span>: <span class="kwd">Type</span> := <span class="id"><a name="Genv.mkgenv">mkgenv</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.to_senv">to_senv</a></span> :&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_defs">genv_defs</a></span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.V">V</a></span>);     <span class="docright">(* mapping block -&gt; definition  *)</span><br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.genv_defs_range">genv_defs_range</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">g</span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#genv_defs">genv_defs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#to_senv">to_senv</a></span>);<br/>
}.<br/>
<br/>
<h2> Lookup functions </h2>
<br/>
<div class="doc"><span class="bracket"><span class="id">find_symbol</span> <span class="id">ge</span> <span class="id">id</span></span> returns the block associated with the given name, if any </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.find_symbol">find_symbol</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.has_symbol">has_symbol</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">symbol_address</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">ofs</span></span> returns a pointer into the block associated
  with <span class="bracket"><span class="id">id</span></span>, at byte offset <span class="bracket"><span class="id">ofs</span></span>.  <span class="bracket"><span class="id">Vundef</span></span> is returned if no block is associated
  to <span class="bracket"><span class="id">id</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.symbol_address">symbol_address</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span>) : <span class="id"><a href="compcert.common.Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">public_symbol</span> <span class="id">ge</span> <span class="id">id</span></span> says whether the name <span class="bracket"><span class="id">id</span></span> is public and defined. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.public_symbol">public_symbol</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">genv_public</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">find_info</span> <span class="id">ge</span> <span class="id">b</span></span> returns the symbol information associated with the given address. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.find_info">find_info</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">find_def</span> <span class="id">ge</span> <span class="id">b</span></span> returns the global definition associated with the given address. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.find_def">find_def</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.V">V</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs">genv_defs</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">find_funct_ptr</span> <span class="id">ge</span> <span class="id">b</span></span> returns the function description associated with
    the given address. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.find_funct_ptr">find_funct_ptr</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">f</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">f</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">find_funct</span></span> is similar to <span class="bracket"><span class="id">find_funct_ptr</span></span>, but the function address
    is given as a value, which must be a pointer with offset 0. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.find_funct">find_funct</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span>) (<span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id">b</span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">invert_symbol</span> <span class="id">ge</span> <span class="id">b</span></span> returns the name associated with the given block, if any </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.invert_symbol">invert_symbol</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.fold">PTree.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">res</span> <span class="id">id</span> <span class="id">b</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id">b</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Globalenvs.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">find_var_info</span> <span class="id">ge</span> <span class="id">b</span></span> returns the information attached to the variable
   at address <span class="bracket"><span class="id">b</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.find_var_info">find_var_info</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.common.AST.html#globvar">globvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">block_is_volatile</span> <span class="id">ge</span> <span class="id">b</span></span> returns <span class="bracket"><span class="id">true</span></span> if <span class="bracket"><span class="id">b</span></span> points to a global variable
  of volatile type, <span class="bracket"><span class="id">false</span></span> otherwise. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.block_is_volatile">block_is_volatile</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">gv</span>) =&gt; <span class="id">gv</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">is_internal</span></span> identifies pointers to internal functions </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.is_internal">is_internal</a></span> `{<span class="id">Fii</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span>} (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span>) (<span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fd</span> =&gt; <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id">fd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h2> Constructing symbol tables </h2>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Genv.add_global">add_global</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">idg</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) : <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mkstbl">mkstbl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">genv_public</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span>#1 <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span>#2 <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1313')">Next Obligation.</div>
<div class="proofscript" id="proof1313">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ge</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">i</span>). <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1314')">Next Obligation.</div>
<div class="proofscript" id="proof1314">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ge</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id">genv_next0</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1315')">Next Obligation.</div>
<div class="proofscript" id="proof1315">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ge</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id1</span> <span class="id">i</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id2</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>. <span class="tactic">eapply</span> <span class="id">genv_symb_range0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>. <span class="tactic">eapply</span> <span class="id">genv_symb_range0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.add_globals">add_globals</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">gl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)) : <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globals_app">add_globals_app</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl2</span> <span class="id">gl1</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#gl1">gl1</a></span> ++ <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span>) = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl1">gl1</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1316')">Proof.</div>
<div class="proofscript" id="proof1316">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Genv.empty_stbl">empty_stbl</a></span> (<span class="id">pub</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>): <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mkstbl">mkstbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#pub">pub</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>) 1%<span class="id">positive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1317')">Next Obligation.</div>
<div class="proofscript" id="proof1317">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1318')">Next Obligation.</div>
<div class="proofscript" id="proof1318">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1319')">Next Obligation.</div>
<div class="proofscript" id="proof1319">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.symboltbl">symboltbl</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.empty_stbl">empty_stbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)) <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span>).<br/>
<br/>
<div class="doc">Proof principles </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.GENV.GLOBALENV_PRINCIPLES">GLOBALENV_PRINCIPLES</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globals_preserves">add_globals_preserves</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">g</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1320')">Proof.</div>
<div class="proofscript" id="proof1320">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id">IHgl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globals_ensures">add_globals_ensures</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">g</span> <span class="id">gl</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">g</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1321')">Proof.</div>
<div class="proofscript" id="proof1321">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals_preserves">add_globals_preserves</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHgl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globals_unique_preserves">add_globals_unique_preserves</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">gl</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id1</span> <span class="id">g</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>))) -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1322')">Proof.</div>
<div class="proofscript" id="proof1322">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id">IHgl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globals_unique_ensures">add_globals_unique_ensures</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl1</span> <span class="id">id</span> <span class="id">g</span> <span class="id">gl2</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id1</span> <span class="id">g1</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g1">g1</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g1">g1</a></span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>))) -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#gl1">gl1</a></span> ++ (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) :: <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1323')">Proof.</div>
<div class="proofscript" id="proof1323">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals_app">add_globals_app</a></span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals_unique_preserves">add_globals_unique_preserves</a></span> <span class="kwd">with</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.in_norepet_unique">in_norepet_unique</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">g</span> (<span class="id">gl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)),<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">gl1</span> <span class="id">gl2</span>, <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#gl1">gl1</a></span> ++ (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) :: <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span> /\ ~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1324')">Proof.</div>
<div class="proofscript" id="proof1324">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span> <span class="kwd">as</span> [|[<span class="id">id1</span> <span class="id">g1</span>] <span class="id">gl</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id">gl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHgl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">gl1</span> &amp; <span class="id">gl2</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> ((<span class="id">id1</span>, <span class="id">g1</span>) :: <span class="id">gl1</span>), <span class="id">gl2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">X</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globals_norepet_ensures">add_globals_norepet_ensures</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">g</span> <span class="id">gl</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id1</span> <span class="id">g1</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g1">g1</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g1">g1</a></span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES.P">P</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1325')">Proof.</div>
<div class="proofscript" id="proof1325">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.in_norepet_unique">in_norepet_unique</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">gl1</span> &amp; <span class="id">gl2</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">gl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals_unique_ensures">add_globals_unique_ensures</a></span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.GLOBALENV_PRINCIPLES">GLOBALENV_PRINCIPLES</a></span>.<br/>
<br/>
<h2> Constructing global environments </h2>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.se">se</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.add_globdef">add_globdef</a></span> (<span class="id">defs</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id">_</span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">g</span>: <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.V">V</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#defs">defs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#defs">defs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Genv.globalenv">globalenv</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.V">V</a></span>): <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mkgenv">mkgenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.fold">PTree.fold</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef">add_globdef</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>)) <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1326')">Next Obligation.</div>
<div class="proofscript" id="proof1326">
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold_spec">PTree.fold_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">pattern</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_ind">rev_ind</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">idg</span> <span class="id">defs</span> <span class="id">IH</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef">add_globdef</a></span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span>) ! (<span class="id">idg</span>#1)) <span class="id">eqn</span>:<span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Compatibility between symbol tables and skeletons </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.valid_for">valid_for</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">se</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">g</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span> <span class="id">g</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">g</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id">g</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.valid_for_linkorder">valid_for_linkorder</a></span> (<span class="id">p1</span> <span class="id">p2</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>):<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p2">p2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.valid_for">valid_for</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p2">p2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.valid_for">valid_for</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1327')">Proof.</div>
<div class="proofscript" id="proof1327">
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">_</span> &amp; <span class="id">_</span> &amp; <span class="id">Hp</span>) <span class="id">Hp2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">id</span> <span class="id">g</span> <span class="id">Hg</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hp</span> <span class="kwd">as</span> (<span class="id">g</span>' &amp; <span class="id">Hg</span>' &amp; <span class="id">Hgg</span>' &amp; <span class="id">_</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hp2</span> <span class="kwd">as</span> (<span class="id">b</span> &amp; <span class="id">g</span>'' &amp; <span class="id">Hb</span> &amp; <span class="id">Hbg</span>' &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">g</span>''. <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Linking.html#linkorder_trans">linkorder_trans</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of the operations over global environments </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.public_symbol_exists">public_symbol_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">public_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1328')">Proof.</div>
<div class="proofscript" id="proof1328">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">public_symbol</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id">ge</span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.shift_symbol_address">shift_symbol_address</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">ofs</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) = <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1329')">Proof.</div>
<div class="proofscript" id="proof1329">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id">ge</span> <span class="id">id</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.shift_symbol_address_32">shift_symbol_address_32</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>)) = <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1330')">Proof.</div>
<div class="proofscript" id="proof1330">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id">ge</span> <span class="id">id</span>).<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.shift_symbol_address_64">shift_symbol_address_64</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64">Ptrofs.of_int64</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>)) = <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1331')">Proof.</div>
<div class="proofscript" id="proof1331">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">symbol_address</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id">ge</span> <span class="id">id</span>).<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_inv">find_funct_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">v</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1332')">Proof.</div>
<div class="proofscript" id="proof1332">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">f</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span> <span class="id">i</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">b</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_find_funct_ptr">find_funct_find_funct_ptr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1333')">Proof.</div>
<div class="proofscript" id="proof1333">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_ptr_iff">find_funct_ptr_iff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">b</span> <span class="id">f</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1334')">Proof.</div>
<div class="proofscript" id="proof1334">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> <span class="id">ge</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">f1</span>|<span class="id">v1</span>]|]; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_var_info_iff">find_var_info_iff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">b</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">find_var_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1335')">Proof.</div>
<div class="proofscript" id="proof1335">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">find_var_info</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="id">ge</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">f1</span>|<span class="id">v1</span>]|]; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_symbol_injective">find_symbol_injective</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id1</span> <span class="id">id2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id2">id2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#id2">id2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1336')">Proof.</div>
<div class="proofscript" id="proof1336">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">genv_vars_inj</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.global_addresses_distinct">global_addresses_distinct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id1</span> <span class="id">id2</span> <span class="id">b1</span> <span class="id">b2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Globalenvs.html#id2">id2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id1">id1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id2">id2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1337')">Proof.</div>
<div class="proofscript" id="proof1337">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>. <span class="tactic">elim</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">ge</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.invert_find_symbol">invert_find_symbol</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1338')">Proof.</div>
<div class="proofscript" id="proof1338">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">b</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">v</span>). <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">assert</span> (<span class="id">m</span>!<span class="id">k</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_invert_symbol">find_invert_symbol</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1339')">Proof.</div>
<div class="proofscript" id="proof1339">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id">ge</span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> -&gt; <span class="id">exists</span> <span class="id">id</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span> <span class="id">ge</span> <span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span>').<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">v</span>). <span class="id">exists</span> <span class="id">k</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id</span>' <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id</span> = <span class="id">id</span>'). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">genv_vars_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">invert_find_symbol</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of <span class="bracket"><span class="id">symboltbl</span></span> </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.advance_next">advance_next</a></span> (<span class="id">gl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)) (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="kwd">fun</span> <span class="id">n</span> <span class="id">g</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#x">x</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.genv_next_add_globals">genv_next_add_globals</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>) = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.advance_next">advance_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1340')">Proof.</div>
<div class="proofscript" id="proof1340">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHgl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.genv_public_add_globals">genv_public_add_globals</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">genv_public</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>) = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">genv_public</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1341')">Proof.</div>
<div class="proofscript" id="proof1341">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHgl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.globalenv_public">globalenv_public</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">genv_public</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) = <span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1342')">Proof.</div>
<div class="proofscript" id="proof1342">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public_add_globals">genv_public_add_globals</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.block_is_volatile_below">block_is_volatile_below</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">block_is_volatile</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;  <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1343')">Proof.</div>
<div class="proofscript" id="proof1343">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">block_is_volatile</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="kwd">as</span> [[|<span class="id">gv</span>]|] <span class="id">eqn</span>:<span class="id">FV</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info_range">genv_info_range</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.find_info_symbol">find_info_symbol</a></span> <span class="id">p</span> <span class="id">id</span> <span class="id">gd</span>:<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1344')">Proof.</div>
<div class="proofscript" id="proof1344">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span>, <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id">p</span>), (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>). <span class="tactic">clear</span>. <span class="tactic">intros</span> <span class="id">pub</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_ind">rev_ind</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.empty_stbl">empty_stbl</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span>. <span class="id">cbn</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> (? &amp; ? &amp; ?). <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> *. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> [<span class="id">i</span> <span class="id">g</span>] <span class="id">defs</span> <span class="id">IHdefs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="kwd">in</span> *. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span>. <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">Hb</span> &amp; ?). <span class="id">inv</span> <span class="id">Hb</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">IHdefs</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">Hb</span> &amp; ?). <span class="id">eexists</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span> <span class="kwd">in</span> <span class="id">Hb</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">Hb</span> &amp; ?). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> * <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span> <span class="kwd">in</span> <span class="id">Hb</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of <span class="bracket"><span class="id">globalenv</span></span> </h2>
<br/>
<div class="doc">This characterization of <span class="bracket"><span class="id">globalenv</span></span> is less computationally
  efficient than the definition but easier to reason about. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.find_def_spec">find_def_spec</a></span> <span class="id">p</span> <span class="id">b</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> =<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt; (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) ! <span class="id">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1345')">Proof.</div>
<div class="proofscript" id="proof1345">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">Hm</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span>; <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">defmap</span> <span class="id">defs</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">Hprog_id</span> <span class="id">Hdefmap_id</span> <span class="id">IH</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef">add_globdef</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span> <span class="kwd">as</span> [<span class="id">id</span>'|] <span class="id">eqn</span>:<span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">Hb</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="kwd">in</span> <span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span>' <span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">Hb</span>, !<span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span>) ! <span class="id">id</span> <span class="kwd">as</span> [<span class="id">b</span>'|] <span class="id">eqn</span>:<span class="id">Hb</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">genv_vars_inj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span>) ! <span class="id">id</span> <span class="kwd">as</span> [<span class="id">b</span>'|] <span class="id">eqn</span>:<span class="id">Hb</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">find_invert_symbol</a></span> <span class="kwd">in</span> <span class="id">Hb</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_prop">find_funct_prop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">v</span> <span class="id">f</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.F">F</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">f</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1346')">Proof.</div>
<div class="proofscript" id="proof1346">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">v</span> <span class="id">f</span> <span class="id">P</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_spec">find_def_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p</span>) ! <span class="id">i</span> <span class="kwd">as</span> [[<span class="id">fd</span>|]|] <span class="id">eqn</span>:<span class="id">Hgd</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_def_symbol">find_def_symbol</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">id</span> <span class="id">g</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.valid_for">valid_for</a></span> (<span class="id"><a href="compcert.common.AST.html#erase_program">erase_program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.se">se</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>)!<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> &lt;-&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1347')">Proof.</div>
<div class="proofscript" id="proof1347">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">id</span> <span class="id">g</span> <span class="id">Hse</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">Hg</span>. <span class="id">edestruct</span> <span class="id">Hse</span> <span class="kwd">as</span> (<span class="id">b</span> &amp; <span class="id">g</span>' &amp; <span class="id">Hb</span> &amp; <span class="id">Hg</span>' &amp; <span class="id">LO</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.AST.html#erase_program_defmap">erase_program_defmap</a></span>. <span class="id">erewrite</span> <span class="id">Hg</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>. <span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_spec">find_def_spec</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">find_invert_symbol</a></span> <span class="kwd">in</span> <span class="id">Hb</span>. <span class="tactic">rewrite</span> <span class="id">Hb</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">Hb</span> &amp; <span class="id">Hg</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_spec">find_def_spec</a></span> <span class="kwd">in</span> <span class="id">Hg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">invert_symbol</a></span> <span class="id">eqn</span>:<span class="id">Hb</span>'; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">i</span> = <span class="id">id</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">genv_vars_inj</a></span>; <span class="tactic">eauto</span>). <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h1> Construction of the initial memory state </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.GENV.INITMEM">INITMEM</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.INITMEM.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.store_init_data">store_init_data</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float32">Init_float32</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float64">Init_float64</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">symb</span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">symb</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Genv.store_init_data_list">store_init_data_list</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">idl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">idl</span>}: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#idl">idl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span><br/>
&nbsp;&nbsp;| <span class="id">id</span> :: <span class="id">idl</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#store_init_data_list">store_init_data_list</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">id</span>) <span class="id">idl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.perm_globvar">perm_globvar</a></span> (<span class="id">gv</span>: <span class="id"><a href="compcert.common.AST.html#globvar">globvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) : <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="kwd">if</span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span>) <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.alloc_global">alloc_global</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">idg</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>, <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">f</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">m1</span>, <span class="id">b</span>) := <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> 0 1 <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">Mem.drop_perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 1 <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>, <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">init</span> := <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#init">init</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">m1</span>, <span class="id">b</span>) := <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#sz">sz</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#sz">sz</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id">m2</span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#init">init</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m3</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">Mem.drop_perm</a></span> <span class="id">m3</span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#sz">sz</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Genv.alloc_globals">alloc_globals</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">gl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">gl</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span><br/>
&nbsp;&nbsp;| <span class="id">g</span> :: <span class="id">gl</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">g</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#alloc_globals">alloc_globals</a></span> <span class="id">m</span>' <span class="id">gl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.alloc_globals_app">alloc_globals_app</a></span> : <span class="kwd">forall</span> <span class="id">gl1</span> <span class="id">gl2</span> <span class="id">m</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl1">gl1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#gl1">gl1</a></span> ++ <span class="id"><a href="compcert.common.Globalenvs.html#gl2">gl2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1348')">Proof.</div>
<div class="proofscript" id="proof1348">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span>.  <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id">m</span> <span class="id">a</span>); <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Next-block properties </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_zeros_nextblock">store_zeros_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1349')">Proof.</div>
<div class="proofscript" id="proof1349">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHo</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_init_data_list_nextblock">store_init_data_list_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">idl</span> <span class="id">b</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idl">idl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1350')">Proof.</div>
<div class="proofscript" id="proof1350">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">idl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">m</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">i</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.alloc_global_nextblock">alloc_global_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">g</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1351')">Proof.</div>
<div class="proofscript" id="proof1351">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span> <span class="kwd">as</span> [<span class="id">id</span> [<span class="id">f</span>|<span class="id">v</span>]].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 1) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">Mem.nextblock_drop</a></span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">init</span> := <span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">init</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">init</span>) <span class="kwd">as</span> [<span class="id">m3</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">Mem.nextblock_drop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_nextblock">store_init_data_list_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_nextblock">store_zeros_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.alloc_globals_nextblock">alloc_globals_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.advance_next">advance_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1352')">Proof.</div>
<div class="proofscript" id="proof1352">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id">m</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">IHgl</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_nextblock">alloc_global_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Permissions </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_zeros_perm">store_zeros_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">prm</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1353')">Proof.</div>
<div class="proofscript" id="proof1353">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHo</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">intros</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_init_data_perm">store_init_data_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">prm</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">i</span> <span class="id">b</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1354')">Proof.</div>
<div class="proofscript" id="proof1354">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">k</span> <span class="id">prm</span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id">q</span> <span class="id">k</span> <span class="id">prm</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">i</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_init_data_list_perm">store_init_data_list_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">prm</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">idl</span> <span class="id">b</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idl">idl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1355')">Proof.</div>
<div class="proofscript" id="proof1355">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">idl</span> <span class="kwd">as</span> [ | <span class="id">i1</span> <span class="id">idl</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">tauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i1</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">S1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">k</span> <span class="id">prm</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_perm">store_init_data_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHidl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.alloc_global_perm">alloc_global_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">prm</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">idg</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1356')">Proof.</div>
<div class="proofscript" id="proof1356">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">idg</span> <span class="kwd">as</span> [<span class="id">id</span> [<span class="id">f</span>|<span class="id">v</span>]]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 1) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span>' &lt;&gt; <span class="id">b</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">Mem.perm_drop_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">Mem.perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">init</span> := <span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">init</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">init</span>) <span class="kwd">as</span> [<span class="id">m3</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span>' &lt;&gt; <span class="id">b</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">Mem.perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_perm">store_init_data_list_perm</a></span>; [<span class="id">idtac</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_perm">store_zeros_perm</a></span>; [<span class="id">idtac</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_perm">store_zeros_perm</a></span>; [<span class="id">idtac</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_perm">store_init_data_list_perm</a></span>; [<span class="id">idtac</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">Mem.perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.alloc_globals_perm">alloc_globals_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">prm</span> <span class="id">b</span>' <span class="id">q</span> <span class="id">gl</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Globalenvs.html#q">q</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#prm">prm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1357')">Proof.</div>
<div class="proofscript" id="proof1357">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id">m</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_perm">alloc_global_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">IHgl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_nextblock">alloc_global_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Data preservation properties </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_zeros_unchanged">store_zeros_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1358')">Proof.</div>
<div class="proofscript" id="proof1358">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m</span>'.<br/>
+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
+ <span class="tactic">apply</span> <span class="id">IHo</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">omega</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_init_data_unchanged">store_init_data_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">b</span> <span class="id">i</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1359')">Proof.</div>
<div class="proofscript" id="proof1359">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">i</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.store_init_data_list_unchanged">store_init_data_list_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">b</span> <span class="id">il</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1360')">Proof.</div>
<div class="proofscript" id="proof1360">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_unchanged">store_init_data_unchanged</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHil</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#init_data_size_pos">init_data_size_pos</a></span> <span class="id">a</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties related to <span class="bracket"><span class="id">loadbytes</span></span> </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.readbytes_as_zero">readbytes_as_zero</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> <span class="id">len</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Globalenvs.html#len">len</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_zeros_loadbytes">store_zeros_loadbytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.readbytes_as_zero">readbytes_as_zero</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1361')">Proof.</div>
<div class="proofscript" id="proof1361">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">n</span>; <span class="id">functional</span> <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>); <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">n0</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">omegaContradiction</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">p0</span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">p0</span>. <span class="tactic">destruct</span> <span class="id">n0</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n0</span>)) <span class="kwd">with</span> (1 + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n0</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>) (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> ((<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) ++ <span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> <span class="id">n0</span> (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_concat">Mem.loadbytes_concat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on">Mem.loadbytes_unchanged_on</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">b1</span> <span class="id">ofs1</span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#ofs1">ofs1</a></span> = <span class="id">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_unchanged">store_zeros_unchanged</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Values.html#Vzero">Vzero</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_same">Mem.loadbytes_store_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHo</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHo</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.bytes_of_init_data">bytes_of_init_data</a></span> (<span class="id">i</span>: <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> 1%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> 2%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> 4%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> 8%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float32">Init_float32</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> 4%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.to_bits">Float32.to_bits</a></span> <span class="id">n</span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float64">Init_float64</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> 8%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> (<span class="id"><a href="compcert.lib.Floats.html#Float.to_bits">Float.to_bits</a></span> <span class="id">n</span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id">n</span>) (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>   =&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> 8%<span class="id">nat</span> <span class="kwd">else</span> 4%<span class="id">nat</span>) <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.init_data_size_addrof">init_data_size_addrof</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1362')">Proof.</div>
<div class="proofscript" id="proof1362">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_loadbytes">store_init_data_loadbytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.readbytes_as_zero">readbytes_as_zero</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data">bytes_of_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1363')">Proof.</div>
<div class="proofscript" id="proof1363">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_same">Mem.loadbytes_store_same</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id">z</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id">z</span> 0).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> 0 <span class="id">z</span>). <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>; <span class="id">xomega</span>. <span class="tactic">destruct</span> <span class="id">z</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">EQ</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>. <span class="tactic">simpl</span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_size_addrof">init_data_size_addrof</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">i</span>) <span class="kwd">as</span> [<span class="id">b</span>'|]; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_same">Mem.loadbytes_store_same</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>, <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Genv.bytes_of_init_data_list">bytes_of_init_data_list</a></span> (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id">i</span> :: <span class="id">il</span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data">bytes_of_init_data</a></span> <span class="id">i</span> ++ <span class="id"><a href="compcert.common.Globalenvs.html#bytes_of_init_data_list">bytes_of_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_list_loadbytes">store_init_data_list_loadbytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">il</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.readbytes_as_zero">readbytes_as_zero</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">bytes_of_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1364')">Proof.</div>
<div class="proofscript" id="proof1364">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span> <span class="kwd">as</span> [ | <span class="id">i1</span> <span class="id">il</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#init_data_size_pos">init_data_size_pos</a></span> <span class="id">i1</span>) (<span class="id"><a href="compcert.common.AST.html#init_data_list_size_pos">init_data_list_size_pos</a></span> <span class="id">il</span>); <span class="tactic">intros</span> <span class="id">P1</span> <span class="id">PL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i1</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">S</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_concat">Mem.loadbytes_concat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on">Mem.loadbytes_unchanged_on</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">b1</span> <span class="id">ofs1</span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#ofs1">ofs1</a></span> &lt; <span class="id">p</span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">i1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_unchanged">store_init_data_list_unchanged</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_loadbytes">store_init_data_loadbytes</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHil</span> <span class="kwd">with</span> <span class="id">m1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on">Mem.loadbytes_unchanged_on</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">b1</span> <span class="id">ofs1</span> =&gt; <span class="id">p</span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">i1</span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs1">ofs1</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_unchanged">store_init_data_unchanged</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties related to <span class="bracket"><span class="id">load</span></span> </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.read_as_zero">read_as_zero</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> <span class="id">len</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Globalenvs.html#len">len</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> =<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> | <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> | <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> | <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> | <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id"><a href="compcert.lib.Floats.html#Float32.zero">Float32.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id"><a href="compcert.lib.Floats.html#Float.zero">Float.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> | <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.read_as_zero_unchanged">read_as_zero_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">len</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero">read_as_zero</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#len">len</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Globalenvs.html#len">len</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero">read_as_zero</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#len">len</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1365')">Proof.</div>
<div class="proofscript" id="proof1365">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on">Mem.load_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_zeros_read_as_zero">store_zeros_read_as_zero</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero">read_as_zero</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1366')">Proof.</div>
<div class="proofscript" id="proof1366">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.lib.Integers.html#Byte.zero">Byte.zero</a></span>)))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">Mem.loadbytes_load</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_loadbytes">store_zeros_loadbytes</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Genv.load_store_init_data">load_store_init_data</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) {<span class="kwd">struct</span> <span class="id">il</span>} : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> 8 <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 1) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> 16 <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 2) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 4) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 8) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float32">Init_float32</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 4) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float64">Init_float64</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + 8) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">symb</span> <span class="id">ofs</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">symb</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' /\ <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero">read_as_zero</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id">n</span> 0) <span class="id">il</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_list_charact">store_init_data_list_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">il</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero">read_as_zero</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data">load_store_init_data</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1367')">Proof.</div>
<div class="proofscript" id="proof1367">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">m1</span> <span class="id">il</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on">Mem.load_unchanged_on</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">b</span>' <span class="id">ofs</span>' =&gt; <span class="id">ofs</span>' &lt; <span class="id">p</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_unchanged">store_init_data_list_unchanged</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_same">Mem.load_store_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHil</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>': <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) <span class="id">ofs</span>' =&gt; <span class="id">p</span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">a</span> &lt;= <span class="id">ofs</span>').<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero_unchanged">read_as_zero_unchanged</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m</span>) (<span class="id">P</span> := <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#init_data_size_pos">init_data_size_pos</a></span> <span class="id">a</span>); <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_unchanged">store_init_data_unchanged</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="id">P</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">P</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">P</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Heqo</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>)); <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>)); <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>)); <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">i</span>)); <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f</span>)); <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f</span>)); <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">b</span>': <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) <span class="id">ofs</span>' =&gt; <span class="id">ofs</span>' &lt; <span class="id">p</span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">z</span>)).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Heqo</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.read_as_zero_unchanged">read_as_zero_unchanged</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m1</span>) (<span class="id">P</span> := <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size_pos">init_data_list_size_pos</a></span> <span class="id">il</span>); <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_unchanged">store_init_data_list_unchanged</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">P</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">P</span>. <span class="tactic">simpl</span>; <span class="id">xomega</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_size_addrof">init_data_size_addrof</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM.ge">ge</a></span> <span class="id">i</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b0</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b0</span> <span class="id">i0</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">A</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b0</span> <span class="id">i0</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>, <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.alloc_global_unchanged">alloc_global_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">id</span> <span class="id">g</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1368')">Proof.</div>
<div class="proofscript" id="proof1368">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">g</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
- <span class="comment">(*&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 1) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">Q</span> := <span class="kwd">fun</span> <span class="id">b</span>' (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) =&gt; <span class="id">b</span>' &lt;&gt; <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm_unchanged_on">Mem.drop_perm_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
- <span class="comment">(*&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">init</span> := <span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">init</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">init</span>) <span class="kwd">as</span> [<span class="id">m3</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">Q</span> := <span class="kwd">fun</span> <span class="id">b</span>' (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) =&gt; <span class="id">b</span>' &lt;&gt; <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_unchanged">store_zeros_unchanged</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_unchanged">store_init_data_list_unchanged</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm_unchanged_on">Mem.drop_perm_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.alloc_globals_unchanged">alloc_globals_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">gl</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#P">P</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1369')">Proof.</div>
<div class="proofscript" id="proof1369">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id">m</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m</span>''|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">g</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m</span>''.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_unchanged">alloc_global_unchanged</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHgl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.load_store_init_data_invariant">load_store_init_data_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">il</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data">load_store_init_data</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1370')">Proof.</div>
<div class="proofscript" id="proof1370">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">intro</span> <span class="id">p</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">intuition</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.globals_initialized">globals_initialized</a></span> (<span class="id">g</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> = 0 /\ <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) /\ <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span> <span class="id">v</span>) <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data">load_store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">bytes_of_init_data_list</a></span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)))<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.alloc_global_initialized">alloc_global_initialized</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">g</span> <span class="id">m</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globals_initialized">globals_initialized</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globals_initialized">globals_initialized</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span>)) <span class="id">m</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">add_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#gd">gd</a></span>)) = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1371')">Proof.</div>
<div class="proofscript" id="proof1371">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_nextblock">alloc_global_nextblock</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NB</span>. <span class="tactic">split</span>.<br/>
- <span class="comment">(*&nbsp;globals-initialized&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id">g</span>)).<br/>
+ <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">destruct</span> <span class="id">gd0</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 1) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:<span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>, &lt;- <span class="id">RES</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">Mem.perm_drop_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">ofs</span> &lt; 1). { <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">Mem.perm_drop_4</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_2">Mem.perm_drop_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">ORD</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">omega</span>. <span class="id">inv</span> <span class="id">ORD</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">set</span> (<span class="id">init</span> := <span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">init</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">init</span>) <span class="kwd">as</span> [<span class="id">m3</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id">g</span>) <span class="kwd">with</span> <span class="id">b</span> <span class="tactic">by</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">Mem.perm_drop_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">ofs</span> &lt; <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_perm">store_zeros_perm</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_perm">store_init_data_list_perm</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">Mem.perm_drop_4</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_2">Mem.perm_drop_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span> <span class="id">NOTVOL</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data_invariant">load_store_init_data_invariant</a></span> <span class="kwd">with</span> <span class="id">m3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_drop">Mem.load_drop</a></span>; <span class="tactic">eauto</span>. <span class="id">right</span>; <span class="id">right</span>; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span>. <span class="tactic">rewrite</span> <span class="id">NOTVOL</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span> <span class="id">v</span>); <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_charact">store_init_data_list_charact</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_read_as_zero">store_zeros_read_as_zero</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">NOTVOL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m3</span> <span class="id">b</span> 0 <span class="id">sz</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_drop">Mem.loadbytes_drop</a></span>; <span class="tactic">eauto</span>. <span class="id">right</span>; <span class="id">right</span>; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span>. <span class="tactic">rewrite</span> <span class="id">NOTVOL</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span> <span class="id">v</span>); <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_loadbytes">store_init_data_list_loadbytes</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_loadbytes">store_zeros_loadbytes</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">assert</span> (<span class="id">U</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>) <span class="id">m</span> <span class="id">m</span>') <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_unchanged">alloc_global_unchanged</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">red</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info_range">genv_info_range</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gd0</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>].<br/>
* <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]; <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">B</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on_2">Mem.perm_unchanged_on_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
* <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>). <span class="tactic">split</span>; [| <span class="tactic">split</span>; [| <span class="tactic">split</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">B</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on_2">Mem.perm_unchanged_on_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data_invariant">load_store_init_data_invariant</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on_1">Mem.load_unchanged_on_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on">Mem.loadbytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>.<br/>
- <span class="tactic">simpl</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.alloc_globals_initialized">alloc_globals_initialized</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">ge</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globals_initialized">globals_initialized</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globals_initialized">globals_initialized</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">add_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span>) <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1372')">Proof.</div>
<div class="proofscript" id="proof1372">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">g</span>]. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id">m</span> (<span class="id">id</span>, <span class="id">g</span>)) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_initialized">alloc_global_initialized</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHgl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM">INITMEM</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.init_mem">init_mem</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.init_mem_genv_next">init_mem_genv_next</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1373')">Proof.</div>
<div class="proofscript" id="proof1373">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals_nextblock">alloc_globals_nextblock</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_empty">Mem.nextblock_empty</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next_add_globals">genv_next_add_globals</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.empty_stbl">empty_stbl</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id">p</span>))).<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id">p</span>). <span class="tactic">simpl</span> <span class="id">genv_next</span>. <span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_symbol_not_fresh">find_symbol_not_fresh</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">id</span> <span class="id">b</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1374')">Proof.</div>
<div class="proofscript" id="proof1374">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">init_mem_genv_next</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.init_mem_characterization_gen">init_mem_characterization_gen</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globals_initialized">globals_initialized</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1375')">Proof.</div>
<div class="proofscript" id="proof1375">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals_initialized">alloc_globals_initialized</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_empty">Mem.nextblock_empty</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.init_mem_characterization">init_mem_characterization</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">b</span> <span class="id">gv</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">find_var_info</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#k">k</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) /\ <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.load_store_init_data">load_store_init_data</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>))<br/>
&nbsp;&nbsp;/\ (<span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> 0 (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">bytes_of_init_data_list</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#gv">gv</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1376')">Proof.</div>
<div class="proofscript" id="proof1376">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">init_mem_characterization_gen</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Compatibility with memory injections </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.GENV.INITMEM_INJ">INITMEM_INJ</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.INITMEM_INJ.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.INITMEM_INJ.thr">thr</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.GENV.INITMEM_INJ.symb_inject">symb_inject</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_zeros_neutral">store_zeros_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1377')">Proof.</div>
<div class="proofscript" id="proof1377">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHo</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_inject_neutral">Mem.store_inject_neutral</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_neutral">store_init_data_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">id</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1378')">Proof.</div>
<div class="proofscript" id="proof1378">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">id</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_inject_neutral">Mem.store_inject_neutral</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id">i</span>) <span class="kwd">as</span> [<span class="id">b</span>'|] <span class="id">eqn</span>:<span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_inject_neutral">Mem.store_inject_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_list_neutral">store_init_data_list_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">idl</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idl">idl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1379')">Proof.</div>
<div class="proofscript" id="proof1379">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">idl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHidl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_neutral">store_init_data_neutral</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.alloc_global_neutral">alloc_global_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">idg</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1380')">Proof.</div>
<div class="proofscript" id="proof1380">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">idg</span> <span class="kwd">as</span> [<span class="id">id</span> [<span class="id">f</span>|<span class="id">v</span>]]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 1) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span>). <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heqp</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_inject_neutral">Mem.drop_inject_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_inject_neutral">Mem.alloc_inject_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">init</span> := <span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">init</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">init</span>) <span class="kwd">as</span> [<span class="id">m3</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span>). <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heqp</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_inject_neutral">Mem.drop_inject_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_neutral">store_init_data_list_neutral</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m2</span>) (<span class="id">b</span> := <span class="id">b</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_neutral">store_zeros_neutral</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_inject_neutral">Mem.alloc_inject_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Genv.advance_next_le">advance_next_le</a></span>: <span class="kwd">forall</span> <span class="id">gl</span> <span class="id">x</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#x">x</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.advance_next">advance_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1381')">Proof.</div>
<div class="proofscript" id="proof1381">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> <span class="id">x</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_succ">Ple_succ</a></span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.alloc_globals_neutral">alloc_globals_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">alloc_globals</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gl">gl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">Mem.inject_neutral</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1382')">Proof.</div>
<div class="proofscript" id="proof1382">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">gl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals_nextblock">alloc_globals_nextblock</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ.ge">ge</a></span> <span class="id">m</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_neutral">alloc_global_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>')).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.advance_next_le">advance_next_le</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span>, <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="kwd">in</span> *; <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INJ">INITMEM_INJ</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.initmem_inject">initmem_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>)) <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1383')">Proof.</div>
<div class="proofscript" id="proof1383">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.neutral_inject">Mem.neutral_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals_neutral">alloc_globals_neutral</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">find_symbol_not_fresh</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty_inject_neutral">Mem.empty_inject_neutral</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
Qed.</div>
<br/>
<h2> Sufficient and necessary conditions for the initial memory to exist. </h2>
<br/>
<div class="doc">Alignment properties </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Genv.init_data_alignment">init_data_alignment</a></span> (<span class="id">i</span>: <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span> =&gt; 1<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span> =&gt; 2<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span> =&gt; 4<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span> =&gt; 8<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float32">Init_float32</a></span> <span class="id">n</span> =&gt; 4<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_float64">Init_float64</a></span> <span class="id">n</span> =&gt; 4<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">symb</span> <span class="id">ofs</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> 8 <span class="kwd">else</span> 4<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">n</span> =&gt; 1<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Genv.init_data_list_aligned">init_data_list_aligned</a></span> (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) {<span class="kwd">struct</span> <span class="id">il</span>} : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id">i1</span> :: <span class="id">il</span> =&gt; (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span> <span class="id">i1</span> | <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) /\ <span class="id"><a href="compcert.common.Globalenvs.html#init_data_list_aligned">init_data_list_aligned</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">i1</span>) <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.GENV.INITMEM_INVERSION">INITMEM_INVERSION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.INITMEM_INVERSION.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_aligned">store_init_data_aligned</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> | <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1384')">Proof.</div>
<div class="proofscript" id="proof1384">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DFL</span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span> <span class="id">i</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span> <span class="id">i</span> | <span class="id">p</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id">i</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">eapply</span> <span class="id">DFL</span>. <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_list_aligned">store_init_data_list_aligned</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">il</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_list_aligned">init_data_list_aligned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1385')">Proof.</div>
<div class="proofscript" id="proof1385">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span> <span class="kwd">as</span> [ | <span class="id">i1</span> <span class="id">il</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i1</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">S1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_aligned">store_init_data_aligned</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_list_free_idents">store_init_data_list_free_idents</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">i</span> <span class="id">o</span> <span class="id">il</span> <span class="id">m</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#o">o</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1386')">Proof.</div>
<div class="proofscript" id="proof1386">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span> <span class="kwd">as</span> [ | <span class="id">i1</span> <span class="id">il</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">contradiction</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i1</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">S1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
+ <span class="tactic">subst</span> <span class="id">i1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">S1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION.ge">ge</a></span> <span class="id">i</span>) <span class="kwd">as</span> [<span class="id">b</span>'|]. <span class="id">exists</span> <span class="id">b</span>'; <span class="tactic">auto</span>. <span class="tactic">discriminate</span>.<br/>
+ <span class="tactic">eapply</span> <span class="id">IHil</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_INVERSION">INITMEM_INVERSION</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.init_mem_inversion">init_mem_inversion</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">m</span> <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_list_aligned">init_data_list_aligned</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">i</span> <span class="id">o</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#o">o</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1387')">Proof.</div>
<div class="proofscript" id="proof1387">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">v</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span>. <span class="tactic">set</span> (<span class="id">ge</span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">m</span>. <span class="tactic">generalize</span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | <span class="id">idg1</span> <span class="id">defs</span> ]; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">m</span> <span class="id">m</span>'; <span class="tactic">intros</span>.<br/>
- <span class="id">contradiction</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id">ge</span> <span class="id">m</span> <span class="id">idg1</span>) <span class="kwd">as</span> [<span class="id">m</span>''|] <span class="id">eqn</span>:<span class="id">A</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
+ <span class="tactic">subst</span> <span class="id">idg1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">il</span> := <span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="kwd">in</span> *. <span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">il</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span>|]; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id">ge</span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">il</span>) <span class="kwd">as</span> [<span class="id">m3</span>|] <span class="id">eqn</span>:<span class="id">B</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_aligned">store_init_data_list_aligned</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_free_idents">store_init_data_list_free_idents</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">eapply</span> <span class="id">IHdefs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.GENV.INITMEM_EXISTS">INITMEM_EXISTS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.GENV.INITMEM_EXISTS.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_zeros_exists">store_zeros_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1388')">Proof.</div>
<div class="proofscript" id="proof1388">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>); <span class="tactic">intros</span> <span class="id">PERM</span>.<br/>
- <span class="id">exists</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id">IHo</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">Mem.perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">PERM</span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_store">Mem.valid_access_store</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">b</span> <span class="id">p</span> <span class="id"><a href="compcert.common.Values.html#Vzero">Vzero</a></span>) <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">STORE</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">apply</span> <span class="id">PERM</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_exists">store_init_data_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> | <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1389')">Proof.</div>
<div class="proofscript" id="proof1389">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DFL</span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">i</span> = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span> <span class="id">i</span> = <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#chunk">chunk</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>').<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_store">Mem.valid_access_store</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">p</span> <span class="id">v</span>) <span class="kwd">as</span> (<span class="id">m</span>' &amp; <span class="id">STORE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">exists</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b1</span> &amp; <span class="id">FS</span>). <span class="tactic">rewrite</span> <span class="id">FS</span>. <span class="tactic">eapply</span> <span class="id">DFL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span>, <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_alignment">init_data_alignment</a></span>, <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.store_init_data_list_exists">store_init_data_list_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">il</span> <span class="id">m</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> + <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_list_aligned">init_data_list_aligned</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#il">il</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1390')">Proof.</div>
<div class="proofscript" id="proof1390">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span> <span class="kwd">as</span> [ | <span class="id">i1</span> <span class="id">il</span> ]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_exists">store_init_data_exists</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">i1</span>) <span class="kwd">as</span> (<span class="id">m1</span> &amp; <span class="id">S1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size_pos">init_data_list_size_pos</a></span> <span class="id">il</span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">S1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHil</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_perm">store_init_data_perm</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#init_data_size_pos">init_data_size_pos</a></span> <span class="id">i1</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.alloc_global_exists">alloc_global_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">idg</span>,<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>, <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">f</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>, <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_list_aligned">init_data_list_aligned</a></span> 0 <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">i</span> <span class="id">o</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#o">o</a></span>) <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS.ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#idg">idg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1391')">Proof.</div>
<div class="proofscript" id="proof1391">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m</span> [<span class="id">id</span> [<span class="id">f</span>|<span class="id">v</span>]]; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 1) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:<span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_2">Mem.range_perm_drop_2</a></span> <span class="id">m1</span> <span class="id">b</span> 0 1 <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>) <span class="kwd">as</span> [<span class="id">m2</span> <span class="id">DROP</span>].<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">P</span> <span class="id">Q</span>].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sz</span> := <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">b</span>] <span class="id">eqn</span>:<span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P1</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) <span class="tactic">by</span> (<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_exists">store_zeros_exists</a></span> <span class="id">m1</span> <span class="id">b</span> 0 <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">m2</span> <span class="id">ZEROS</span>].<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">ZEROS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">sz</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_zeros_perm">store_zeros_perm</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_exists">store_init_data_list_exists</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>) <span class="id">m2</span> 0) <span class="kwd">as</span> [<span class="id">m3</span> <span class="id">STORE</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P3</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m3</span> <span class="id">b</span> 0 <span class="id">sz</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list_perm">store_init_data_list_perm</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_2">Mem.range_perm_drop_2</a></span> <span class="id">m3</span> <span class="id">b</span> 0 <span class="id">sz</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">perm_globvar</a></span> <span class="id">v</span>)) <span class="kwd">as</span> [<span class="id">m4</span> <span class="id">DROP</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m4</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV.INITMEM_EXISTS">INITMEM_EXISTS</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.init_mem_exists">init_mem_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>, <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>) (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_data_list_aligned">init_data_list_aligned</a></span> 0 <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">forall</span> <span class="id">i</span> <span class="id">o</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#o">o</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1392')">Proof.</div>
<div class="proofscript" id="proof1392">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">set</span> (<span class="id">ge</span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symboltbl">symboltbl</a></span> <span class="id">p</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">init_mem</a></span>. <span class="id">revert</span> <span class="id">H</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | <span class="id">idg</span> <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_exists">alloc_global_exists</a></span> <span class="id">ge</span> <span class="id">m</span> <span class="id">idg</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">A1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">idg</span> <span class="kwd">as</span> [<span class="id">id</span> [<span class="id">f</span>|<span class="id">v</span>]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id">ge</span>. <span class="tactic">rewrite</span> <span class="id">A1</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.GENV">GENV</a></span>.<br/>
<br/>
<h1> Commutation with program transformations </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.MATCH_GENVS">MATCH_GENVS</a></span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Genv.match_stbls">match_stbls</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">ge1</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) (<span class="id">ge2</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_public">mge_public</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_dom">mge_dom</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b2</span>, <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, 0); <br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_img">mge_img</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_symb">mge_symb</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> &lt;-&gt; (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_info">mge_info</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_separated">mge_separated</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> &lt;-&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>;<br/>
}.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Genv.match_genvs">match_genvs</a></span> {<span class="id">A</span> <span class="id">B</span> <span class="id">V</span> <span class="id">W</span>} (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) <span class="id">R</span> (<span class="id">ge1</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#A">A</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#V">V</a></span>) (<span class="id">ge2</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">t</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#B">B</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#W">W</a></span>) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_stbls">mge_stbls</a></span> :&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Genv.mge_defs">mge_defs</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#R">R</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs">genv_defs</a></span>)!<span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs">genv_defs</a></span>)!<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>;<br/>
}.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.match_stbls_id">match_stbls_id</a></span> <span class="id">ge</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1393')">Proof.</div>
<div class="proofscript" id="proof1393">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> 1. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> 1. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> 1. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> 1. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.match_stbls_compose">match_stbls_compose</a></span> <span class="id">f</span> <span class="id">g</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">ge3</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge3">ge3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge3">ge3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1394')">Proof.</div>
<div class="proofscript" id="proof1394">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H12</span> <span class="id">H23</span>. <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">erewrite</span> !<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_public">mge_public</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">edestruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="id">H12</span>) <span class="kwd">as</span> (<span class="id">b2</span> &amp; <span class="id">Hb12</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b2</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id">ge2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span> <span class="id">H12</span> <span class="id">_</span> <span class="id">Hb12</span>). <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="id">H23</span>) <span class="kwd">as</span> (<span class="id">b3</span> &amp; <span class="id">Hb23</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">Hb12</span>, <span class="id">Hb23</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rename</span> <span class="id">b2</span> <span class="id">into</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta12</span>] | ] <span class="id">eqn</span>:<span class="id">Hb12</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">g</span> <span class="id">b2</span>) <span class="kwd">as</span> [[<span class="id">xb3</span> <span class="id">delta23</span>] | ] <span class="id">eqn</span>:<span class="id">Hb23</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span> <span class="kwd">in</span> <span class="id">Hb12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span> <span class="kwd">in</span> <span class="id">Hb23</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rename</span> <span class="id">b2</span> <span class="id">into</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta12</span>] | ] <span class="id">eqn</span>:<span class="id">Hb12</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">g</span> <span class="id">b2</span>) <span class="kwd">as</span> [[<span class="id">xb3</span> <span class="id">delta23</span>] | ] <span class="id">eqn</span>:<span class="id">Hb23</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="kwd">in</span> <span class="id">Hb12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="kwd">in</span> <span class="id">Hb23</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rename</span> <span class="id">b2</span> <span class="id">into</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta12</span>] | ] <span class="id">eqn</span>:<span class="id">Hb12</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">g</span> <span class="id">b2</span>) <span class="kwd">as</span> [[<span class="id">xb3</span> <span class="id">delta23</span>] | ] <span class="id">eqn</span>:<span class="id">Hb23</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_info">mge_info</a></span> <span class="kwd">in</span> <span class="id">Hb12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_info">mge_info</a></span> <span class="kwd">in</span> <span class="id">Hb23</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rename</span> <span class="id">b2</span> <span class="id">into</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta12</span>] | ] <span class="id">eqn</span>:<span class="id">Hb12</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">g</span> <span class="id">b2</span>) <span class="kwd">as</span> [[<span class="id">xb3</span> <span class="id">delta23</span>] | ] <span class="id">eqn</span>:<span class="id">Hb23</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span> <span class="kwd">in</span> <span class="id">Hb12</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span> <span class="kwd">in</span> <span class="id">Hb23</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Context</span> {<span class="id">f</span> <span class="id">se</span> <span class="id">tse</span>} (<span class="id">Hse</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tse">tse</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.match_stbls_incr">match_stbls_incr</a></span> <span class="id">f</span>':<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1395')">Proof.</div>
<div class="proofscript" id="proof1395">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hf</span>' <span class="id">SEP</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_public">mge_public</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="kwd">as</span> (<span class="id">b2</span> &amp; <span class="id">Hb2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">Hf</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb</span>) <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.Hse">Hse</a></span> <span class="id">b1</span> <span class="id">Hb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">SEP</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">Hb1</span>. <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="kwd">as</span> (<span class="id">b2</span>' &amp; <span class="id">Hb2</span>'); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">Hf</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb2</span>') <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">Hb2</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> (<span class="id">Hf</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb</span>) <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">edestruct</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span> <span class="kwd">in</span> <span class="id">Hb2</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">Hf</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb</span>) <span class="kwd">in</span> <span class="id">Hb</span>'. <span class="id">inv</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_info">mge_info</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">edestruct</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span>) ! <span class="id">b1</span> <span class="id">eqn</span>:<span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info_range">genv_info_range</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info">genv_info</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span>) ! <span class="id">b2</span> <span class="id">eqn</span>:<span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_info_range">genv_info_range</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">Hf</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb</span>) <span class="kwd">in</span> <span class="id">Hb</span>'. <span class="id">inv</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_separated">mge_separated</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">edestruct</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_symbol_match">find_symbol_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tb</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>, 0) /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1396')">Proof.</div>
<div class="proofscript" id="proof1396">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>. <span class="tactic">intros</span> <span class="id">id</span> <span class="id">b</span> <span class="id">Hb</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="kwd">as</span> (<span class="id">tb</span> &amp; <span class="id">Htb</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span>. <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="kwd">in</span> <span class="id">Hb</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.valid_for_match">valid_for_match</a></span> <span class="id">sk</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.valid_for">valid_for</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#sk">sk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.valid_for">valid_for</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#sk">sk</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1397')">Proof.</div>
<div class="proofscript" id="proof1397">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">id</span> <span class="id">g</span> <span class="id">Hg</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">b1</span> &amp; <span class="id">g</span>' &amp; <span class="id">Hb1</span> &amp; <span class="id">Hg</span>' &amp; <span class="id">Hgg</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="kwd">as</span> (<span class="id">b2</span> &amp; <span class="id">Hb</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_info">find_info</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">find_symbol</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_info">mge_info</a></span> <span class="kwd">in</span> <span class="id">Hg</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="kwd">in</span> <span class="id">Hb1</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span> <span class="id">B</span> <span class="id">V</span> <span class="id">W</span>: <span class="kwd">Type</span>} (<span class="id">R</span>: <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#A">A</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#V">V</a></span> -&gt; <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#B">B</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#W">W</a></span> -&gt; <span class="kwd">Prop</span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_def_match_genvs">find_def_match_genvs</a></span> <span class="id">ge</span> <span class="id">tge</span>:<br/>
&nbsp;&nbsp;@<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">match_genvs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.A">A</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.B">B</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.V">V</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.W">W</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.R">R</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tge">tge</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">tb</span> <span class="id">delta</span> <span class="id">g</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tg</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tge">tge</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tg">tg</a></span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.R">R</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tg">tg</a></span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span> = 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1398')">Proof.</div>
<div class="proofscript" id="proof1398">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span> <span class="id">ge</span>)) <span class="tactic">by</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_stbls">mge_stbls</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_defs">mge_defs</a></span> <span class="id">H</span> <span class="id">b</span> <span class="id">H1</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">y</span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.add_globdef_match">add_globdef_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">defs1</span> <span class="id">defs2</span> <span class="id">id</span> <span class="id">gd1</span> <span class="id">gd2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.R">R</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#defs1">defs1</a></span> ! <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#defs2">defs2</a></span> ! <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.R">R</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd1">gd1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd2">gd2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.R">R</a></span> ((<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef">add_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#defs1">defs1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd1">gd1</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#b1">b1</a></span>) ((<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef">add_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#defs2">defs2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#id">id</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#gd2">gd2</a></span>) ! <span class="id"><a href="compcert.common.Globalenvs.html#b2">b2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1399')">Proof.</div>
<div class="proofscript" id="proof1399">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">gd2</span>. <span class="tactic">intros</span> <span class="id">Hb</span> <span class="id">Hdefs</span> <span class="id">Hgd</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef">add_globdef</a></span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.se">se</a></span>) ! <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b1</span>' | ] <span class="id">eqn</span>:<span class="id">Hb1</span>'.<br/>
&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span> <span class="kwd">as</span> (<span class="id">b2</span>' &amp; <span class="id">Hb</span>'); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hb1</span>' <span class="kwd">as</span> <span class="id">Hb2</span>'. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="kwd">in</span> <span class="id">Hb2</span>' <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Hb2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b1</span>' <span class="id">b1</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">b2</span>' = <span class="id">b2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">b2</span>' &lt;&gt; <span class="id">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="id">erewrite</span> &lt;- (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.Hse">Hse</a></span> <span class="id">b1</span>) <span class="kwd">in</span> <span class="id">Hb2</span>' <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb">genv_symb</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS.tse">tse</a></span>) ! <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b2</span>' | ] <span class="id">eqn</span>:<span class="id">Hb2</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b2</span>' <span class="id">b2</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_symb">mge_symb</a></span> <span class="kwd">in</span> <span class="id">Hb2</span>' <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_GENVS">MATCH_GENVS</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.MATCH_PROGRAMS">MATCH_PROGRAMS</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">C</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span>: <span class="kwd">Type</span>} {<span class="id">LC</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#C">C</a></span>} {<span class="id">LF</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#F1">F1</a></span>} {<span class="id">LV</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#V1">V1</a></span>}.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.C">C</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F1">F1</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F2">F2</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.V1">V1</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.V2">V2</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.ctx">ctx</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.C">C</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.p">p</a></span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F1">F1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.V1">V1</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.tp">tp</a></span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F2">F2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.V2">V2</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.progmatch">progmatch</a></span>: <span class="id"><a href="compcert.common.Linking.html#match_program_gen">match_program_gen</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="Genv.match_idg">match_idg</a></span> := (<span class="id"><a href="compcert.common.Linking.html#match_ident_globdef">match_ident_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="Genv.match_gd">match_gd</a></span> := (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.INJECT">INJECT</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.INJECT.j">j</a></span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.INJECT.se">se</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.INJECT.sematch">sematch</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Genv.globalenvs_match">globalenvs_match</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">match_genvs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.j">j</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1400')">Proof.</div>
<div class="proofscript" id="proof1400">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hd</span>:<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_gd">match_gd</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>)!<span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>)!<span class="id"><a href="compcert.common.Globalenvs.html#i">i</a></span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list_related">PTree_Properties.of_list_related</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.progmatch">progmatch</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.fold_spec">PTree.fold_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">PTree.elements_canonical_order</span>' <span class="kwd">in</span> <span class="id">Hd</span>. <span class="id">revert</span> <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>), (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>). <span class="tactic">intros</span> <span class="id">d1</span> <span class="id">d2</span> <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_gd">match_gd</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>)!<span class="id">b1</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>)!<span class="id">b2</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F1">F1</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.V1">V1</a></span>)), (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F2">F2</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.V2">V2</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hd</span> <span class="kwd">as</span> [ | [<span class="id">id1</span> <span class="id">g1</span>] <span class="id">l1</span> [<span class="id">id2</span> <span class="id">g2</span>] <span class="id">l2</span> [<span class="id">Hi</span> <span class="id">Hg</span>] <span class="id">Hl</span> <span class="id">IH</span>]; <span class="id">cbn</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Ht</span>. <span class="tactic">eapply</span> <span class="id">IH</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globdef_match">add_globdef_match</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_def_match">find_def_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">tb</span> <span class="id">delta</span> <span class="id">g</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tg</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tg">tg</a></span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tg">tg</a></span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#delta">delta</a></span> = 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1401')">Proof.</div>
<div class="proofscript" id="proof1401">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_match_genvs">find_def_match_genvs</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenvs_match">globalenvs_match</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_match">find_funct_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cunit</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#cunit">cunit</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#cunit">cunit</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1402')">Proof.</div>
<div class="proofscript" id="proof1402">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_inv">find_funct_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">EQ</span>]. <span class="tactic">subst</span> <span class="id">v</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">find_funct_find_funct_ptr</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> <span class="kwd">as</span> [[|]|] <span class="id">eqn</span>:<span class="id">Hf</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_match">find_def_match</a></span> <span class="kwd">as</span> (<span class="id">tg</span> &amp; ? &amp; ? &amp; ?); <span class="tactic">eauto</span>. <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">find_funct_find_funct_ptr</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_none">find_funct_none</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1403')">Proof.</div>
<div class="proofscript" id="proof1403">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">Hf1</span> <span class="id">INJ</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">INJ</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">genv_next</a></span>)).<br/>
&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">mge_dom</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="id">revert</span> <span class="id">Hf1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_defs">mge_defs</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenvs_match">globalenvs_match</a></span> <span class="id">b1</span> <span class="id">H1</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">find_funct_ptr</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="kwd">as</span> [[|]|] <span class="id">eqn</span>:<span class="id">Hdef</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">genv_defs_range</a></span> <span class="kwd">in</span> <span class="id">Hdef</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_img">mge_img</a></span> <span class="kwd">in</span> <span class="id">Hdef</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.is_internal_match">is_internal_match</a></span> `{<span class="id">I1</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F1">F1</a></span>} `{<span class="id">I2</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F2">F2</a></span>}:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">c</span> <span class="id">f</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#c">c</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> = <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1404')">Proof.</div>
<div class="proofscript" id="proof1404">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hmatch</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">INJ</span> <span class="id">DEF</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> <span class="id">_</span> <span class="id">v</span>) <span class="id">eqn</span>:<span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">find_funct_match</a></span> <span class="kwd">as</span> (<span class="id">c</span> &amp; <span class="id">tf</span> &amp; <span class="id">Htf</span> &amp; ? &amp; ?); <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Htf</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_none">find_funct_none</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.INJECT">INJECT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.ID">ID</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.MATCH_PROGRAMS.ID.se">se</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_def_match_id">find_def_match_id</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">g</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tg</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tg">tg</a></span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#g">g</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tg">tg</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1405')">Proof.</div>
<div class="proofscript" id="proof1405">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_match">find_def_match</a></span> <span class="kwd">as</span> (? &amp; ? &amp; ? &amp; ?); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_match_id">find_funct_match_id</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cunit</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#cunit">cunit</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#cunit">cunit</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ctx">ctx</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1406')">Proof.</div>
<div class="proofscript" id="proof1406">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">find_funct_match</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.is_internal_match_id">is_internal_match_id</a></span> `{<span class="id">I1</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F1">F1</a></span>} `{<span class="id">I2</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.F2">F2</a></span>}:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">c</span> <span class="id">f</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#c">c</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> = <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1407')">Proof.</div>
<div class="proofscript" id="proof1407">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal_match">is_internal_match</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS.ID">ID</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.MATCH_PROGRAMS">MATCH_PROGRAMS</a></span>.<br/>
<br/>
<div class="doc">Special case for partial transformations that do not depend on the compilation unit </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.TRANSFORM_PARTIAL">TRANSFORM_PARTIAL</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span> <span class="id">B</span> <span class="id">V</span>: <span class="kwd">Type</span>} {<span class="id">LA</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#A">A</a></span>} {<span class="id">LV</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#V">V</a></span>}.<br/>
<span class="kwd">Context</span> {<span class="id">transf</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.B">B</a></span>} {<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.A">A</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.V">V</a></span>} {<span class="id">tp</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.B">B</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.V">V</a></span>}.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.TRANSFORM_PARTIAL.progmatch">progmatch</a></span>: <span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tp">tp</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.TRANSFORM_PARTIAL.j">j</a></span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.TRANSFORM_PARTIAL.se">se</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Genv.TRANSFORM_PARTIAL.tse">tse</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.TRANSFORM_PARTIAL.sematch">sematch</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tse">tse</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_transf_partial">find_funct_transf_partial</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">fd</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfd</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tfd">tfd</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tfd">tfd</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1408')">Proof.</div>
<div class="proofscript" id="proof1408">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> @<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">find_funct_match</a></span> <span class="kwd">as</span> (<span class="id">cu</span> &amp; <span class="id">tf</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_symbol_transf_partial">find_symbol_transf_partial</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span> : <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#s">s</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tb</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>, 0) /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#s">s</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1409')">Proof.</div>
<div class="proofscript" id="proof1409">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> @<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match">find_symbol_match</a></span> <span class="kwd">as</span> (<span class="id">tb</span> &amp; <span class="id">Htb</span> &amp; <span class="id">H</span>'); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_transf_partial_id">find_funct_transf_partial_id</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1410')">Proof.</div>
<div class="proofscript" id="proof1410">
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">tse</span> <span class="id">sematch</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id">v</span> <span class="id">v</span>) <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> @<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">find_funct_match</a></span> <span class="kwd">as</span> (<span class="id">cu</span> &amp; <span class="id">tf</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.is_internal_transf_partial">is_internal_transf_partial</a></span> `{<span class="id">I1</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.A">A</a></span>} `{<span class="id">I2</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.B">B</a></span>}:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> = <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.j">j</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1411')">Proof.</div>
<div class="proofscript" id="proof1411">
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal_match">is_internal_match</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.progmatch">progmatch</a></span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.is_internal_transf_partial_id">is_internal_transf_partial_id</a></span> `{<span class="id">I1</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.A">A</a></span>} `{<span class="id">I2</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.B">B</a></span>}:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> = <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1412')">Proof.</div>
<div class="proofscript" id="proof1412">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal_match">is_internal_match</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL.progmatch">progmatch</a></span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_PARTIAL">TRANSFORM_PARTIAL</a></span>.<br/>
<br/>
<div class="doc">Special case for total transformations that do not depend on the compilation unit </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Genv.TRANSFORM_TOTAL">TRANSFORM_TOTAL</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span> <span class="id">B</span> <span class="id">V</span>: <span class="kwd">Type</span>} {<span class="id">LA</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#A">A</a></span>} {<span class="id">LV</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#V">V</a></span>}.<br/>
<span class="kwd">Context</span> {<span class="id">transf</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.B">B</a></span>} {<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.A">A</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.V">V</a></span>} {<span class="id">tp</span>: <span class="id"><a href="compcert.common.AST.html#program">program</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.B">B</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.V">V</a></span>}.<br/>
<span class="kwd">Context</span> {<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>} {<span class="id">se</span> <span class="id">tse</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">symtbl</a></span>}.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.TRANSFORM_TOTAL.progmatch">progmatch</a></span>: <span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#tf">tf</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.p">p</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tp">tp</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Genv.TRANSFORM_TOTAL.sematch">sematch</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tse">tse</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_transf">find_funct_transf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">fd</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1413')">Proof.</div>
<div class="proofscript" id="proof1413">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> @<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">find_funct_match</a></span> <span class="kwd">as</span> (<span class="id">cu</span> &amp; <span class="id">tf</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_symbol_transf">find_symbol_transf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span> : <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#s">s</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tb</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>, 0) /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#s">s</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tb">tb</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1414')">Proof.</div>
<div class="proofscript" id="proof1414">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> @<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match">find_symbol_match</a></span> <span class="kwd">as</span> (<span class="id">tb</span> &amp; <span class="id">Htb</span> &amp; <span class="id">H</span>'); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.find_funct_transf_id">find_funct_transf_id</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1415')">Proof.</div>
<div class="proofscript" id="proof1415">
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">tse</span> <span class="id">sematch</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id">v</span> <span class="id">v</span>) <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> @<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">find_funct_match</a></span> <span class="kwd">as</span> (<span class="id">cu</span> &amp; <span class="id">tf</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.is_internal_transf">is_internal_transf</a></span> `{<span class="id">I1</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.A">A</a></span>} `{<span class="id">I2</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.B">B</a></span>}:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">fd</span>, <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span>) = <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">tv</span>, <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.f">f</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tse">tse</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#tv">tv</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1416')">Proof.</div>
<div class="proofscript" id="proof1416">
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal_match">is_internal_match</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.progmatch">progmatch</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Genv.is_internal_transf_id">is_internal_transf_id</a></span> `{<span class="id">I1</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.A">A</a></span>} `{<span class="id">I2</span>: <span class="id"><a href="compcert.common.AST.html#FundefIsInternal">FundefIsInternal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.B">B</a></span>}:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">fd</span>, <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.transf">transf</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span>) = <span class="id"><a href="compcert.common.AST.html#fundef_is_internal">fundef_is_internal</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#fd">fd</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.tp">tp</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">is_internal</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.se">se</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.p">p</a></span>) <span class="id"><a href="compcert.common.Globalenvs.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1417')">Proof.</div>
<div class="proofscript" id="proof1417">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal_match">is_internal_match</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL.progmatch">progmatch</a></span>); <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_id">match_stbls_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.TRANSFORM_TOTAL">TRANSFORM_TOTAL</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv">Genv</a></span>.<br/>
<br/>
<span class="kwd">Coercion</span> <span class="id">Genv.to_senv</span> : <span class="id">Genv.t</span> &gt;-&gt; <span class="id">Genv.symtbl</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">Genv.mge_stbls</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
