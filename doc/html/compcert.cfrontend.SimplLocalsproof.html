
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module SimplLocalsproof</title>
<meta name="description" content="Documentation of Coq module SimplLocalsproof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module SimplLocalsproof</h1>
<div class="coq">
<br/>
<div class="doc">Semantic preservation for the SimplLocals pass. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Ordered.html">Ordered</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html">Cop</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html">Clight</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.LanguageInterface.html">LanguageInterface</a></span> <span class="id"><a href="compcert.cklr.CKLR.html">cklr.CKLR</a></span> <span class="id"><a href="compcert.cklr.Inject.html">cklr.Inject</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html">cklr.InjectFootprint</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="VSF">VSF</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetFacts.html#Facts">FSetFacts.Facts</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet">VSet</a></span>).<br/>
<span class="kwd">Module</span> <span class="id"><a name="VSP">VSP</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetProperties.html#Properties">FSetProperties.Properties</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet">VSet</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog">match_prog</a></span> (<span class="id">p</span> <span class="id">tp</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#program">program</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="kwd">fun</span> <span class="id">ctx</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#p">p</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tp">tp</a></span><br/>
&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Ctypes.html#prog_types">prog_types</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tp">tp</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#prog_types">prog_types</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_transf_program">match_transf_program</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>, <span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_program">transf_program</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#p">p</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tp">tp</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#p">p</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5063')">Proof.</div>
<div class="proofscript" id="proof5063">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_program">transf_program</a></span>; <span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Linking.html#match_transform_partial_program">match_transform_partial_program</a></span>. <span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION">PRESERVATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.prog">prog</a></span>: <span class="id"><a href="compcert.cfrontend.Clight.html#program">program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.tprog">tprog</a></span>: <span class="id"><a href="compcert.cfrontend.Clight.html#program">program</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.TRANSF">TRANSF</a></span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tprog">tprog</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.w">w</a></span>: <span class="id"><a href="compcert.cklr.CKLR.html#world">world</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.se">se</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">Genv.symtbl</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.tse">tse</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">Genv.symtbl</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.ge">ge</a></span> := <span class="id"><a href="compcert.cfrontend.Clight.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.se">se</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.tge">tge</a></span> := <span class="id"><a href="compcert.cfrontend.Clight.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.GE">GE</a></span>: <span class="id"><a href="compcert.cklr.CKLR.html#match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.w">w</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.se">se</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tse">tse</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="comp_env_preserved">comp_env_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#genv_cenv">genv_cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#genv_cenv">genv_cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5064')">Proof.</div>
<div class="proofscript" id="proof5064">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tge">tge</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.prog">prog</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tprog">tprog</a></span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.TRANSF">TRANSF</a></span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">EQ</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">EQ</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated">functions_translated</a></span> (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>):<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.se">se</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tse">tse</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">v</span> <span class="id">tv</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#fundef">fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tf">tf</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5065')">Proof.</div>
<div class="proofscript" id="proof5065">
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_transf_partial">Genv.find_funct_transf_partial</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.TRANSF">TRANSF</a></span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="type_of_fundef_preserved">type_of_fundef_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fd</span> <span class="id">tfd</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fd">fd</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tfd">tfd</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#type_of_fundef">type_of_fundef</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tfd">tfd</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#type_of_fundef">type_of_fundef</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fd">fd</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5066')">Proof.</div>
<div class="proofscript" id="proof5066">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">fd</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ</span>. <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Matching between environments before and after </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_var">match_var</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#env">env</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">te</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#env">env</a></span>) (<span class="id">tle</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#temp_env">temp_env</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_lifted">match_var_lifted</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ty</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">tv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LIFTED</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MAPPED</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MODE</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LOAD</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TLENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>!(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_not_lifted">match_var_not_lifted</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ty</span> <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LIFTED</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MAPPED</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', 0)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_not_local">match_var_not_local</a></span>: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LIFTED</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="match_envs">match_envs</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#env">env</a></span>) (<span class="id">le</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#temp_env">temp_env</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">te</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#env">env</a></span>) (<span class="id">tle</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#temp_env">temp_env</a></span>) (<span class="id">tlo</span> <span class="id">thi</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="mk_match_envs">mk_match_envs</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_vars">me_vars</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_temps">me_temps</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">tv</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_inj">me_inj</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id1</span> <span class="id">b1</span> <span class="id">ty1</span> <span class="id">id2</span> <span class="id">b2</span> <span class="id">ty2</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty1">ty1</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id2">id2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty2">ty2</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id2">id2</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_range">me_range</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_trange">me_trange</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_mapped">me_mapped</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', 0) /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_flat">me_flat</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>' <span class="id">ty</span> <span class="id">b</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span> = 0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_incr">me_incr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_tincr">me_tincr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<div class="doc">Invariance by change of memory and injection </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_invariant">match_envs_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">f</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id">b</span>' /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5067')">Proof.</div>
<div class="proofscript" id="proof5067">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">m</span>'; <span class="tactic">intros</span> <span class="id">ME</span> <span class="id">LD</span> <span class="id">INCR</span> <span class="id">INV1</span> <span class="id">INV2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ME</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id</span>); <span class="tactic">intros</span> <span class="id">MV</span>; <span class="id">inv</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">MAPPED</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_lifted">match_var_not_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_local">match_var_not_local</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;temps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">me_temps0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]] <span class="id">C</span>]. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">me_mapped0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">b</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;flat&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">me_flat0</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">INV2</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance by external call </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_extcall">match_envs_extcall</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">tm</span> <span class="id">f</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5068')">Proof.</div>
<div class="proofscript" id="proof5068">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_invariant">match_envs_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on">Mem.load_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>]|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>]|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">xomegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>']|] <span class="id">eqn</span>:?. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">xomegaContradiction</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of values resulting from a cast </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_load_result">val_casted_load_result</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5069')">Proof.</div>
<div class="proofscript" id="proof5069">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">v</span> <span class="id">ty</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">sz</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">si</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">si</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span> <span class="id">chunk</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>); <span class="tactic">subst</span> <span class="id">n</span>; <span class="tactic">reflexivity</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>. <br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_inject">val_casted_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">v</span> <span class="id">v</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id">v</span>' -&gt; <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id">v</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5070')">Proof.</div>
<div class="proofscript" id="proof5070">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forall2_val_casted_inject">forall2_val_casted_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">vl</span> <span class="id">vl</span>', <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> <span class="id">vl</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tyl</span>, <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tyl">tyl</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id">vl</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tyl">tyl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5071')">Proof.</div>
<div class="proofscript" id="proof5071">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">tyl</span> <span class="id">F</span>; <span class="id">inv</span> <span class="id">F</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#val_casted_inject">val_casted_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_list_params">val_casted_list_params</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">params</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#type_of_params">type_of_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5072')">Proof.</div>
<div class="proofscript" id="proof5072">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">params</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">ty</span>]. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correctness of <span class="bracket"><span class="id">make_cast</span></span> </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cast_correct">make_cast_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v1</span> <span class="id">tto</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#typeof">typeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tto">tto</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#make_cast">make_cast</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tto">tto</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5073')">Proof.</div>
<div class="proofscript" id="proof5073">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DFL</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Ecast">Ecast</a></span> <span class="id">a</span> <span class="id">tto</span>) <span class="id">v2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocals.html#make_cast">make_cast</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cop.html#classify_cast">classify_cast</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#typeof">typeof</a></span> <span class="id">a</span>) <span class="id">tto</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sz2</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">v1</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id1</span> <span class="id">id2</span>); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id1</span> <span class="id">id2</span>); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Debug annotations. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cast_typeconv">cast_typeconv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#typeconv">typeconv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5074')">Proof.</div>
<div class="proofscript" id="proof5074">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>, <span class="id"><a href="compcert.cfrontend.Cop.html#classify_cast">classify_cast</a></span>; <span class="tactic">destruct</span> <span class="id">sz</span>, <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>, <span class="id"><a href="compcert.cfrontend.Cop.html#classify_cast">classify_cast</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="step_Sdebug_temp">step_Sdebug_temp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sdebug_temp">Sdebug_temp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#Sskip">Sskip</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5075')">Proof.</div>
<div class="proofscript" id="proof5075">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sdebug_temp">Sdebug_temp</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_builtin">step_builtin</a></span> <span class="kwd">with</span> (<span class="id">optid</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cast_typeconv">cast_typeconv</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="step_Sdebug_var">step_Sdebug_var</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sdebug_var">Sdebug_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#Sskip">Sskip</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5076')">Proof.</div>
<div class="proofscript" id="proof5076">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sdebug_var">Sdebug_var</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_builtin">step_builtin</a></span> <span class="kwd">with</span> (<span class="id">optid</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">reflexivity</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="step_Sset_debug">step_Sset_debug</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">v</span> <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#typeof">typeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sset_debug">Sset_debug</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#Sskip">Sskip</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id">v</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5077')">Proof.</div>
<div class="proofscript" id="proof5077">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sset_debug">Sset_debug</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Sset">Sset</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#make_cast">make_cast</a></span> <span class="id">a</span> <span class="id">ty</span>)) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id">f</span> <span class="id"><a href="compcert.cfrontend.Clight.html#Sskip">Sskip</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id">e</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> <span class="id">v</span>' <span class="id">le</span>) <span class="id">m</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_set">step_set</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#make_cast_correct">make_cast_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_Sdebug_temp">step_Sdebug_temp</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id">v</span>').<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cop.html#cast_val_is_casted">cast_val_is_casted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">apply</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="step_add_debug_vars">step_add_debug_vars</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">s</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ty</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_vars">add_debug_vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5078')">Proof.</div>
<div class="proofscript" id="proof5078">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_vars">add_debug_vars</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
- <span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">TE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_Sdebug_var">step_Sdebug_var</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHvars</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="bind_parameter_temps_inv">bind_parameter_temps_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">params</span> <span class="id">args</span> <span class="id">le</span> <span class="id">le</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#bind_parameter_temps">bind_parameter_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#args">args</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">le</span>' -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">le</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5079')">Proof.</div>
<div class="proofscript" id="proof5079">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">params</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">ty1</span>]. <span class="tactic">destruct</span> <span class="id">args</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> ((<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id1</span> <span class="id">v</span> <span class="id">le</span>)!<span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHparams</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="step_add_debug_params">step_add_debug_params</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">params</span> <span class="id">vl</span> <span class="id">le1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#bind_parameter_temps">bind_parameter_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le1">le1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_params">add_debug_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5080')">Proof.</div>
<div class="proofscript" id="proof5080">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_params">add_debug_params</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
- <span class="tactic">induction</span> <span class="id">params</span> <span class="kwd">as</span> [ | [<span class="id">id</span> <span class="id">ty</span>] <span class="id">params</span> ]; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">le1</span>; <span class="tactic">intros</span> <span class="id">NR</span> <span class="id">CAST</span> <span class="id">BIND</span>; <span class="id">inv</span> <span class="id">CAST</span>; <span class="id">inv</span> <span class="id">NR</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">le</span>!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a1</span>). { <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bind_parameter_temps_inv">bind_parameter_temps_inv</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_Sdebug_temp">step_Sdebug_temp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHparams</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
- <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation by assignment to lifted variable. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_assign_lifted">match_envs_assign_lifted</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">b</span> <span class="id">ty</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">id</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc">assign_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5081')">Proof.</div>
<div class="proofscript" id="proof5081">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id</span>); <span class="tactic">intros</span> <span class="id">MV</span>; <span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">ENV</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id">v</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_same">Mem.load_store_same</a></span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#val_casted_load_result">val_casted_load_result</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id0</span>); <span class="tactic">intros</span> <span class="id">MV</span>; <span class="id">inv</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">LOAD0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_other">Mem.load_store_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_lifted">match_var_not_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_local">match_var_not_local</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;temps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">me_temps0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">tv1</span> [<span class="id">A</span> <span class="id">B</span>]] <span class="id">C</span>]. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id0</span>. <span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">C</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation by assignment to a temporary </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_set_temp">match_envs_set_temp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">id</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#check_temp">check_temp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5082')">Proof.</div>
<div class="proofscript" id="proof5082">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#check_temp">check_temp</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">cenv</span>) <span class="id">eqn</span>:?; <span class="id">monadInv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id0</span>); <span class="tactic">intros</span> <span class="id">MV</span>; <span class="id">inv</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_lifted">match_var_not_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_local">match_var_not_local</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;temps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">split</span>. <span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">me_temps0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_set_opttemp">match_envs_set_opttemp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">optid</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#check_opttemp">check_opttemp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#optid">optid</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#optid">optid</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#optid">optid</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5083')">Proof.</div>
<div class="proofscript" id="proof5083">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#set_opttemp">set_opttemp</a></span>. <span class="tactic">destruct</span> <span class="id">optid</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_set_temp">match_envs_set_temp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Extensionality with respect to temporaries </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_temps_exten">match_envs_temps_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">tle</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id">tle</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id">tle</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5084')">Proof.</div>
<div class="proofscript" id="proof5084">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id</span>); <span class="tactic">intros</span> <span class="id">MV</span>; <span class="id">inv</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_lifted">match_var_not_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_local">match_var_not_local</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;temps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance by assignment to an irrelevant temporary </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_envs_change_temp">match_envs_change_temp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5085')">Proof.</div>
<div class="proofscript" id="proof5085">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id0</span>); <span class="tactic">intros</span> <span class="id">MV</span>; <span class="id">inv</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_lifted">match_var_not_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_local">match_var_not_local</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;temps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of <span class="bracket"><span class="id">cenv_for</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_for_gen">cenv_for_gen</a></span> (<span class="id">atk</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.t">VSet.t</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>)) : <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_local_variable">add_local_variable</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="add_local_variable_charact">add_local_variable_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">atk</span> <span class="id">cenv</span> <span class="id">id1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_local_variable">add_local_variable</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span>) &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> \/ <span class="id">exists</span> <span class="id">chunk</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5086')">Proof.</div>
<div class="proofscript" id="proof5086">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_local_variable">add_local_variable</a></span>. <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id">ty</span>) <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">atk</span>) <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#add_iff">VSF.add_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">right</span>; <span class="id">exists</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">chunk</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id">ty</span>); <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">atk</span>); <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#add_iff">VSF.add_iff</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id">C</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.add_1">VSet.add_1</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cenv_for_gen_domain">cenv_for_gen_domain</a></span>:<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">atk</span> <span class="id">id</span> <span class="id">vars</span>, <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen">cenv_for_gen</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5087')">Proof.</div>
<div class="proofscript" id="proof5087">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#empty_iff">VSF.empty_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">ty1</span>]. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#add_local_variable_charact">add_local_variable_charact</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">chunk</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cenv_for_gen_by_value">cenv_for_gen_by_value</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">atk</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen">cenv_for_gen</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">chunk</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5088')">Proof.</div>
<div class="proofscript" id="proof5088">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">ty1</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#add_local_variable_charact">add_local_variable_charact</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">chunk</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">elim</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen_domain">cenv_for_gen_domain</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id">chunk</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id1</span>. <span class="tactic">elim</span> <span class="id">H4</span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">ty</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cenv_for_gen_compat">cenv_for_gen_compat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">atk</span> <span class="id">id</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen">cenv_for_gen</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5089')">Proof.</div>
<div class="proofscript" id="proof5089">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#empty_iff">VSF.empty_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">ty1</span>]. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#add_local_variable_charact">add_local_variable_charact</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">chunk</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Compatibility between a compilation environment and an address-taken set. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="compat_cenv">compat_cenv</a></span> (<span class="id">atk</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.t">VSet.t</a></span>) (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk">atk</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.In">VSet.In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compat_cenv_for">compat_cenv_for</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>.(<span class="id"><a href="compcert.cfrontend.Clight.html#fn_body">fn_body</a></span>)) (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5090')">Proof.</div>
<div class="proofscript" id="proof5090">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_body">fn_body</a></span> <span class="id">f</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen_compat">cenv_for_gen_compat</a></span>. <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#mem_iff">VSF.mem_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compat_cenv_union_l">compat_cenv_union_l</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">atk1</span> <span class="id">atk2</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.union">VSet.union</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk1">atk1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk2">atk2</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk1">atk1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5091')">Proof.</div>
<div class="proofscript" id="proof5091">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.union_2">VSet.union_2</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compat_cenv_union_r">compat_cenv_union_r</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">atk1</span> <span class="id">atk2</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.union">VSet.union</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk1">atk1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk2">atk2</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#atk2">atk2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5092')">Proof.</div>
<div class="proofscript" id="proof5092">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.union_3">VSet.union_3</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compat_cenv_empty">compat_cenv_empty</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5093')">Proof.</div>
<div class="proofscript" id="proof5093">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty_1">VSet.empty_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">compat_cenv_union_l</span> <span class="id">compat_cenv_union_r</span> <span class="id">compat_cenv_empty</span>: <span class="id">compat</span>.<br/>
<br/>
<div class="doc">Allocation and initialization of parameters </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_variables_nextblock">alloc_variables_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id">e</span>' <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5094')">Proof.</div>
<div class="proofscript" id="proof5094">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_succ">Ple_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_variables_range">alloc_variables_range</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id">e</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">e</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) \/ <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5095')">Proof.</div>
<div class="proofscript" id="proof5095">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHalloc_variables</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id0</span>). <span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_nextblock">alloc_variables_nextblock</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id">B</span> <span class="kwd">in</span> <span class="id">A</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_variables_injective">alloc_variables_injective</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">id1</span> <span class="id">b1</span> <span class="id">ty1</span> <span class="id">id2</span> <span class="id">b2</span> <span class="id">ty2</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id">e</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty1">ty1</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id2">id2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty2">ty2</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id2">id2</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">e</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty1">ty1</a></span>) -&gt; <span class="id">e</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id2">id2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty2">ty2</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id2">id2</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5096')">Proof.</div>
<div class="proofscript" id="proof5096">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHalloc_variables</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id1</span> <span class="id">id</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id2</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H7</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_alloc_variables">match_alloc_variables</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id">e</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">tm</span> <span class="id">te</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>', <span class="id">exists</span> <span class="id">te</span>', <span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#remove_lifted">remove_lifted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) <span class="id">te</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">j</span>' <span class="id">m</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id">j</span>'<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> <span class="id">b</span>' -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; ~<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id">exists</span> <span class="id">ty</span>, <span class="id">e</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) /\ <span class="id">te</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span> = 0)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ty</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">e</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="kwd">if</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">te</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> /\ <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">exists</span> <span class="id">tb</span>, <span class="id">te</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tb">tb</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) /\ <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tb">tb</a></span>, 0))<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">id</span>, ~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt; <span class="id">e</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> /\ <span class="id">te</span>'!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5097')">Proof.</div>
<div class="proofscript" id="proof5097">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>; <span class="id">exists</span> <span class="id">te</span>; <span class="id">exists</span> <span class="id">tm</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.  <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_mappedblocks">Mem.mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">tauto</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">cenv</span>) <span class="id">eqn</span>:?. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;variable&nbsp;is&nbsp;lifted&nbsp;out&nbsp;of&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_unmapped_inject">Mem.alloc_left_unmapped_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j1</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHalloc_variables</span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">te</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j</span>' [<span class="id">te</span>' [<span class="id">tm</span>' [<span class="id">J</span> [<span class="id">K</span> [<span class="id">L</span> [<span class="id">M</span> [<span class="id">N</span> [<span class="id">Q</span> [<span class="id">O</span> <span class="id">P</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>'; <span class="id">exists</span> <span class="id">te</span>'; <span class="id">exists</span> <span class="id">tm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">j1</span> <span class="id">b</span>). <span class="tactic">apply</span> <span class="id">M</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">D</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">j1</span> <span class="id">b</span>). <span class="tactic">eapply</span> <span class="id">N</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">j</span>' <span class="id">b1</span> = <span class="id">j1</span> <span class="id">b1</span>). <span class="tactic">apply</span> <span class="id">M</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">exact</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;same&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ty0</span> = <span class="id">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>. <span class="tactic">elim</span> <span class="id">H5</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">ty0</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">ty0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">P</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">Y</span>]. <span class="tactic">rewrite</span> <span class="id">Heqb</span>. <span class="tactic">rewrite</span> <span class="id">X</span>. <span class="tactic">rewrite</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b1</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">M</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;other&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">O</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id">P</span> <span class="id">id0</span>). <span class="tactic">tauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">Y</span>]. <span class="tactic">rewrite</span> <span class="id">X</span>; <span class="tactic">rewrite</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">intuition</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;variable&nbsp;is&nbsp;not&nbsp;lifted&nbsp;out&nbsp;of&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j1</span> [<span class="id">tm1</span> [<span class="id">tb1</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> <span class="id">E</span>]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHalloc_variables</span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> (<span class="id">tb1</span>, <span class="id">ty</span>) <span class="id">te</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j</span>' [<span class="id">te</span>' [<span class="id">tm</span>' [<span class="id">J</span> [<span class="id">K</span> [<span class="id">L</span> [<span class="id">M</span> [<span class="id">N</span> [<span class="id">Q</span> [<span class="id">O</span> <span class="id">P</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>'; <span class="id">exists</span> <span class="id">te</span>'; <span class="id">exists</span> <span class="id">tm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">j1</span> <span class="id">b</span>). <span class="tactic">apply</span> <span class="id">M</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">E</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">j1</span> <span class="id">b</span>). <span class="tactic">eapply</span> <span class="id">N</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">j</span>' <span class="id">b1</span> = <span class="id">j1</span> <span class="id">b1</span>). <span class="tactic">apply</span> <span class="id">M</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">D</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id">tb1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>'. <span class="tactic">rewrite</span> (<span class="id">N</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id">D</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">P</span> <span class="id">id</span>); <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">Y</span>]. <span class="id">exists</span> <span class="id">id</span>; <span class="id">exists</span> <span class="id">ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">X</span>; <span class="tactic">rewrite</span> <span class="id">Y</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">elim</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_mappedblocks">Mem.mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Q</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>. <span class="id">eexact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;same&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ty0</span> = <span class="id">ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>. <span class="tactic">elim</span> <span class="id">H5</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">ty0</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">ty0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">P</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">Y</span>]. <span class="tactic">rewrite</span> <span class="id">Heqb</span>. <span class="tactic">rewrite</span> <span class="id">X</span>. <span class="tactic">rewrite</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b1</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tb1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">M</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;other&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">O</span> <span class="id">id0</span> <span class="id">ty0</span>). <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id">P</span> <span class="id">id0</span>). <span class="tactic">tauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">Y</span>]. <span class="tactic">rewrite</span> <span class="id">X</span>; <span class="tactic">rewrite</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_variables_load">alloc_variables_load</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id">e</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5098')">Proof.</div>
<div class="proofscript" id="proof5098">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHalloc_variables</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_other">Mem.load_alloc_other</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sizeof_by_value">sizeof_by_value</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ty</span> <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5099')">Proof.</div>
<div class="proofscript" id="proof5099">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id">ty</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ty</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>; <span class="tactic">simpl</span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="env_initial_value">env_initial_value</a></span> (<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#env">env</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span> <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_variables_initial_value">alloc_variables_initial_value</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id">e</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#env_initial_value">env_initial_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#env_initial_value">env_initial_value</a></span> <span class="id">e</span>' <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5100')">Proof.</div>
<div class="proofscript" id="proof5100">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHalloc_variables</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Mem.load_alloc_same</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_l">Z.add_0_l</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#sizeof_by_value">sizeof_by_value</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_other">Mem.load_alloc_other</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="create_undef_temps_charact">create_undef_temps_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">vars</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> -&gt; (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5101')">Proof.</div>
<div class="proofscript" id="proof5101">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">ty1</span>]. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="create_undef_temps_inv">create_undef_temps_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">id</span> <span class="id">v</span>, (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5102')">Proof.</div>
<div class="proofscript" id="proof5102">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">ty1</span>]. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHvars</span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="create_undef_temps_exten">create_undef_temps_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span>) &lt;-&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l2">l2</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l2">l2</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5103')">Proof.</div>
<div class="proofscript" id="proof5103">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l2">l2</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> \/ (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l2">l2</a></span>)!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> ((<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id">l1</span>)!<span class="id">id</span>) <span class="kwd">as</span> [<span class="id">v1</span>|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_inv">create_undef_temps_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">subst</span> <span class="id">v1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">id1</span> <span class="id">ty1</span>] [<span class="id">P</span> <span class="id">Q</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">P</span>; <span class="tactic">subst</span> <span class="id">id1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">symmetry</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_charact">create_undef_temps_charact</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H</span> <span class="id">id</span> <span class="id">l1</span> <span class="id">l2</span>). <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H</span> <span class="id">id</span> <span class="id">l2</span> <span class="id">l1</span>). <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="var_names_app">var_names_app</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars1</span> <span class="id">vars2</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars1">vars1</a></span> ++ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars2">vars2</a></span>) = <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars1">vars1</a></span> ++ <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars2">vars2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5104')">Proof.</div>
<div class="proofscript" id="proof5104">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="filter_app">filter_app</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span> ++ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l2">l2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l1">l1</a></span> ++ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l2">l2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5105')">Proof.</div>
<div class="proofscript" id="proof5105">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">a</span>). <span class="tactic">simpl</span>. <span class="id">decEq</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="filter_charact">filter_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">x</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#x">x</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span>) &lt;-&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#x">x</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5106')">Proof.</div>
<div class="proofscript" id="proof5106">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">a</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">IHl</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="filter_norepet">filter_norepet</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5107')">Proof.</div>
<div class="proofscript" id="proof5107">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">hd</span>); <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_charact">filter_charact</a></span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="filter_map">filter_map</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> <span class="id">B</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#A">A</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#B">B</a></span>) (<span class="id">pa</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">pb</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#B">B</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">a</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#pb">pb</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#pa">pa</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#pa">pa</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#pb">pb</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5108')">Proof.</div>
<div class="proofscript" id="proof5108">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">pa</span> <span class="id">a</span>); <span class="tactic">simpl</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="create_undef_temps_lifted">create_undef_temps_lifted</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_temps">fn_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>))) ! <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> =<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> ++ <span class="id"><a href="compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_temps">fn_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>))) ! <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5109')">Proof.</div>
<div class="proofscript" id="proof5109">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_exten">create_undef_temps_exten</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_app">filter_app</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">id1</span> <span class="id">ty1</span>] [<span class="id">P</span> <span class="id">Q</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">P</span>. <span class="tactic">subst</span> <span class="id">id</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_charact">filter_charact</a></span> <span class="kwd">in</span> <span class="id">Q</span>. <span class="tactic">destruct</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">H</span>. <span class="id">change</span> <span class="id">id1</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id1</span>, <span class="id">ty1</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vars_and_temps_properties">vars_and_temps_properties</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">params</span> <span class="id">vars</span> <span class="id">temps</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> ++ <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint">list_disjoint</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#temps">temps</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#remove_lifted">remove_lifted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> ++ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>)))<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint">list_disjoint</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#temps">temps</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5110')">Proof.</div>
<div class="proofscript" id="proof5110">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_app">list_norepet_app</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#remove_lifted">remove_lifted</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_map">filter_map</a></span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="kwd">fun</span> <span class="id">a</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id">cenv</span>)). 2: <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_norepet">filter_norepet</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_append">list_norepet_append</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#var_names_app">var_names_app</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="tactic">at</span> 2. <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_map">filter_map</a></span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="kwd">fun</span> <span class="id">a</span> =&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id">cenv</span>). 2: <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id">vars</span>).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#filter_charact">filter_charact</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">C</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_envs_alloc_variables">match_envs_alloc_variables</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">m</span> <span class="id">vars</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">temps</span> <span class="id">j</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#empty_env">empty_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ty</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">chunk</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_value">By_value</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>', <span class="id">exists</span> <span class="id">te</span>, <span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#empty_env">empty_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#remove_lifted">remove_lifted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#temps">temps</a></span>) <span class="id">m</span>' (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#temps">temps</a></span>)) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">j</span>' <span class="id">m</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id">j</span>'<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> <span class="id">b</span>' -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ty</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5111')">Proof.</div>
<div class="proofscript" id="proof5111">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_alloc_variables">match_alloc_variables</a></span> <span class="id">cenv</span>); <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j</span>' [<span class="id">te</span> [<span class="id">tm</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> [<span class="id">E</span> [<span class="id">K</span> [<span class="id">F</span> <span class="id">G</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>'; <span class="id">exists</span> <span class="id">te</span>; <span class="id">exists</span> <span class="id">tm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id">vars</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="kwd">in</span> <span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">id</span>' <span class="id">ty</span>] [<span class="id">EQ</span> <span class="id">IN</span>]]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">EQ</span>; <span class="tactic">subst</span> <span class="id">id</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">F</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">P</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">cenv</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;var,&nbsp;lifted&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> [<span class="id">U</span> <span class="id">V</span>]. <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">chunk</span> <span class="id">X</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_lifted">match_var_lifted</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) (<span class="id">tv</span> := <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">U</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_initial_value">alloc_variables_initial_value</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_charact">create_undef_temps_charact</a></span> <span class="kwd">with</span> <span class="id">ty</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter_In">filter_In</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;var,&nbsp;not&nbsp;lifted&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> [<span class="id">tb</span> [<span class="id">U</span> <span class="id">V</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_lifted">match_var_not_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;non-local&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">G</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_var_not_local">match_var_not_local</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">cenv</span>) <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">n</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;temps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_inv">create_undef_temps_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="kwd">in</span> <span class="id">Q</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">id1</span> <span class="id">ty</span>] [<span class="id">EQ</span> <span class="id">IN</span>]]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">EQ</span>; <span class="tactic">subst</span> <span class="id">id1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_charact">create_undef_temps_charact</a></span> <span class="kwd">with</span> <span class="id">ty</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_lifted">add_lifted</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;injective&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_injective">alloc_variables_injective</a></span>. <span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;range&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_range">alloc_variables_range</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;trange&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_range">alloc_variables_range</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id">vars</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="kwd">in</span> <span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">id</span>' <span class="id">ty</span>'] [<span class="id">EQ</span> <span class="id">IN</span>]]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">EQ</span>; <span class="tactic">subst</span> <span class="id">id</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">F</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">cenv</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">Q</span>. <span class="tactic">destruct</span> <span class="id">Q</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Q</span> <span class="kwd">as</span> [<span class="id">tb</span> [<span class="id">U</span> <span class="id">V</span>]]. <span class="id">exists</span> <span class="id">b</span>; <span class="tactic">split</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">G</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;flat&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_range">alloc_variables_range</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">intros</span> [<span class="id">P</span>|<span class="id">P</span>]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">K</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">id0</span> [<span class="id">ty0</span> [<span class="id">U</span> [<span class="id">V</span> <span class="id">W</span>]]]]. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id0</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span>' &lt;&gt; <span class="id">b</span>').<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_injective">alloc_variables_injective</a></span> <span class="kwd">with</span> (<span class="id">e</span>' := <span class="id">te</span>) (<span class="id">id1</span> := <span class="id">id</span>) (<span class="id">id2</span> := <span class="id">id0</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">ty1</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_nextblock">alloc_variables_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_nextblock">alloc_variables_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;other&nbsp;properties&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">auto</span>. <span class="id">edestruct</span> <span class="id">F</span> <span class="kwd">as</span> (<span class="id">b</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>); <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Y</span> <span class="kwd">as</span> (<span class="id">tb</span> &amp; <span class="id">U</span> &amp; <span class="id">V</span>). <span class="id">exists</span> <span class="id">tb</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_loc_inject">assign_loc_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">loc</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">tm</span> <span class="id">loc</span>' <span class="id">ofs</span>' <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc">assign_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#loc">loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#loc">loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">loc</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc">assign_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> <span class="id">loc</span>' <span class="id">ofs</span>' <span class="id">v</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">m</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5112')">Proof.</div>
<div class="proofscript" id="proof5112">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="comment">(*&nbsp;by&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>'; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc_value">assign_loc_value</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_other">Mem.load_store_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">congruence</span>.<br/>
- <span class="comment">(*&nbsp;by&nbsp;copy&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">b</span>' <span class="id">into</span> <span class="id">bsrc</span>. <span class="tactic">rename</span> <span class="id">ofs</span>'0 <span class="id">into</span> <span class="id">osrc</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">loc</span> <span class="id">into</span> <span class="id">bdst</span>. <span class="tactic">rename</span> <span class="id">ofs</span> <span class="id">into</span> <span class="id">odst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">loc</span>' <span class="id">into</span> <span class="id">bdst</span>'. <span class="tactic">rename</span> <span class="id">b2</span> <span class="id">into</span> <span class="id">bsrc</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span>) 0).<br/>
+ <span class="comment">(*&nbsp;special&nbsp;case&nbsp;size&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">bytes</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span> <span class="id">m</span> <span class="id">bsrc</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span>) (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">Mem.range_perm_storebytes</a></span> <span class="id">tm</span> <span class="id">bdst</span>' (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">odst</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta</span>))) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">tm</span>' <span class="id">SB</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc_copy">assign_loc_copy</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">e</span>; <span class="id">right</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_empty_inject">Mem.storebytes_empty_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_storebytes_other">Mem.load_storebytes_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">congruence</span>.<br/>
+ <span class="comment">(*&nbsp;general&nbsp;case&nbsp;size&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">LEN</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SZPOS</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span> &gt; 0).<br/>
&nbsp;&nbsp;{ <span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof_pos">sizeof_pos</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">RPSRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span> <span class="id">bsrc</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span> + <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_implies">Mem.range_perm_implies</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_range_perm">Mem.loadbytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">RPDST</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span> <span class="id">bdst</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">odst</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">odst</span> + <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">ty</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> <span class="id">bytes</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_implies">Mem.range_perm_implies</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">LEN</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">PSRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span> <span class="id">bsrc</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">RPSRC</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">PDST</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span> <span class="id">bdst</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">odst</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">RPDST</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>.  <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">PSRC</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>.  <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">PDST</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inject">Mem.loadbytes_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">bytes2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inject">Mem.storebytes_mapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc_copy">assign_loc_copy</a></span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">EQ1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">EQ2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.aligned_area_inject">Mem.aligned_area_inject</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#alignof_blockcopy_1248">alignof_blockcopy_1248</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof_alignof_blockcopy_compat">sizeof_alignof_blockcopy_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.aligned_area_inject">Mem.aligned_area_inject</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#alignof_blockcopy_1248">alignof_blockcopy_1248</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof_alignof_blockcopy_compat">sizeof_alignof_blockcopy_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.disjoint_or_equal_inject">Mem.disjoint_or_equal_inject</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_max">Mem.range_perm_max</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_max">Mem.range_perm_max</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_storebytes_other">Mem.load_storebytes_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_loc_nextblock">assign_loc_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc">assign_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5113')">Proof.</div>
<div class="proofscript" id="proof5113">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="store_params_correct">store_params_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">f</span> <span class="id">k</span> <span class="id">cenv</span> <span class="id">le</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">e</span> <span class="id">m</span> <span class="id">params</span> <span class="id">args</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#args">args</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">tm</span> <span class="id">tle1</span> <span class="id">tle2</span> <span class="id">targs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#args">args</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#args">args</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#targs">targs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle1">tle1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, ~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle2">tle2</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle1">tle1</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tle</span>, <span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#store_params">store_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Clight.html#bind_parameter_temps">bind_parameter_temps</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#targs">targs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle2">tle2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id">m</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5114')">Proof.</div>
<div class="proofscript" id="proof5114">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">targs</span>; <span class="tactic">intros</span> <span class="id">NOREPET</span> <span class="id">CASTED</span> <span class="id">VINJ</span> <span class="id">MENV</span> <span class="id">MINJ</span> <span class="id">TLE</span> <span class="id">LE</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VINJ</span>. <span class="id">exists</span> <span class="id">tle2</span>; <span class="id">exists</span> <span class="id">tm</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_temps_exten">match_envs_temps_exten</a></span> <span class="kwd">with</span> <span class="id">tle1</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">NOREPET</span>. <span class="id">inv</span> <span class="id">CASTED</span>. <span class="id">inv</span> <span class="id">VINJ</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">id</span>); <span class="tactic">intros</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id">cenv</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;lifted&nbsp;to&nbsp;temp&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHbind_parameters</span> <span class="kwd">with</span> (<span class="id">tle1</span> := <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> <span class="id">v</span>' <span class="id">tle1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_assign_lifted">match_envs_assign_lifted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">ENV</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unmapped_inject">Mem.store_unmapped_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">TLE</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;still&nbsp;in&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">ENV</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_inject">assign_loc_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tm1</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHbind_parameters</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> <span class="id">v</span>' <span class="id">tle1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_change_temp">match_envs_change_temp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_invariant">match_envs_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">LE</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> <span class="id">v</span>' <span class="id">tle2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">TLE</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">LE</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">s</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tle</span> [<span class="id">tm</span>' [<span class="id">U</span> [<span class="id">V</span> [<span class="id">X</span> [<span class="id">Y</span> <span class="id">Z</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tle</span>; <span class="id">exists</span> <span class="id">tm</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#eval_Evar_local">eval_Evar_local</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#eval_Etempvar">eval_Etempvar</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bind_parameter_temps_inv">bind_parameter_temps_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">instantiate</span> (1 := <span class="id">v</span>'). <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cop.html#cast_val_casted">cast_val_casted</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#val_casted_inject">val_casted_inject</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id">v1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">eexact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_nextblock">assign_loc_nextblock</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span>) <span class="kwd">in</span> <span class="id">Z</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bind_parameters_nextblock">bind_parameters_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span> <span class="id">params</span> <span class="id">args</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#args">args</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5115')">Proof.</div>
<div class="proofscript" id="proof5115">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHbind_parameters</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_nextblock">assign_loc_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bind_parameters_load">bind_parameters_load</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>' <span class="id">ty</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> &lt;&gt; <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">params</span> <span class="id">args</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#args">args</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5116')">Proof.</div>
<div class="proofscript" id="proof5116">
&nbsp;&nbsp;<span class="tactic">induction</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHbind_parameters</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span> &lt;&gt; <span class="id">b0</span>) <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_other">Mem.load_store_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_storebytes_other">Mem.load_storebytes_other</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Freeing of local variables </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_blocks_of_env_perm_1">free_blocks_of_env_perm_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ce</span> <span class="id">m</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5117')">Proof.</div>
<div class="proofscript" id="proof5117">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_list">Mem.perm_free_list</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">B</span> <span class="kwd">with</span> 0 (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id">ce</span> <span class="id">ty</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span>. <span class="id">change</span> (<span class="id">b</span>, 0, <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id">ce</span> <span class="id">ty</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#block_of_binding">block_of_binding</a></span> <span class="id">ce</span> (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">free_list_perm</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5118')">Proof.</div>
<div class="proofscript" id="proof5118">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b1</span> <span class="id">lo1</span>] <span class="id">hi1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b1</span> <span class="id">lo1</span> <span class="id">hi1</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_blocks_of_env_perm_2">free_blocks_of_env_perm_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ce</span> <span class="id">m</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5119')">Proof.</div>
<div class="proofscript" id="proof5119">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">free_list_perm</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span>. <span class="id">change</span> (<span class="id">b</span>, 0, <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id">ce</span> <span class="id">ty</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#block_of_binding">block_of_binding</a></span> <span class="id">ce</span> (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="freelist_no_overlap">freelist_no_overlap</a></span> (<span class="id">l</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| (<span class="id">b</span>, <span class="id">lo</span>, <span class="id">hi</span>) :: <span class="id">l</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#freelist_no_overlap">freelist_no_overlap</a></span> <span class="id">l</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">b</span>', <span class="id">lo</span>', <span class="id">hi</span>') <span class="id">l</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id">b</span> \/ <span class="id">hi</span>' &lt;= <span class="id">lo</span> \/ <span class="id">hi</span> &lt;= <span class="id">lo</span>')<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="can_free_list">can_free_list</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#freelist_no_overlap">freelist_no_overlap</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5120')">Proof.</div>
<div class="proofscript" id="proof5120">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span> <span class="id">lo</span>] <span class="id">hi</span>]. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">A</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id">IHl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">B</span>|<span class="id">B</span>]. <span class="tactic">auto</span>. <span class="id">right</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="blocks_of_env_no_overlap">blocks_of_env_no_overlap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#genv">genv</a></span>) <span class="id">j</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">bty</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bty">bty</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bty">bty</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#freelist_no_overlap">freelist_no_overlap</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#block_of_binding">block_of_binding</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ge">ge</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5121')">Proof.</div>
<div class="proofscript" id="proof5121">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">tm</span>; <span class="tactic">intros</span> <span class="id">ME</span> <span class="id">MINJ</span> <span class="id">PERMS</span>. <span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> [<span class="id">b</span> <span class="id">ty</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">IHl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">id</span>' [<span class="id">b</span>'' <span class="id">ty</span>']] [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">A</span>. <span class="id">inv</span> <span class="id">A</span>. <span class="tactic">rename</span> <span class="id">b</span>'' <span class="id">into</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TE</span>: <span class="id">te</span>!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>, <span class="id">ty</span>)) <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TE</span>': <span class="id">te</span>!<span class="id">id</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id">ty</span>')) <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_mapped">me_mapped</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">TE</span>. <span class="tactic">intros</span> [<span class="id">b0</span> [<span class="id">INJ</span> <span class="id">E</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_mapped">me_mapped</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">TE</span>'. <span class="tactic">intros</span> [<span class="id">b0</span>' [<span class="id">INJ</span>' <span class="id">E</span>']].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id">ge0</span> <span class="id">ty</span>) 0); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id">ge0</span> <span class="id">ty</span>') 0); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b0</span> &lt;&gt; <span class="id">b0</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_inj">me_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>; <span class="tactic">elim</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">id</span>' <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>', (<span class="id">b</span>', <span class="id">ty</span>'))). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span> <span class="id">b0</span> 0 <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">PERMS</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span> <span class="id">b0</span>' 0 <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">PERMS</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">Mem.mi_no_overlap</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]. <span class="tactic">auto</span>. <span class="id">omegaContradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_list_right_inject">free_list_right_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">m1</span> <span class="id">l</span> <span class="id">m2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b1">b1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5122')">Proof.</div>
<div class="proofscript" id="proof5122">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span> <span class="id">lo</span>] <span class="id">hi</span>]. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="kwd">as</span> [<span class="id">m21</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHl</span> <span class="kwd">with</span> (<span class="id">m2</span> := <span class="id">m21</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inject">Mem.free_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="blocks_of_env_translated">blocks_of_env_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5123')">Proof.</div>
<div class="proofscript" id="proof5123">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span>, <span class="id"><a href="compcert.cfrontend.Clight.html#block_of_binding">block_of_binding</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_envs_free_blocks">match_envs_free_blocks</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">m</span>' <span class="id">tm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id">m</span>' <span class="id">tm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5124')">Proof.</div>
<div class="proofscript" id="proof5124">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">X</span>: <span class="id">exists</span> <span class="id">tm</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id">tm</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">te</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>').<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#blocks_of_env_translated">blocks_of_env_translated</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#can_free_list">can_free_list</a></span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;permissions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">id</span> [<span class="id">b</span>' <span class="id">ty</span>]] [<span class="id">EQ</span> <span class="id">IN</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#block_of_binding">block_of_binding</a></span> <span class="kwd">in</span> <span class="id">EQ</span>; <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_mapped">me_mapped</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 0 <span class="kwd">with</span> (0 + 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#prog_comp_env">prog_comp_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.prog">prog</a></span>) <span class="id">ty</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#prog_comp_env">prog_comp_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.prog">prog</a></span>) <span class="id">ty</span> + 0) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inject">Mem.range_perm_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_blocks_of_env_perm_2">free_blocks_of_env_perm_2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#blocks_of_env_no_overlap">blocks_of_env_no_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_blocks_of_env_perm_2">free_blocks_of_env_perm_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_keys_norepet">PTree.elements_keys_norepet</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">X</span> <span class="kwd">as</span> [<span class="id">tm</span>' <span class="id">FREE</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_list_right_inject">free_list_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_list_left_inject">Mem.free_list_left_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">id</span> [<span class="id">b</span>' <span class="id">ty</span>]] [<span class="id">EQ</span> <span class="id">IN</span>]]. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#block_of_binding">block_of_binding</a></span> <span class="kwd">in</span> <span class="id">EQ</span>. <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_flat">me_flat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">subst</span> <span class="id">delta</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_blocks_of_env_perm_1">free_blocks_of_env_perm_1</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span>. <span class="id">cbn</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Evaluation of expressions </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR">EVAL_EXPR</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.e">e</a></span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.te">te</a></span>: <span class="id"><a href="compcert.cfrontend.Clight.html#env">env</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.le">le</a></span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.tle">tle</a></span>: <span class="id"><a href="compcert.cfrontend.Clight.html#temp_env">temp_env</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.tm">tm</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.f">f</a></span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.cenv">cenv</a></span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.lo">lo</a></span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.hi">hi</a></span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.tlo">tlo</a></span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.thi">thi</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.MATCH">MATCH</a></span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.thi">thi</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.MEMINJ">MEMINJ</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tm">tm</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.EVAL_EXPR.GLOB">GLOB</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.se">se</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tse">tse</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="typeof_simpl_expr">typeof_simpl_expr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#typeof">typeof</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_expr">simpl_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) = <span class="id"><a href="compcert.cfrontend.Clight.html#typeof">typeof</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5125')">Proof.</div>
<div class="proofscript" id="proof5125">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">i</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="deref_loc_inject">deref_loc_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ty</span> <span class="id">loc</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">loc</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#deref_loc">deref_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#loc">loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#loc">loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">loc</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#deref_loc">deref_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tm">tm</a></span> <span class="id">loc</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5126')">Proof.</div>
<div class="proofscript" id="proof5126">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;by&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#deref_loc_value">deref_loc_value</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;by&nbsp;reference&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">loc</span>' <span class="id">ofs</span>'); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#deref_loc_reference">deref_loc_reference</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;by&nbsp;copy&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">loc</span>' <span class="id">ofs</span>'); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#deref_loc_copy">deref_loc_copy</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_simpl_expr">eval_simpl_expr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_expr">addr_taken_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_expr">simpl_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="eval_simpl_lvalue">eval_simpl_lvalue</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_lvalue">eval_lvalue</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_expr">addr_taken_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id">id</span> <span class="id">ty</span> =&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>', <span class="id">exists</span> <span class="id">ofs</span>', <span class="id"><a href="compcert.cfrontend.Clight.html#eval_lvalue">eval_lvalue</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_expr">simpl_expr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span>) <span class="id">b</span>' <span class="id">ofs</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>').<br/>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5127')">Proof.</div>
<div class="proofscript" id="proof5127">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;const&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f0</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f0</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">i</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;tempvar&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_temps">me_temps</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]] <span class="id">C</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;addrof&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_lvalue</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">i</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span>) <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">i</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.singleton_2">VSet.singleton_2</a></span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem_2">VSet.mem_2</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>' [<span class="id">ofs</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>'); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;unop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_unary_operation_inject">sem_unary_operation_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;binop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_binary_operation_inject">sem_binary_operation_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">E</span> <span class="id">F</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;cast&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast_inject">sem_cast_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;sizeof&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;alignof&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;rval&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: (<span class="id">exists</span> <span class="id">id</span>, <span class="id">exists</span> <span class="id">ty</span>, <span class="id">a</span> = <span class="id"><a href="compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span> <span class="id"><a href="compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id">id</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">i</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span>) <span class="id">eqn</span>:?; <span class="tactic">auto</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EITHER</span> <span class="kwd">as</span> [ [<span class="id">id</span> [<span class="id">ty</span> [<span class="id">EQ</span> <span class="id">OPT</span>]]] | <span class="id">NONOPT</span> ].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;a&nbsp;variable&nbsp;pulled&nbsp;out&nbsp;of&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">OPT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">id</span>). <span class="tactic">intros</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">ENV</span> <span class="kwd">in</span> <span class="id">H6</span>; <span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">chunk0</span> = <span class="id">chunk</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">chunk0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v0</span> = <span class="id">v</span>). <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">v0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;any&nbsp;other&nbsp;l-value&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_lvalue</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">loc</span>' [<span class="id">ofs</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#deref_loc_inject">deref_loc_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;lvalues&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;local&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">id</span>). <span class="tactic">intros</span> <span class="id">MV</span>. <span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">ENV</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>'; <span class="id">exists</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#eval_Evar_local">eval_Evar_local</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;global&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">id</span>). <span class="tactic">intros</span> <span class="id">MV</span>. <span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match">Genv.find_symbol_match</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">tl</span> &amp; <span class="id">Htl</span> &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tl</span>; <span class="id">exists</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#eval_Evar_global">eval_Evar_global</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;deref&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">B</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;field&nbsp;struct&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">B</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#eval_Efield_struct">eval_Efield_struct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_assoc">Ptrofs.add_assoc</a></span>. <span class="id">decEq</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_commut">Ptrofs.add_commut</a></span>.<br/>
<span class="comment">(*&nbsp;field&nbsp;union&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#comp_env_preserved">comp_env_preserved</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simpl_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">B</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#eval_Efield_union">eval_Efield_union</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_simpl_exprlist">eval_simpl_exprlist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">al</span> <span class="id">tyl</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#al">al</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tyl">tyl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_exprlist">addr_taken_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#al">al</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cop.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tyl">tyl</a></span> /\<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tvl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_exprlist">simpl_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#al">al</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tyl">tyl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tvl">tvl</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tvl">tvl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5128')">Proof.</div>
<div class="proofscript" id="proof5128">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast_inject">sem_cast_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_exprlist</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">tvl</span> [<span class="id">F</span> <span class="id">G</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cop.html#cast_val_is_casted">cast_val_is_casted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tv2</span> :: <span class="id">tvl</span>); <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.EVAL_EXPR">EVAL_EXPR</a></span>.<br/>
<br/>
<div class="doc">Matching continuations </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_cont">match_cont</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>): <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#cont">cont</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#cont">cont</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kstop">match_Kstop</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.w">w</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#Kstop">Kstop</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#Kstop">Kstop</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kseq">match_Kseq</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">s</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kloop1">match_Kloop1</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span> <span class="id">ts1</span> <span class="id">ts2</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts1">ts1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s2">s2</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts2">ts2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.union">VSet.union</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s1">s1</a></span>) (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s2">s2</a></span>)) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop1">Kloop1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s1">s1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s2">s2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop1">Kloop1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts1">ts1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts2">ts2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kloop2">match_Kloop2</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span> <span class="id">ts1</span> <span class="id">ts2</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts1">ts1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s2">s2</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts2">ts2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.union">VSet.union</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s1">s1</a></span>) (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s2">s2</a></span>)) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop2">Kloop2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s1">s1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s2">s2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop2">Kloop2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts1">ts1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts2">ts2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kswitch">match_Kswitch</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kswitch">Kswitch</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#Kswitch">Kswitch</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kcall">match_Kcall</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">optid</span> <span class="id">fn</span> <span class="id">e</span> <span class="id">le</span> <span class="id">k</span> <span class="id">tfn</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">hi</span> <span class="id">thi</span> <span class="id">lo</span> <span class="id">tlo</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fn">fn</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tfn">tfn</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fn">fn</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fn">fn</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#check_opttemp">check_opttemp</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fn">fn</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#optid">optid</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kcall">Kcall</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#optid">optid</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fn">fn</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#Kcall">Kcall</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#optid">optid</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>.<br/>
<br/>
<div class="doc">Invariance property by change of memory and injection </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_invariant">match_cont_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>' <span class="id">m</span>' <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5129')">Proof.</div>
<div class="proofscript" id="proof5129">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">LOAD</span> <span class="id">INCR</span> <span class="id">INJ1</span> <span class="id">INJ2</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;globalenvs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_refl">Pos.le_refl</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">bound</span>). <span class="id">erewrite</span> <span class="id">INJ1</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b2</span> <span class="id">tbound</span>). <span class="id">erewrite</span> <span class="id">INJ2</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
<span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_invariant">match_envs_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">LOAD</span>; <span class="tactic">auto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">INJ1</span>; <span class="tactic">auto</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">INJ2</span>; <span class="tactic">eauto</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHmatch_cont</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">LOAD</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">INJ1</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">INJ2</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance by assignment to location "above" </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_assign_loc">match_cont_assign_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">ty</span> <span class="id">loc</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#assign_loc">assign_loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#loc">loc</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#loc">loc</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5130')">Proof.</div>
<div class="proofscript" id="proof5130">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_invariant">match_cont_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H4</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;scalar&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_other">Mem.load_store_other</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;copy&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_storebytes_other">Mem.load_storebytes_other</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance by external calls </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_extcall">match_cont_extcall</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">tm</span> <span class="id">f</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5131')">Proof.</div>
<div class="proofscript" id="proof5131">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_invariant">match_cont_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on">Mem.load_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>] | ] <span class="id">eqn</span>:?. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>] | ] <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="id">xomegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>''] | ] <span class="id">eqn</span>:?. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="id">xomegaContradiction</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance by change of bounds </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_incr_bounds">match_cont_incr_bounds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bound</span>' <span class="id">tbound</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id">bound</span>' -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> <span class="id">tbound</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id">bound</span>' <span class="id">tbound</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5132')">Proof.</div>
<div class="proofscript" id="proof5132">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_cont</span></span> and call continuations. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_change_cenv">match_cont_change_cenv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">cenv</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#is_call_cont">is_call_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">cenv</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5133')">Proof.</div>
<div class="proofscript" id="proof5133">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_is_call_cont">match_cont_is_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#is_call_cont">is_call_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#is_call_cont">is_call_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5134')">Proof.</div>
<div class="proofscript" id="proof5134">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_call_cont">match_cont_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id">cenv</span>' (<span class="id"><a href="compcert.cfrontend.Clight.html#call_cont">call_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#call_cont">call_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5135')">Proof.</div>
<div class="proofscript" id="proof5135">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_cont</span></span> and freeing of environment blocks </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="free_list_nextblock">free_list_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5136')">Proof.</div>
<div class="proofscript" id="proof5136">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> <span class="id">p</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">z0</span> <span class="id">z</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="free_list_load">free_list_load</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id">b</span>' 0 = <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id">b</span>' 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5137')">Proof.</div>
<div class="proofscript" id="proof5137">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> <span class="id">p</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">z0</span> <span class="id">z</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span>' 0). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_free">Mem.load_free</a></span>. <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' <span class="id">b</span>) <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_free_env">match_cont_free_env</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tm</span> <span class="id">tlo</span> <span class="id">thi</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span>' <span class="id">tm</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id">m</span>' (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5138')">Proof.</div>
<div class="proofscript" id="proof5138">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_incr_bounds">match_cont_incr_bounds</a></span> <span class="kwd">with</span> <span class="id">lo</span> <span class="id">tlo</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_invariant">match_cont_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_list_load">free_list_load</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#blocks_of_env">blocks_of_env</a></span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">id</span> [<span class="id">b1</span> <span class="id">ty</span>]] [<span class="id">P</span> <span class="id">Q</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">P</span>. <span class="id">inv</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_range">me_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_list_nextblock">free_list_nextblock</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#free_list_nextblock">free_list_nextblock</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Matching of global environments </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cont_globalenv">match_cont_globalenv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">m</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.se">se</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tse">tse</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5139')">Proof.</div>
<div class="proofscript" id="proof5139">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.CKLR.html#match_stbls_acc">match_stbls_acc</a></span> <span class="kwd">in</span> <span class="id">GE</span>; <span class="id">cbn</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.GE">GE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">match_cont_globalenv</span>: <span class="id">compat</span>.<br/>
<br/>
<div class="doc">Relating execution states </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span>: <span class="id"><a href="compcert.cfrontend.Clight.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_regular_states">match_regular_states</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tf</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">te</span> <span class="id">tle</span> <span class="id">tm</span> <span class="id">j</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">tlo</span> <span class="id">thi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tf">tf</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRS</span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MENV</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs">match_envs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCONT</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tlo">tlo</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">COMPAT</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#hi">hi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TBOUND</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#thi">thi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tle">tle</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_call_state">match_call_state</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vf</span> <span class="id">vargs</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tvf</span> <span class="id">tvargs</span> <span class="id">tk</span> <span class="id">tm</span> <span class="id">j</span> <span class="id">fd</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCONT</span>: <span class="kwd">forall</span> <span class="id">cenv</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vf">vf</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tvf">tvf</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vargs">vargs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tvargs">tvargs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VFIND</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vf">vf</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fd">fd</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FUNTY</span>: <span class="id"><a href="compcert.cfrontend.Clight.html#type_of_fundef">type_of_fundef</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#fd">fd</a></span> = <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tfunction">Tfunction</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#targs">targs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tres">tres</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cconv">cconv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ANORM</span>: <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vargs">vargs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#targs">targs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vf">vf</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vargs">vargs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tvf">tvf</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tvargs">tvargs</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_return_state">match_return_state</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tv</span> <span class="id">tk</span> <span class="id">tm</span> <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCONT</span>: <span class="kwd">forall</span> <span class="id">cenv</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#j">j</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Clight.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tm">tm</a></span>).<br/>
<br/>
<div class="doc">The simulation diagrams </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="is_liftable_var_charact">is_liftable_var_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#is_liftable_var">is_liftable_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt; <span class="id">exists</span> <span class="id">ty</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id">id</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ty">ty</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#a">a</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.cfrontend.Clight.html#Evar">Evar</a></span> <span class="id">id</span> <span class="id">ty</span> =&gt; <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5140')">Proof.</div>
<div class="proofscript" id="proof5140">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">i</span> <span class="id">cenv</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="simpl_select_switch">simpl_select_switch</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">n</span> <span class="id">ls</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch">select_switch</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#n">n</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch">select_switch</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#n">n</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5141')">Proof.</div>
<div class="proofscript" id="proof5141">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cenv</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DFL</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ls</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id">cenv</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id">cenv</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_default">select_switch_default</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_default">select_switch_default</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">o</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span>, <span class="id">EQ1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">CASE</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ls</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id">cenv</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_case">select_switch_case</a></span> <span class="id">n</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_case">select_switch_case</a></span> <span class="id">n</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">ls</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tls</span>', <span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_case">select_switch_case</a></span> <span class="id">n</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tls</span>' /\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id">cenv</span> <span class="id">ls</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">tls</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">z</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span>, <span class="id">EQ1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHls</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHls</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#select_switch">select_switch</a></span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">CASE</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_case">select_switch_case</a></span> <span class="id">n</span> <span class="id">ls</span>) <span class="kwd">as</span> [<span class="id">ls</span>'|].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">CASE</span> <span class="kwd">as</span> [<span class="id">tls</span>' [<span class="id">P</span> <span class="id">Q</span>]]. <span class="tactic">rewrite</span> <span class="id">P</span>, <span class="id">Q</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">CASE</span>. <span class="tactic">apply</span> <span class="id">DFL</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="simpl_seq_of_labeled_statement">simpl_seq_of_labeled_statement</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">ls</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#seq_of_labeled_statement">seq_of_labeled_statement</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#seq_of_labeled_statement">seq_of_labeled_statement</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5142')">Proof.</div>
<div class="proofscript" id="proof5142">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">simpl</span>. <span class="id">erewrite</span> <span class="id">IHls</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="compat_cenv_select_switch">compat_cenv_select_switch</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">n</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch">select_switch</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#n">n</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>)) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv">cenv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5143')">Proof.</div>
<div class="proofscript" id="proof5143">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cenv</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DFL</span>: <span class="kwd">forall</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) <span class="id">cenv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_default">select_switch_default</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>)) <span class="id">cenv</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">CASE</span>: <span class="kwd">forall</span> <span class="id">ls</span> <span class="id">ls</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) <span class="id">cenv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_case">select_switch_case</a></span> <span class="id">n</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">ls</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> <span class="id">ls</span>') <span class="id">cenv</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">z</span> <span class="id">n</span>). <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">CASE</span> <span class="id">ls</span>). <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#select_switch">select_switch</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#select_switch_case">select_switch_case</a></span> <span class="id">n</span> <span class="id">ls</span>) <span class="kwd">as</span> [<span class="id">ls</span>'|]; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="addr_taken_seq_of_labeled_statement">addr_taken_seq_of_labeled_statement</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ls</span>, <span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#seq_of_labeled_statement">seq_of_labeled_statement</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) = <span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5144')">Proof.</div>
<div class="proofscript" id="proof5144">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.FIND_LABEL">FIND_LABEL</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.FIND_LABEL.f">f</a></span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.FIND_LABEL.cenv">cenv</a></span>: <span class="id"><a href="compcert.cfrontend.SimplLocals.html#compilenv">compilenv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.FIND_LABEL.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="PRESERVATION.FIND_LABEL.bound">bound</a></span> <span class="id"><a name="PRESERVATION.FIND_LABEL.tbound">tbound</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.FIND_LABEL.lbl">lbl</a></span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="simpl_find_label">simpl_find_label</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">tk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">s</span>', <span class="id">k</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id">s</span>') <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">s</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.tbound">tbound</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="simpl_find_label_ls">simpl_find_label_ls</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ls</span> <span class="id">k</span> <span class="id">tls</span> <span class="id">tk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_lblstmt">simpl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_lblstmt">addr_taken_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Clight.html#find_label_ls">find_label_ls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#find_label_ls">find_label_ls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">s</span>', <span class="id">k</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Clight.html#find_label_ls">find_label_ls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tls">tls</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv">compat_cenv</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id">s</span>') <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocals.html#simpl_stmt">simpl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">s</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.f">f</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.m">m</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.tbound">tbound</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5145')">Proof.</div>
<div class="proofscript" id="proof5145">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">tk</span>; <span class="tactic">intros</span> <span class="id">TS</span> <span class="id">MC</span> <span class="id">COMPAT</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;skip&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#is_liftable_var">is_liftable_var</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">e</span>); <span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#Sset_debug">Sset_debug</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHs1</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> <span class="id">s2</span> <span class="id">k</span>) <span class="id">x</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> <span class="id">x0</span> <span class="id">tk</span>)); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>']|].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> <span class="id">S</span>]]]]]. <span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">P</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">E</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">E</span>. <span class="tactic">eapply</span> <span class="id">IHs2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;ifthenelse&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHs1</span> <span class="id">k</span> <span class="id">x</span> <span class="id">tk</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> <span class="id">k</span>) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>']|].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> <span class="id">S</span>]]]]]. <span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">P</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">E</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">E</span>. <span class="tactic">eapply</span> <span class="id">IHs2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;loop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHs1</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop1">Kloop1</a></span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span>) <span class="id">x</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop1">Kloop1</a></span> <span class="id">x</span> <span class="id">x0</span> <span class="id">tk</span>)); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kloop1">Kloop1</a></span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>']|].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> <span class="id">S</span>]]]]]. <span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">P</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">E</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">E</span>. <span class="tactic">eapply</span> <span class="id">IHs2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;break&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;continue&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">simpl_find_label_ls</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;label&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>; <span class="id">exists</span> <span class="id">tk</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;goto&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TS</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;cons&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simpl_find_label</span> <span class="id">s</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#seq_of_labeled_statement">seq_of_labeled_statement</a></span> <span class="id">ls</span>) <span class="id">k</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#simpl_seq_of_labeled_statement">simpl_seq_of_labeled_statement</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#addr_taken_seq_of_labeled_statement">addr_taken_seq_of_labeled_statement</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#Kseq">Kseq</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#seq_of_labeled_statement">seq_of_labeled_statement</a></span> <span class="id">ls</span>) <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>']|].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> <span class="id">S</span>]]]]]. <span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">P</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">E</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">E</span>. <span class="tactic">eapply</span> <span class="id">IHls</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_label_store_params">find_label_store_params</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">params</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#store_params">store_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5146')">Proof.</div>
<div class="proofscript" id="proof5146">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">params</span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">ty</span>]. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.mem">VSet.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.cenv">cenv</a></span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_label_add_debug_vars">find_label_add_debug_vars</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">vars</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_vars">add_debug_vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5147')">Proof.</div>
<div class="proofscript" id="proof5147">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_vars">add_debug_vars</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">ty</span>]; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_label_add_debug_params">find_label_add_debug_params</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">vars</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_params">add_debug_params</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span> = <span class="id"><a href="compcert.cfrontend.Clight.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5148')">Proof.</div>
<div class="proofscript" id="proof5148">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#add_debug_params">add_debug_params</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#debug">Compopts.debug</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">ty</span>]; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.FIND_LABEL">FIND_LABEL</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="step_simulation">step_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span> <span class="id">t</span> <span class="id">S2</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#step1">step1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S1">S1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#t">t</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S2">S2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span>' (<span class="id">MS</span>: <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S1">S1</a></span> <span class="id">S1</span>'), <span class="id">exists</span> <span class="id">S2</span>', <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.cfrontend.Clight.html#step2">step2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id">S1</span>' <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#t">t</a></span> <span class="id">S2</span>' /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S2">S2</a></span> <span class="id">S2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5149')">Proof.</div>
<div class="proofscript" id="proof5149">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">MS</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> (<span class="id">monadInv</span> <span class="id">TRS</span>).<br/>
<br/>
<span class="comment">(*&nbsp;assign&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#is_liftable_var_charact">is_liftable_var_charact</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>) <span class="id">a1</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#is_liftable_var">is_liftable_var</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>) <span class="id">a1</span>) <span class="kwd">as</span> [<span class="id">id</span>|]; <span class="id">monadInv</span> <span class="id">TRS</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;liftable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ty</span> [<span class="id">P</span> <span class="id">Q</span>]]; <span class="tactic">subst</span> <span class="id">a1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast_inject">sem_cast_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">id</span>). <span class="tactic">intros</span> <span class="id">MV</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_Sset_debug">step_Sset_debug</a></span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_assign_lifted">match_envs_assign_lifted</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cop.html#cast_val_is_casted">cast_val_is_casted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_assign_loc">match_cont_assign_loc</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#me_range">me_range</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unmapped_inject">Mem.store_unmapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_nextblock">assign_loc_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;global&nbsp;variable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MV</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;not&nbsp;liftable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_lvalue">eval_simpl_lvalue</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tb</span> [<span class="id">tofs</span> [<span class="id">E</span> <span class="id">F</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast_inject">sem_cast_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_inject">assign_loc_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">X</span> [<span class="id">Y</span> <span class="id">Z</span>]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="id">eexact</span> <span class="id">E</span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>. <span class="id">eexact</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>; <span class="tactic">auto</span>. <span class="id">eexact</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_invariant">match_envs_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_invariant">match_cont_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_nextblock">assign_loc_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#assign_loc_nextblock">assign_loc_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;set&nbsp;temporary&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_set_temp">match_envs_set_temp</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tvf</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_exprlist">eval_simpl_exprlist</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">CASTED</span> [<span class="id">tvargs</span> [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tfd</span> [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_call">step_call</a></span> <span class="kwd">with</span> (<span class="id">fd</span> := <span class="id">tfd</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#type_of_fundef_preserved">type_of_fundef_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_exprlist">eval_simpl_exprlist</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">CASTED</span> [<span class="id">tvargs</span> [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject">external_call_mem_inject</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j</span>' [<span class="id">tvres</span> [<span class="id">tm</span>' [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> [<span class="id">S</span> [<span class="id">T</span> [<span class="id">U</span> <span class="id">V</span>]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_set_opttemp">match_envs_set_opttemp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_extcall">match_envs_extcall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_extcall">match_cont_extcall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>; <span class="id">xomega</span>. <span class="id">inv</span> <span class="id">MENV</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;sequence&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;skip&nbsp;sequence&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;continue&nbsp;sequence&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;break&nbsp;sequence&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;ifthenelse&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_ifthenelse">step_ifthenelse</a></span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">tv</span>) (<span class="id">b</span> := <span class="id">b</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cop.html#bool_val_inject">bool_val_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;loop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;skip-or-continue&nbsp;loop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;break&nbsp;loop1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_break_loop1">step_break_loop1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;skip&nbsp;loop2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_skip_loop2">step_skip_loop2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;break&nbsp;loop2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_break_loop2">step_break_loop2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;return&nbsp;none&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_free_blocks">match_envs_free_blocks</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_call_cont">match_cont_call_cont</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_free_env">match_cont_free_env</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;return&nbsp;some&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast_inject">sem_cast_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_free_blocks">match_envs_free_blocks</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>. <span class="id">monadInv</span> <span class="id">TRF</span>; <span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_call_cont">match_cont_call_cont</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_free_env">match_cont_free_env</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;skip&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_free_blocks">match_envs_free_blocks</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_is_call_cont">match_cont_is_call_cont</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TRF</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_change_cenv">match_cont_change_cenv</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_free_env">match_cont_free_env</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#eval_simpl_expr">eval_simpl_expr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#typeof_simpl_expr">typeof_simpl_expr</a></span>. <span class="id">instantiate</span> (1 := <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_switch_arg">sem_switch_arg</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cop.html#classify_switch">classify_switch</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#typeof">typeof</a></span> <span class="id">a</span>)); <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">B</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#simpl_seq_of_labeled_statement">simpl_seq_of_labeled_statement</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#simpl_select_switch">simpl_select_switch</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#addr_taken_seq_of_labeled_statement">addr_taken_seq_of_labeled_statement</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv_select_switch">compat_cenv_select_switch</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;skip-break&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_skip_break_switch">step_skip_break_switch</a></span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;continue&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCONT</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Clight.html#step_continue_switch">step_continue_switch</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
<br/>
<span class="comment">(*&nbsp;label&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;goto&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">TRF</span>; <span class="tactic">intros</span> <span class="id">TRF</span>'. <span class="id">monadInv</span> <span class="id">TRF</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#simpl_find_label">simpl_find_label</a></span> <span class="id">j</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>) <span class="id">m</span> <span class="id">lo</span> <span class="id">tlo</span> <span class="id">lbl</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_body">fn_body</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#call_cont">call_cont</a></span> <span class="id">k</span>) <span class="id">x</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#call_cont">call_cont</a></span> <span class="id">tk</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_call_cont">match_cont_call_cont</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv_for">compat_cenv_for</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#find_label_add_debug_params">find_label_add_debug_params</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#find_label_store_params">find_label_store_params</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#find_label_add_debug_vars">find_label_add_debug_vars</a></span>. <span class="id">eexact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;internal&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">FIND</span> <span class="kwd">in</span> <span class="id">VFIND</span>; <span class="id">inv</span> <span class="id">VFIND</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">MCONT</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span>) <span class="kwd">as</span> <span class="id">SEINJ</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_globalenv">match_cont_globalenv</a></span> <span class="kwd">in</span> <span class="id">SEINJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#functions_translated">functions_translated</a></span> <span class="kwd">in</span> <span class="id">FIND</span> <span class="kwd">as</span> (<span class="id">tfd</span> &amp; <span class="id">TFIND</span> &amp; <span class="id">TRFD</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TRFD</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">EQ</span>; <span class="tactic">intro</span> <span class="id">EQ</span>'; <span class="id">monadInv</span> <span class="id">EQ</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id">f</span> ++ <span class="id"><a href="compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#var_names">var_names</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_alloc_variables">match_envs_alloc_variables</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen">cenv_for_gen</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> <span class="id">f</span>.(<span class="id"><a href="compcert.cfrontend.Clight.html#fn_body">fn_body</a></span>)) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id">f</span> ++ <span class="id"><a href="compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen_by_value">cenv_for_gen_by_value</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#mem_iff">VSF.mem_iff</a></span>. <span class="id">eexact</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen_domain">cenv_for_gen_domain</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#mem_iff">VSF.mem_iff</a></span>. <span class="id">eexact</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j</span>' [<span class="id">te</span> [<span class="id">tm0</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">K</span>: <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html#val_casted">val_casted</a></span> <span class="id">vargs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#val_casted_list_params">val_casted_list_params</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#type_of_function">type_of_function</a></span> <span class="kwd">in</span> <span class="id">FUNTY</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#store_params_correct">store_params_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_append_left">list_norepet_append_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">K</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_incr">val_inject_list_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">B</span>. <span class="id">eexact</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_lifted">create_undef_temps_lifted</a></span> <span class="id">id</span> <span class="id">f</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Clight.html#create_undef_temps">create_undef_temps</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_temps">fn_temps</a></span> <span class="id">f</span>))!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">v</span>|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#create_undef_temps_inv">create_undef_temps_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">elim</span> (<span class="id">l</span> <span class="id">id</span> <span class="id">id</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tel</span> [<span class="id">tm1</span> [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> [<span class="id">S</span> <span class="id">T</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#cenv_for_gen">cenv_for_gen</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#addr_taken_stmt">addr_taken_stmt</a></span> (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_body">fn_body</a></span> <span class="id">f</span>)) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id">f</span> ++ <span class="id"><a href="compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#vars_and_temps_properties">vars_and_temps_properties</a></span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_params">fn_params</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_vars">fn_vars</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#fn_temps">fn_temps</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">X</span> [<span class="id">Y</span> <span class="id">Z</span>]]. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">exact</span> <span class="id">Y</span>. <span class="tactic">exact</span> <span class="id">X</span>. <span class="tactic">exact</span> <span class="id">Z</span>. <span class="tactic">simpl</span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">simpl</span>. <span class="id">eexact</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_add_debug_params">step_add_debug_params</a></span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#forall2_val_casted_inject">forall2_val_casted_inject</a></span>; <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">P</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_add_debug_vars">step_add_debug_vars</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#remove_lifted">remove_lifted</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter_In">List.filter_In</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">negb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_invariant">match_cont_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id">chunk</span> <span class="id">m0</span> <span class="id">b</span> 0).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bind_parameters_load">bind_parameters_load</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_range">alloc_variables_range</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Clight.html#empty_env">empty_env</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">intros</span> [?|?]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">b</span>'. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#alloc_variables_load">alloc_variables_load</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#compat_cenv_for">compat_cenv_for</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#bind_parameters_nextblock">bind_parameters_nextblock</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>). <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">T</span>; <span class="id">xomega</span>.<br/>
<br/>
<span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">FIND</span> <span class="kwd">in</span> <span class="id">VFIND</span>; <span class="id">inv</span> <span class="id">VFIND</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">MCONT</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span>) <span class="kwd">as</span> <span class="id">SEINJ</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_globalenv">match_cont_globalenv</a></span> <span class="kwd">in</span> <span class="id">SEINJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#functions_translated">functions_translated</a></span> <span class="kwd">in</span> <span class="id">FIND</span> <span class="kwd">as</span> (<span class="id">tfd</span> &amp; <span class="id">TFIND</span> &amp; <span class="id">TRFD</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TRFD</span>. <span class="id">inv</span> <span class="id">FUNTY</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject">external_call_mem_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">j</span>' [<span class="id">tvres</span> [<span class="id">tm</span>' [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">R</span> [<span class="id">S</span> [<span class="id">T</span> [<span class="id">U</span> <span class="id">V</span>]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_incr_bounds">match_cont_incr_bounds</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_extcall">match_cont_extcall</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">MCONT</span> (<span class="id"><a href="compcert.cfrontend.SimplLocals.html#cenv_for">cenv_for</a></span> <span class="id">f</span>)). <span class="id">inv</span> <span class="id">MCONT</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">compat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_envs_set_opttemp">match_envs_set_opttemp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="initial_states_simulation">initial_states_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">q1</span> <span class="id">q2</span> <span class="id">S</span>, <span class="id"><a href="compcert.common.LanguageInterface.html#match_query">match_query</a></span> (<span class="id"><a href="compcert.common.LanguageInterface.html#cc_c">cc_c</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.w">w</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q1">q1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q2">q2</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q1">q1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q2">q2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span> /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5150')">Proof.</div>
<div class="proofscript" id="proof5150">
&nbsp;&nbsp;<span class="tactic">intros</span> ? ? ? <span class="id">Hq</span> <span class="id">HS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hq</span> <span class="kwd">as</span> [<span class="id">vf1</span> <span class="id">vf2</span> <span class="id">sg</span> <span class="id">vargs1</span> <span class="id">vargs2</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hvf</span> <span class="id">Hvargs</span> <span class="id">Hm</span> <span class="id">Hvf1</span>]. <span class="tactic">clear</span> <span class="id">Hq</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">HS</span>. <span class="tactic">clear</span> <span class="id">HS</span>. <span class="tactic">subst</span> <span class="id">vf</span> <span class="id">sg</span> <span class="id">vargs</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.GE">GE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tf</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#type_of_fundef_preserved">type_of_fundef_preserved</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">B</span>) <span class="kwd">as</span> <span class="id">Hsg</span>. <span class="id">monadInv</span> <span class="id">B</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;{ <span class="id">revert</span> <span class="id">vargs2</span> <span class="id">Hvargs</span>. <span class="tactic">clear</span> - <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H6</span>; <span class="tactic">inversion</span> 1; <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#val_casted_inject">val_casted_inject</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.cklr.CKLR.html#match_stbls_nextblock">match_stbls_nextblock</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hm</span>; <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="final_states_simulation">final_states_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S</span> <span class="id">R</span> <span class="id">r1</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#final_state">final_state</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r1">r1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">r2</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#final_state">final_state</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r2">r2</a></span> /\ <span class="id"><a href="compcert.common.LanguageInterface.html#match_reply">match_reply</a></span> (<span class="id"><a href="compcert.common.LanguageInterface.html#cc_c">cc_c</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.w">w</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r1">r1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r2">r2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5151')">Proof.</div>
<div class="proofscript" id="proof5151">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">MCONT</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span>). <span class="id">inv</span> <span class="id">MCONT</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_states_simulation">external_states_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S</span> <span class="id">R</span> <span class="id">q1</span>, <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#at_external">at_external</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q1">q1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">wx</span> <span class="id">q2</span>, <span class="id"><a href="compcert.cfrontend.Clight.html#at_external">at_external</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q2">q2</a></span> /\ <span class="id"><a href="compcert.common.LanguageInterface.html#cc_c_query">cc_c_query</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp">injp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#wx">wx</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q1">q1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#q2">q2</a></span> /\ <span class="id"><a href="compcert.cklr.CKLR.html#match_stbls">match_stbls</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp">injp</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#wx">wx</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.se">se</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.tse">tse</a></span> /\<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">S</span>', <span class="id"><a href="compcert.common.LanguageInterface.html#match_reply">match_reply</a></span> (<span class="id"><a href="compcert.common.LanguageInterface.html#cc_c">cc_c</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp">injp</a></span>) <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#wx">wx</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r1">r1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r2">r2</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Clight.html#after_external">after_external</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r1">r1</a></span> <span class="id">S</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>', <span class="id"><a href="compcert.cfrontend.Clight.html#after_external">after_external</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#R">R</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#r2">r2</a></span> <span class="id">R</span>' /\ <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_states">match_states</a></span> <span class="id">S</span>' <span class="id">R</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5152')">Proof.</div>
<div class="proofscript" id="proof5152">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">S</span> <span class="id">R</span> <span class="id">q1</span> <span class="id">HSR</span> <span class="id">Hq1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hq1</span>; <span class="id">inv</span> <span class="id">HSR</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">VFIND</span>; <span class="id">inv</span> <span class="id">VFIND</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">FUNTY</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">MCONT</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span>) <span class="kwd">as</span> <span class="id">SEINJ</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_globalenv">match_cont_globalenv</a></span> <span class="kwd">in</span> <span class="id">SEINJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hvf</span>: <span class="id">vf</span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">vf</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#functions_translated">functions_translated</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">tfd</span> &amp; <span class="id">TFIND</span> &amp; <span class="id">TRFD</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TRFD</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">j</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">MINJ</span>), <span class="id">_</span>. <span class="tactic">intuition</span> <span class="id">idtac</span>.<br/>
&nbsp;&nbsp;- <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">MCONT</span> <span class="id"><a href="compcert.cfrontend.SimplLocals.html#VSet.empty">VSet.empty</a></span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_globalenv">match_cont_globalenv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.GE">GE</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_trans">Pos.le_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">MCONT</span>. <span class="tactic">induction</span> <span class="id">MCONT</span>; <span class="id">cbn</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">cbn</span>; <span class="id">xomega</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION.GE">GE</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_trans">Pos.le_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">MCONT</span>. <span class="tactic">induction</span> <span class="id">MCONT</span>; <span class="id">cbn</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">cbn</span>; <span class="id">xomega</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">wx</span>' &amp; <span class="id">Hwx</span>' &amp; <span class="id">H</span>). <span class="id">inv</span> <span class="id">Hwx</span>'. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H10</span>. <span class="id">eexists</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_incr_bounds">match_cont_incr_bounds</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_cont_extcall">match_cont_extcall</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#PRESERVATION">PRESERVATION</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_program_correct">transf_program_correct</a></span> <span class="id">prog</span> <span class="id">tprog</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#prog">prog</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tprog">tprog</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.common.LanguageInterface.html#cc_c">cc_c</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp">injp</a></span>) (<span class="id"><a href="compcert.common.LanguageInterface.html#cc_c">cc_c</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#semantics1">semantics1</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#prog">prog</a></span>) (<span class="id"><a href="compcert.cfrontend.Clight.html#semantics2">semantics2</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#tprog">tprog</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5153')">Proof.</div>
<div class="proofscript" id="proof5153">
&nbsp;&nbsp;<span class="id">fsim</span> <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_plus">forward_simulation_plus</a></span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">Hse</span>, <span class="id">H</span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal_match">Genv.is_internal_match</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">MATCH</span>)); <span class="tactic">eauto</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> [|] [|] <span class="id">Hf</span>; <span class="id">monadInv</span> <span class="id">Hf</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#initial_states_simulation">initial_states_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#final_states_simulation">final_states_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">cbn</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#external_states_simulation">external_states_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#step_simulation">step_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Commutation with linking </h2>
<br/>
<span class="kwd">Instance</span> <span class="id"><a name="TransfSimplLocalsLink">TransfSimplLocalsLink</a></span> : <span class="id"><a href="compcert.common.Linking.html#TransfLink">TransfLink</a></span> <span class="id"><a href="compcert.cfrontend.SimplLocalsproof.html#match_prog">match_prog</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5154')">Proof.</div>
<div class="proofscript" id="proof5154">
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#link_match_program">Ctypes.link_match_program</a></span>; <span class="tactic">eauto</span>. <br/>
- <span class="tactic">intros</span>.<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#Linker_fundef">Linker_fundef</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#link_fundef">link_fundef</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f1</span>; <span class="id">monadInv</span> <span class="id">H3</span>; <span class="tactic">destruct</span> <span class="id">f2</span>; <span class="id">monadInv</span> <span class="id">H4</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>; <span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id">x</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>; <span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#Internal">Internal</a></span> <span class="id">x</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#external_function_eq">external_function_eq</a></span> <span class="id">e</span> <span class="id">e0</span> &amp;&amp; <span class="id"><a href="compcert.cfrontend.Ctypes.html#typelist_eq">typelist_eq</a></span> <span class="id">t</span> <span class="id">t1</span> &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Ctypes.html#type_eq">type_eq</a></span> <span class="id">t0</span> <span class="id">t2</span> &amp;&amp; <span class="id"><a href="compcert.common.AST.html#calling_convention_eq">calling_convention_eq</a></span> <span class="id">c</span> <span class="id">c0</span>); <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
