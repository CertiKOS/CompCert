
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Inject</title>
<meta name="description" content="Documentation of Coq module Inject" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Inject</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Axioms.html">Axioms</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.CallconvAlgebra.html">CallconvAlgebra</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cklr.CKLR.html">CKLR</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cklr.CKLRAlgebra.html">CKLRAlgebra</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.LanguageInterface.html">LanguageInterface</a></span>.<br/>
<br/>
<br/>
<h1> <span class="bracket"><span class="id">Mem.inject</span></span> as a CKLR </h1>
<br/>
<h2> Separated injections </h2>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="inj_world">inj_world</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="injw">injw</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="injw_meminj">injw_meminj</a></span> :&gt; <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="injw_next_l">injw_next_l</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="injw_next_r">injw_next_r</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>;<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="id">Variant</span> <span class="id"><a name="inj_incr">inj_incr</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#relation">relation</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj_world">inj_world</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="inj_incr_intro">inj_incr_intro</a></span> <span class="id">f</span> <span class="id">f</span>' <span class="id">nb1</span> <span class="id">nb2</span> <span class="id">nb1</span>' <span class="id">nb2</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.cklr.Inject.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#b2">b2</a></span>, <span class="id"><a href="compcert.cklr.Inject.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb1">nb1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b1">b1</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb2">nb2</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb1">nb1</a></span> <span class="id">nb1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb2">nb2</a></span> <span class="id">nb2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb1">nb1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb2">nb2</a></span>) (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> <span class="id">f</span>' <span class="id">nb1</span>' <span class="id">nb2</span>').<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="inj_stbls">inj_stbls</a></span> (<span class="id">w</span>: <span class="id"><a href="compcert.cklr.Inject.html#inj_world">inj_world</a></span>) (<span class="id">se1</span> <span class="id">se2</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">Genv.symtbl</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="inj_stbls_match">inj_stbls_match</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#injw_meminj">injw_meminj</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#se1">se1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#se2">se2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="inj_stbls_next_l">inj_stbls_next_l</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.cklr.Inject.html#se1">se1</a></span>) (<span class="id"><a href="compcert.cklr.Inject.html#injw_next_l">injw_next_l</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="inj_stbls_next_r">inj_stbls_next_r</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.cklr.Inject.html#se2">se2</a></span>) (<span class="id"><a href="compcert.cklr.Inject.html#injw_next_r">injw_next_r</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span>);<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="id">Variant</span> <span class="id"><a name="inj_mem">inj_mem</a></span>: <span class="id">klr</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_world">inj_world</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="inj_mem_intro">inj_mem_intro</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span>)) <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span>.<br/>
<br/>
<h2> Properties </h2>
<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="inj_incr_preo">inj_incr_preo</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#PreOrder">PreOrder</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2443')">Proof.</div>
<div class="proofscript" id="proof2443">
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_refl">Pos.le_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">w</span> <span class="id">w</span>' <span class="id">w</span>'' <span class="id">H</span> <span class="id">H</span>'. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_trans">Pos.le_trans</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span> <span class="id">Hb</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">H6</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hb</span>') <span class="kwd">in</span> <span class="id">Hb</span>''. <span class="id">inv</span> <span class="id">Hb</span>''. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">edestruct</span> <span class="id">H7</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="inj_stbls_subrel">inj_stbls_subrel</a></span>:<br/>
&nbsp;&nbsp;<span class="id">Monotonic</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_stbls">inj_stbls</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span> ++&gt; <span class="id">subrel</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2444')">Proof.</div>
<div class="proofscript" id="proof2444">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">w</span> <span class="id">w</span>' <span class="id">Hw</span> <span class="id">se1</span> <span class="id">se2</span> <span class="id">Hse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hse</span>; <span class="id">inv</span> <span class="id">Hw</span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">cbn</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_incr">Genv.match_stbls_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id"><a name="inj_proj_incr">inj_proj_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="id">Monotonic</span> <span class="id"><a href="compcert.cklr.Inject.html#injw_meminj">injw_meminj</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span> ++&gt; <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2445')">Proof.</div>
<div class="proofscript" id="proof2445">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Hints </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inj_mem_inject">inj_mem_inject</a></span> <span class="id">w</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2446')">Proof.</div>
<div class="proofscript" id="proof2446">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inj_mem_next_l">inj_mem_next_l</a></span> <span class="id">w</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#injw_next_l">injw_next_l</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2447')">Proof.</div>
<div class="proofscript" id="proof2447">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inj_mem_next_r">inj_mem_next_r</a></span> <span class="id">w</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#injw_next_r">injw_next_r</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2448')">Proof.</div>
<div class="proofscript" id="proof2448">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">inj_mem_inject</span> <span class="id">inj_mem_next_l</span> <span class="id">inj_mem_next_r</span>.<br/>
<br/>
<h2> CKLR definition </h2>
<br/>
<span class="kwd">Instance</span> <span class="id"><a name="inj_cklr_kf">inj_cklr_kf</a></span>: <span class="id">KripkeFrame</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj_world">inj_world</a></span>.<br/>
<span class="tactic">split</span>. <span class="tactic">intro</span>. <span class="tactic">exact</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="inj">inj</a></span> : <span class="id"><a href="compcert.cklr.CKLR.html#cklr">cklr</a></span> :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.CKLR.html#Build_cklr">world</a></span> := <span class="id"><a href="compcert.cklr.Inject.html#inj_world">inj_world</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wacc</span> := <span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mi</span> := <span class="id"><a href="compcert.cklr.Inject.html#injw_meminj">injw_meminj</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_stbls</span> := <span class="id"><a href="compcert.cklr.Inject.html#inj_stbls">inj_stbls</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_mem</span> := <span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span>;<br/>
&nbsp;&nbsp;|}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inj_acc_separated">inj_acc_separated</a></span> <span class="id">w</span> <span class="id">w</span>' <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#inj_incr">inj_incr</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id">w</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cklr.Inject.html#w">w</a></span> <span class="id">w</span>' <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2449')">Proof.</div>
<div class="proofscript" id="proof2449">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">Hw</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hnone</span> <span class="id">Hsome</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hm</span>. <span class="id">inv</span> <span class="id">Hw</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_nlt">Pos.le_nlt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2450')">Next Obligation.</div>
<div class="proofscript" id="proof2450">
 <span class="comment">(*&nbsp;mi_acc_separated&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_acc_separated">inj_acc_separated</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2451')">Next Obligation.</div>
<div class="proofscript" id="proof2451">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1. <span class="id">cbn</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2452')">Next Obligation.</div>
<div class="proofscript" id="proof2452">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">cbn</span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inj_cklr_alloc">inj_cklr_alloc</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> (|= <span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> ++&gt; - ==&gt; - ==&gt; (&lt;&gt; <span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> * <span class="id"><a href="compcert.cklr.Valuesrel.html#block_inject_sameofs">block_inject_sameofs</a></span> @@ [<span class="id"><a href="compcert.cklr.Inject.html#injw_meminj">injw_meminj</a></span>])).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2453')">Proof.</div>
<div class="proofscript" id="proof2453">
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">lo</span> <span class="id">hi</span>. <span class="id">cbn</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m1</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="kwd">as</span> [<span class="id">m1</span>' <span class="id">b1</span>] <span class="id">eqn</span>:<span class="id">Hm1</span>'.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">f</span>' &amp; <span class="id">m2</span>' &amp; <span class="id">b2</span> &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>' &amp; <span class="id">Hf</span>'1 &amp; <span class="id">Hb2</span> &amp; <span class="id">Hf</span>'2);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> <span class="id">f</span>' (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>') (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>')); <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b1</span>' <span class="id">b2</span>' <span class="id">delta</span>' <span class="id">Hb</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b1</span>' <span class="id">b1</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">b2</span>' = <span class="id">b2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">Hm1</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">Hm2</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">Hf</span>'2 <span class="id">_</span> <span class="id">n</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span> <span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">m1</span>'); <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span> <span class="id">m2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">m2</span>'); <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">cbn</span>. <span class="tactic">red</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2454')">Next Obligation.</div>
<div class="proofscript" id="proof2454">
 <span class="comment">(*&nbsp;Mem.alloc&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_cklr_alloc">inj_cklr_alloc</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2455')">Next Obligation.</div>
<div class="proofscript" id="proof2455">
 <span class="comment">(*&nbsp;Mem.free&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> [[<span class="id">b1</span> <span class="id">lo1</span>] <span class="id">hi1</span>] [[<span class="id">b2</span> <span class="id">lo2</span>] <span class="id">hi2</span>] <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">lo1</span> <span class="id">hi1</span>) <span class="kwd">as</span> [<span class="id">m1</span>'|] <span class="id">eqn</span>:<span class="id">Hm1</span>'; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">cbn</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span> <span class="kwd">as</span> (<span class="id">m2</span>' &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">lo1</span> + <span class="id">delta</span> + <span class="id">sz</span>) <span class="kwd">with</span> (<span class="id">lo1</span> + <span class="id">sz</span> + <span class="id">delta</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_refl">Pos.le_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2456')">Next Obligation.</div>
<div class="proofscript" id="proof2456">
 <span class="comment">(*&nbsp;Mem.load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hptr</span>].<br/>
&nbsp;&nbsp;<span class="id">cbn</span> <span class="kwd">in</span> *. <span class="tactic">red</span>. <span class="id">inv</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span>) <span class="kwd">as</span> [<span class="id">v1</span>|] <span class="id">eqn</span>:<span class="id">Hv1</span>; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">Mem.load_inject</a></span> <span class="kwd">as</span> (<span class="id">v2</span> &amp; <span class="id">Hv2</span> &amp; <span class="id">Hv</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hv2</span>. <span class="tactic">repeat</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>).<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2457')">Next Obligation.</div>
<div class="proofscript" id="proof2457">
 <span class="comment">(*&nbsp;Mem.store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hptr</span>] <span class="id">v1</span> <span class="id">v2</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">Hv</span> |- *. <span class="id">cbn</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">v1</span>) <span class="kwd">as</span> [<span class="id">m1</span>'|] <span class="id">eqn</span>:<span class="id">Hm1</span>'; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inject">Mem.store_mapped_inject</a></span> <span class="kwd">as</span> (<span class="id">m2</span>' &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_refl">Pos.le_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2458')">Next Obligation.</div>
<div class="proofscript" id="proof2458">
 <span class="comment">(*&nbsp;Mem.loadbytes&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hptr</span>] <span class="id">sz</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="id">cbn</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">vs1</span>|] <span class="id">eqn</span>:<span class="id">Hvs1</span>; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inject">Mem.loadbytes_inject</a></span> <span class="kwd">as</span> (<span class="id">vs2</span> &amp; <span class="id">Hvs2</span> &amp; <span class="id">Hvs</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hvs2</span>. <span class="id">rauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2459')">Next Obligation.</div>
<div class="proofscript" id="proof2459">
 <span class="comment">(*&nbsp;Mem.storebytes&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> [<span class="id">b1</span> <span class="id">ofs1</span>] [<span class="id">b2</span> <span class="id">ofs2</span>] <span class="id">Hptr</span> <span class="id">vs1</span> <span class="id">vs2</span> <span class="id">Hvs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">Hvs</span> |- *. <span class="id">cbn</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> [<span class="id">m1</span>'|] <span class="id">eqn</span>:<span class="id">Hm1</span>'; [|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">vs1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> \/ <span class="id">vs1</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="kwd">as</span> [<span class="id">Hvs1</span>|<span class="id">Hvs1</span>].<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">vs1</span>; <span class="id">constructor</span>; <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">Hvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">Mem.range_perm_storebytes</a></span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">Hm2</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span>. <span class="tactic">simpl</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span> <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span> <span class="id">m2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_empty_inject">Mem.storebytes_empty_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="compcert.cklr.Valuesrel.html#ptr_inject">ptr_inject</a></span> <span class="id">f</span> (<span class="id">b1</span>, <span class="id">ofs1</span>) (<span class="id">b2</span>, <span class="id">ofs2</span>)) <span class="kwd">as</span> <span class="id">Hptr</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hptr</span> <span class="kwd">as</span> [<span class="id">Hptr</span>|<span class="id">Hptr</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hptr</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> [<span class="id">xb1</span> <span class="id">xofs1</span> <span class="id">xb2</span> <span class="id">delta</span> <span class="id">Hb</span>]]; <span class="tactic">clear</span> <span class="id">Hptr</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Valuesrel.html#ptrbits_unsigned">ptrbits_unsigned</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span> <span class="kwd">in</span> <span class="id">Hm1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hm1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vs1</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hptr</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inject">Mem.storebytes_mapped_inject</a></span> <span class="kwd">as</span> (<span class="id">m2</span>' &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>. <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_refl">Pos.le_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2460')">Next Obligation.</div>
<div class="proofscript" id="proof2460">
 <span class="comment">(*&nbsp;Mem.perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span>] <span class="id">p</span> <span class="id">k</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject">Mem.perm_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2461')">Next Obligation.</div>
<div class="proofscript" id="proof2461">
 <span class="comment">(*&nbsp;Mem.valid_block&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span> <span class="id">nb1</span> <span class="id">nb2</span>] <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">b1</span> <span class="id">b2</span> [<span class="id">delta</span> <span class="id">Hb</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2462')">Next Obligation.</div>
<div class="proofscript" id="proof2462">
 <span class="comment">(*&nbsp;Mem.meminj_no_overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">nb1</span> <span class="id">nb2</span> <span class="id">Hm</span> <span class="id">Hnb1</span> <span class="id">Hnb2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">Mem.mi_no_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2463')">Next Obligation.</div>
<div class="proofscript" id="proof2463">
 <span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">nb1</span> <span class="id">nb2</span> <span class="id">Hm</span> <span class="id">Hnb1</span> <span class="id">Hnb2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="id">ofs1</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2464')">Next Obligation.</div>
<div class="proofscript" id="proof2464">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">nb1</span> <span class="id">nb2</span> <span class="id">Hm</span> <span class="id">Hnb1</span> <span class="id">Hnb2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.aligned_area_inject">Mem.aligned_area_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2465')">Next Obligation.</div>
<div class="proofscript" id="proof2465">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">nb1</span> <span class="id">nb2</span> <span class="id">Hm</span> <span class="id">Hnb1</span> <span class="id">Hnb2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.disjoint_or_equal_inject">Mem.disjoint_or_equal_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2466')">Next Obligation.</div>
<div class="proofscript" id="proof2466">
 <span class="comment">(*&nbsp;perm_inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">nb1</span> <span class="id">nb2</span> <span class="id">Hm</span> <span class="id">Hnb1</span> <span class="id">Hnb2</span>].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject_inv">Mem.perm_inject_inv</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nextblock_inject">nextblock_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="id">Monotonic</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(|= <span class="id"><a href="compcert.cklr.Inject.html#inj_mem">inj_mem</a></span> ++&gt; (&lt;&gt; <span class="id"><a href="compcert.cklr.Valuesrel.html#block_inject_sameofs">block_inject_sameofs</a></span> @@ [<span class="id"><a href="compcert.cklr.Inject.html#injw_meminj">injw_meminj</a></span>])).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2467')">Proof.</div>
<div class="proofscript" id="proof2467">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">w</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m1</span> 0 0) <span class="kwd">as</span> <span class="id">mb</span> <span class="id">eqn</span>: <span class="id">Hmb1</span>. <span class="tactic">destruct</span> <span class="id">mb</span> <span class="kwd">as</span> [<span class="id">m1</span>' <span class="id">b1</span>].<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m2</span> 0 0) <span class="kwd">as</span> <span class="id">mb</span> <span class="id">eqn</span>: <span class="id">Hmb2</span>. <span class="tactic">destruct</span> <span class="id">mb</span> <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">b2</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id">Hmb1</span>. <span class="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id">Hmb2</span>. <span class="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_cklr_alloc">inj_cklr_alloc</a></span> <span class="kwd">as</span> (<span class="id">w</span>' &amp; <span class="id">Hw</span>' &amp; <span class="id">Hm</span>'). <span class="tactic">apply</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Hmb1</span> <span class="kwd">in</span> <span class="id">Hm</span>'. <span class="tactic">rewrite</span> &lt;- <span class="id">Hmb2</span> <span class="kwd">in</span> <span class="id">Hm</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>'. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">Hm</span>'.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2468')">Next Obligation.</div>
<div class="proofscript" id="proof2468">
 <span class="comment">(*&nbsp;nextblock&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">w</span>' &amp; <span class="id">Hw</span>' &amp; <span class="id">Hm</span>').<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">Hm</span>'. <span class="id">inv</span> <span class="id">Hw</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Useful theorems </h1>
<br/>
<h2> Composition lemmas </h2>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="compose_meminj_incr">compose_meminj_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> ++&gt; <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> ++&gt; <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span>) <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2469')">Proof.</div>
<div class="proofscript" id="proof2469">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">Hf</span> <span class="id">g1</span> <span class="id">g2</span> <span class="id">Hg</span> <span class="id">b</span> <span class="id">xb</span> <span class="id">xdelta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>'; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Hf</span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">g1</span> <span class="id">b</span>') <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>'] | ] <span class="id">eqn</span>:<span class="id">Hb</span>''; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Hg</span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<h2> The <span class="bracket"><span class="id">meminj_dom</span></span> construction </h2>
<br/>
<div class="doc">The following injection is a sub-injection of <span class="bracket"><span class="id">Mem.flat_inj</span></span>,
  which contains only blocks mapped by the original injection <span class="bracket"><span class="id">f</span></span>.
  Like <span class="bracket"><span class="id">Mem.flat_inj</span></span>, it is a neutral element for composition
  with <span class="bracket"><span class="id">f</span></span> on the left, but the fact that its domain and codomain
  correspond to the domain of <span class="bracket"><span class="id">f</span></span> yields many desirable properties
  that do not hold for <span class="bracket"><span class="id">Mem.flat_inj</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="meminj_dom">meminj_dom</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>): <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">b</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b">b</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#b">b</a></span>, 0) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="meminj_dom_incr">meminj_dom_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>) (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> ++&gt; <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2470')">Proof.</div>
<div class="proofscript" id="proof2470">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">f</span> <span class="id">g</span> <span class="id">Hfg</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">Hb</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[? ?] | ] <span class="id">eqn</span>:<span class="id">Hb</span>'; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">Hb</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Hfg</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="meminj_dom_compose">meminj_dom_compose</a></span> <span class="id">f</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> = <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2471')">Proof.</div>
<div class="proofscript" id="proof2471">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">functional_extensionality</a></span>; <span class="tactic">intros</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>, <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">ofs</span>] | ] <span class="id">eqn</span>:<span class="id">Hfb</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hfb</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (0 + <span class="id">ofs</span>) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="meminj_dom_idemp">meminj_dom_idemp</a></span> <span class="id">f</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) = <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2472')">Proof.</div>
<div class="proofscript" id="proof2472">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">functional_extensionality</a></span>; <span class="tactic">intro</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="meminj_dom_flat_inj">meminj_dom_flat_inj</a></span> <span class="id">nb</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb">nb</a></span>) = <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="id"><a href="compcert.cklr.Inject.html#nb">nb</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2473')">Proof.</div>
<div class="proofscript" id="proof2473">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">functional_extensionality</a></span>; <span class="tactic">intros</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="block_inject_dom">block_inject_dom</a></span> <span class="id">f</span> <span class="id">b1</span> <span class="id">b2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Valuesrel.html#block_inject">block_inject</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b1">b1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Valuesrel.html#block_inject">block_inject</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#b1">b1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b1">b1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2474')">Proof.</div>
<div class="proofscript" id="proof2474">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">delta</span> &amp; <span class="id">Hb</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> 0.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hb</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_inject_dom">val_inject_dom</a></span> <span class="id">f</span> <span class="id">v1</span> <span class="id">v2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#v1">v1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#v1">v1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#v1">v1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2475')">Proof.</div>
<div class="proofscript" id="proof2475">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="memval_inject_dom">memval_inject_dom</a></span> <span class="id">f</span> <span class="id">v1</span> <span class="id">v2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#v1">v1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#v1">v1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#v1">v1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2476')">Proof.</div>
<div class="proofscript" id="proof2476">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.Inject.html#val_inject_dom">val_inject_dom</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_inject_list_dom">val_inject_list_dom</a></span> <span class="id">f</span> <span class="id">vs1</span> <span class="id">vs2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#vs1">vs1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#vs2">vs2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#vs1">vs1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#vs1">vs1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2477')">Proof.</div>
<div class="proofscript" id="proof2477">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.cklr.Inject.html#val_inject_dom">val_inject_dom</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_mem_inj_dom">mem_mem_inj_dom</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">Mem.mem_inj</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">Mem.mem_inj</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2478')">Proof.</div>
<div class="proofscript" id="proof2478">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span> <span class="id">Hb1</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>); <span class="id">inv</span> <span class="id">Hb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">Hb1</span> <span class="id">Hrp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b1</span>' <span class="id">delta</span>'] | ]; <span class="id">inv</span> <span class="id">Hb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="tactic">at</span> 1. <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb1</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b1</span>' <span class="id">delta</span>'] | ] <span class="id">eqn</span>:<span class="id">Hb1</span>'; <span class="id">inv</span> <span class="id">Hb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.Inject.html#memval_inject_dom">memval_inject_dom</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">Mem.mi_memval</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_inject_dom">mem_inject_dom</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2479')">Proof.</div>
<div class="proofscript" id="proof2479">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.Inject.html#mem_mem_inj_dom">mem_mem_inj_dom</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_inj">Mem.mi_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_freeblocks">Mem.mi_freeblocks</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>'] | ] <span class="id">eqn</span>:<span class="id">Hb</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>); <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b2</span>); <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stbls_dom">match_stbls_dom</a></span> <span class="id">f</span> <span class="id">se1</span> <span class="id">se2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#se1">se1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#se2">se2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#se1">se1</a></span> <span class="id"><a href="compcert.cklr.Inject.html#se1">se1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2480')">Proof.</div>
<div class="proofscript" id="proof2480">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hse</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">Genv.mge_dom</a></span> <span class="kwd">as</span> (<span class="id">b2</span> &amp; <span class="id">Hb2</span>); <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Hb2</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">edestruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.mge_dom">Genv.mge_dom</a></span> <span class="kwd">as</span> (<span class="id">b3</span> &amp; <span class="id">Hb3</span>); <span class="tactic">eauto</span>. <span class="id">exists</span> <span class="id">b2</span>. <span class="tactic">rewrite</span> <span class="id">Hb3</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loc_unmapped_dom">loc_unmapped_dom</a></span> <span class="id">f</span> <span class="id">b</span> <span class="id">ofs</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.Inject.html#b">b</a></span> <span class="id"><a href="compcert.cklr.Inject.html#ofs">ofs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.cklr.Inject.html#f">f</a></span> <span class="id"><a href="compcert.cklr.Inject.html#b">b</a></span> <span class="id"><a href="compcert.cklr.Inject.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2481')">Proof.</div>
<div class="proofscript" id="proof2481">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>, <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>] | ].<br/>
&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<h2> CKLR composition theorems </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inj_inj">inj_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.CKLRAlgebra.html#subcklr">subcklr</a></span> <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span> @ <span class="id"><a href="compcert.cklr.Inject.html#inj">inj</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2482')">Proof.</div>
<div class="proofscript" id="proof2482">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">w</span> <span class="id">se1</span> <span class="id">se2</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hse</span> <span class="id">Hm</span>. <span class="tactic">destruct</span> <span class="id">Hm</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>)); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">exists</span> <span class="id">se1</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hse</span>. <span class="id">econstructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.Inject.html#match_stbls_dom">match_stbls_dom</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.cklr.Inject.html#inj_mem_intro">inj_mem_intro</a></span>, <span class="id"><a href="compcert.cklr.Inject.html#mem_inject_dom">mem_inject_dom</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom_compose">meminj_dom_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> [<span class="id">w12</span>' <span class="id">w23</span>'] <span class="id">m1</span>' <span class="id">m3</span>' (<span class="id">m2</span>' &amp; <span class="id">H12</span>' &amp; <span class="id">H23</span>') [<span class="id">Hw12</span>' <span class="id">Hw23</span>']. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>' <span class="kwd">as</span> [<span class="id">f12</span>' <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm12</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H23</span>' <span class="kwd">as</span> [<span class="id">f23</span>' <span class="id">xm2</span>' <span class="id">xm3</span>' <span class="id">Hm23</span>']. <span class="tactic">clear</span> <span class="id">H23</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hw12</span>' <span class="kwd">as</span> [? ? ? ? ? ? <span class="id">Hf12</span>' <span class="id">SEP12</span>']. <span class="tactic">clear</span> <span class="id">Hw12</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hw23</span>' <span class="kwd">as</span> [? ? ? ? ? ? <span class="id">Hf23</span>' <span class="id">SEP23</span>']. <span class="tactic">clear</span> <span class="id">Hw23</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id"><a href="compcert.cklr.Inject.html#injw">injw</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id">f12</span>' <span class="id">f23</span>') <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject_compose">Mem.inject_compose</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.cklr.Inject.html#meminj_dom_compose">meminj_dom_compose</a></span> <span class="id">f</span>). <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span> <span class="id">Hb</span>'. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="kwd">in</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f12</span>' <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">bi</span> <span class="id">delta12</span>] | ] <span class="id">eqn</span>:<span class="id">Hb1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f23</span>' <span class="id">bi</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">delta23</span>] | ] <span class="id">eqn</span>:<span class="id">Hb2</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">SEP12</span>'; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Inject.html#meminj_dom">meminj_dom</a></span>. <span class="tactic">rewrite</span> <span class="id">Hb</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">bi</span>) <span class="kwd">as</span> [[? ?] | ] <span class="id">eqn</span>:<span class="id">Hfbi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span> <span class="kwd">in</span> <span class="id">Hfbi</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">Hfbi</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">SEP23</span>'; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">cbn</span>. <span class="id">rstep</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
