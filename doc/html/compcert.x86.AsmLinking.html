
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module AsmLinking</title>
<meta name="description" content="Documentation of Coq module AsmLinking" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module AsmLinking</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.LanguageInterface.html">LanguageInterface</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.SmallstepLinking.html">SmallstepLinking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Asm.html">Asm</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="linked">linked</a></span> {<span class="id">A</span>} `{<span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#A">A</a></span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">A</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="linked_n">linked_n</a></span> : <span class="id"><a href="compcert.x86.AsmLinking.html#linked">linked</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="linked_l">linked_l</a></span> <span class="id">a</span> : <span class="id"><a href="compcert.x86.AsmLinking.html#linked">linked</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="linked_r">linked_r</a></span> <span class="id">a</span> : <span class="id"><a href="compcert.x86.AsmLinking.html#linked">linked</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="linked_lr">linked_lr</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">c</span> : <span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#c">c</a></span> -&gt; <span class="id"><a href="compcert.x86.AsmLinking.html#linked">linked</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#c">c</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_def_link">find_def_link</a></span> <span class="id">se</span> (<span class="id">p1</span> <span class="id">p2</span> <span class="id">p</span>: <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) <span class="id">b</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p1">p1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p2">p2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#linked">linked</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p1">p1</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p2">p2</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4588')">Proof.</div>
<div class="proofscript" id="proof4588">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hp</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Linking.html#link_prog_inv">link_prog_inv</a></span> <span class="kwd">in</span> <span class="id">Hp</span> <span class="kwd">as</span> (<span class="id">_</span> &amp; <span class="id">Hdefs</span> &amp; <span class="id">Hp</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_spec">Genv.find_def_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">p</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Linking.html#prog_defmap_elements">prog_defmap_elements</a></span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)!<span class="id">i</span> <span class="id">eqn</span>:<span class="id">H1</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)!<span class="id">i</span> <span class="id">eqn</span>:<span class="id">H2</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hdefs</span> <span class="kwd">as</span> (<span class="id">_</span> &amp; <span class="id">_</span> &amp; <span class="id">gd</span> &amp; <span class="id">Hgd</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">cbn</span>. <span class="tactic">rewrite</span> <span class="id">Hgd</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_def_linkorder">find_def_linkorder</a></span> <span class="id">se</span> (<span class="id">p</span> <span class="id">p</span>': <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) <span class="id">b</span> <span class="id">gd</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">gd</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id">p</span>') <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#gd">gd</a></span> <span class="id">gd</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4589')">Proof.</div>
<div class="proofscript" id="proof4589">
&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_spec">Genv.find_def_spec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">_</span> &amp; <span class="id">_</span> &amp; <span class="id">Hdefs</span>) <span class="id">Hgd</span>. <span class="id">edestruct</span> <span class="id">Hdefs</span> <span class="kwd">as</span> (<span class="id">gd</span>' &amp; <span class="id">Hgd</span>' &amp; <span class="id">Hgg</span>' &amp; <span class="id">_</span>); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_funct_ptr_linkorder">find_funct_ptr_linkorder</a></span> <span class="id">se</span> (<span class="id">p</span> <span class="id">p</span>': <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) <span class="id">b</span> <span class="id">fd</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#fd">fd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fd</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id">p</span>') <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fd</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#fd">fd</a></span> <span class="id">fd</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4590')">Proof.</div>
<div class="proofscript" id="proof4590">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="kwd">in</span> *; <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id">se</span> <span class="id">p</span>)) <span class="id">eqn</span>:<span class="id">Hf</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_def_linkorder">find_def_linkorder</a></span> <span class="kwd">as</span> (<span class="id">fd</span>' &amp; <span class="id">Hfd</span> &amp; <span class="id">Hlo</span>); <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Hfd</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">Hlo</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_internal_ptr_linkorder">find_internal_ptr_linkorder</a></span> <span class="id">se</span> (<span class="id">p</span> <span class="id">p</span>': <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) <span class="id">b</span> <span class="id">f</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id">p</span>') <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4591')">Proof.</div>
<div class="proofscript" id="proof4591">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_funct_ptr_linkorder">find_funct_ptr_linkorder</a></span> <span class="kwd">as</span> (? &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_funct_linkorder">find_funct_linkorder</a></span> <span class="id">se</span> (<span class="id">p</span> <span class="id">p</span>': <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) <span class="id">vf</span> <span class="id">fd</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#vf">vf</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#fd">fd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fd</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id">p</span>') <span class="id"><a href="compcert.x86.AsmLinking.html#vf">vf</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">fd</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#fd">fd</a></span> <span class="id">fd</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4592')">Proof.</div>
<div class="proofscript" id="proof4592">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vf</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_funct_ptr_linkorder">find_funct_ptr_linkorder</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_internal_linkorder">find_internal_linkorder</a></span> <span class="id">se</span> (<span class="id">p</span> <span class="id">p</span>': <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) <span class="id">vf</span> <span class="id">f</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#vf">vf</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#se">se</a></span> <span class="id">p</span>') <span class="id"><a href="compcert.x86.AsmLinking.html#vf">vf</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4593')">Proof.</div>
<div class="proofscript" id="proof4593">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vf</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_internal_ptr_linkorder">find_internal_ptr_linkorder</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FOO">FOO</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">p1</span> <span class="id">p2</span> <span class="id">p</span>: <span class="id"><a href="compcert.x86.Asm.html#program">program</a></span>) (<span class="id">Hp</span>: <span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p1">p1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p2">p2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#p">p</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="FOO.p_">p_</a></span> <span class="id">i</span> := <span class="kwd">match</span> <span class="id"><a href="compcert.x86.AsmLinking.html#i">i</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p1">p1</a></span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p2">p2</a></span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="FOO.L">L</a></span> <span class="id">i</span> := <span class="id"><a href="compcert.x86.Asm.html#semantics">semantics</a></span> (<span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p_">p_</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#i">i</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="p_linkorder">p_linkorder</a></span> <span class="id">i</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> (<span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p_">p_</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#i">i</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4594')">Proof.</div>
<div class="proofscript" id="proof4594">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Linking.html#link_linkorder">link_linkorder</a></span> <span class="kwd">in</span> <span class="id">Hp</span> <span class="kwd">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>; <span class="id">cbn</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="leb_refl">leb_refl</a></span> <span class="id">b</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4595')">Proof.</div>
<div class="proofscript" id="proof4595">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">cbn</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="leb_true">leb_true</a></span> <span class="id">b</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4596')">Proof.</div>
<div class="proofscript" id="proof4596">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">cbn</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">p_linkorder</span> <span class="id">leb_refl</span> <span class="id">leb_true</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="FOO.SE">SE</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">se</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">Genv.symtbl</a></span>) (<span class="id">init_nb</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>).<br/>
<br/>
<h2> Simulation relation </h2>
<br/>
<div class="doc">The following predicate asserts that the composite
      semantics' activation stack is well-formed, with a given
      top-level "inner block" threshold. This threshold is the
      initial value of <span class="bracket"><span class="id">Mem.nextblock</span></span> for the current activation.
      ... </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="match_stack">match_stack</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.SmallstepLinking.html#frame">frame</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.L">L</a></span>) -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="match_stack_top">match_stack_top</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_stack">match_stack</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="match_stack_cons">match_stack_cons</a></span> <span class="id">i</span> <span class="id">S</span> <span class="id">s</span> <span class="id">b</span> <span class="id">b</span>' :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#s">s</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_stack">match_stack</a></span> (<span class="id"><a href="compcert.common.SmallstepLinking.html#st">st</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.L">L</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#i">i</a></span> (<span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>, <span class="id"><a href="compcert.x86.AsmLinking.html#S">S</a></span>) :: <span class="id"><a href="compcert.x86.AsmLinking.html#s">s</a></span>) <span class="id">b</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_stack_nextblock">match_stack_nextblock</a></span> <span class="id">k</span> <span class="id">b</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#k">k</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4597')">Proof.</div>
<div class="proofscript" id="proof4597">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Liveness of the current component vs. whole program.
      Most of the time, the currently executing component and
      the whole program will both be running. They can also
      simultaneously reach a final state, in which case the
      composed semantics will unwind all current activations and
      eventually reach a final state as a whole. However,
      during cross-component returns it is usually the case that
      the currently executing component reaches a final state
      while the whole program is still running (presumably after
      an internal return). This can only happen when the stack
      contains more than one activation, that is when the current
      component's "inner block" threshold is strictly greater
      than the whole program one.
      The definition below formalizes these cases. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="match_liveness">match_liveness</a></span> (<span class="id">nb</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="match_liveness_refl">match_liveness_refl</a></span> <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="match_liveness_return">match_liveness_return</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_inner_sp">match_inner_sp</a></span> <span class="id">nb</span> <span class="id">sp</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#sp">sp</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4598')">Proof.</div>
<div class="proofscript" id="proof4598">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hnb</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span>. <span class="tactic">destruct</span> <span class="id">sp</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness_refl">match_liveness_refl</a></span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">cbn</span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span>; <span class="tactic">auto</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">match_inner_sp</span>.<br/>
<br/>
<div class="doc">To match the state of the composite semantics with that
      of the whole program, we require that the activation stack
      be well-formed, that liveness follow the above discipline,
      and that the top-level state be otherwise equal to the
      whole-program state. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.SmallstepLinking.html#frame">frame</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.L">L</a></span>) -&gt; <span class="id"><a href="compcert.x86.Asm.html#state">Asm.state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="match_states_intro">match_states_intro</a></span> <span class="id">i</span> <span class="id">nb</span> <span class="id">k</span> (<span class="id">rs</span>: <span class="id"><a href="compcert.x86.Asm.html#regset">regset</a></span>) <span class="id">m</span> <span class="id">live1</span> <span class="id">live2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#k">k</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span>#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live1">live1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live2">live2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> (<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span>#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#live2">live2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.common.SmallstepLinking.html#st">st</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.L">L</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#i">i</a></span> (<span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span>, <span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live1">live1</a></span>) :: <span class="id"><a href="compcert.x86.AsmLinking.html#k">k</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live2">live2</a></span>).<br/>
<br/>
<h2> Simulation properties </h2>
<br/>
<h3> <span class="bracket"><span class="id">exec_instr</span></span> </h3>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_load_nextblock">exec_load_nextblock</a></span> <span class="id">nb</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">a</span> <span class="id">rs</span> <span class="id">rd</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_load">exec_load</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#chunk">chunk</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rd">rd</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4599')">Proof.</div>
<div class="proofscript" id="proof4599">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#exec_load">exec_load</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_load_live">exec_load_live</a></span> <span class="id">b</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">a</span> <span class="id">rs</span> <span class="id">rd</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_load">exec_load</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#chunk">chunk</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rd">rd</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4600')">Proof.</div>
<div class="proofscript" id="proof4600">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">cut</span> (<span class="id">live</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>); [<span class="tactic">intro</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#exec_load">exec_load</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_store_nextblock">exec_store_nextblock</a></span> <span class="id">nb</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">a</span> <span class="id">rs</span> <span class="id">rd</span> <span class="id">lr</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_store">exec_store</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#chunk">chunk</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rd">rd</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#lr">lr</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4601')">Proof.</div>
<div class="proofscript" id="proof4601">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#exec_store">exec_store</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86.Asm.html#eval_addrmode">eval_addrmode</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id">eqn</span>:<span class="id">Hm</span>'; <span class="tactic">inversion</span> 1; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span> <span class="kwd">in</span> <span class="id">Hm</span>'. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_store_live">exec_store_live</a></span> <span class="id">b</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">a</span> <span class="id">rs</span> <span class="id">rd</span> <span class="id">lr</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_store">exec_store</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#chunk">chunk</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#a">a</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rd">rd</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#lr">lr</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4602')">Proof.</div>
<div class="proofscript" id="proof4602">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">cut</span> (<span class="id">live</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>); [<span class="tactic">intro</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#leb_true">leb_true</a></span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#exec_store">exec_store</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="goto_label_nextblock">goto_label_nextblock</a></span> <span class="id">nb</span> <span class="id">f</span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#goto_label">goto_label</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#l">l</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4603')">Proof.</div>
<div class="proofscript" id="proof4603">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#goto_label">goto_label</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86.Asm.html#label_pos">label_pos</a></span>, (<span class="id">rs</span> <span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span>); <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="goto_label_live">goto_label_live</a></span> <span class="id">b</span> <span class="id">f</span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#goto_label">goto_label</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#l">l</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#b">b</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4604')">Proof.</div>
<div class="proofscript" id="proof4604">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">cut</span> (<span class="id">live</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>); [<span class="tactic">intro</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#leb_true">leb_true</a></span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#goto_label">goto_label</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86.Asm.html#label_pos">label_pos</a></span>, (<span class="id">rs</span> <span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span>); <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_load_nextblock</span> <span class="id">exec_store_nextblock</span> <span class="id">goto_label_nextblock</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_load_live</span> <span class="id">exec_store_live</span> <span class="id">goto_label_live</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="exec_instr_match">exec_instr_match</a></span> <span class="id">nb</span> <span class="id">f</span> <span class="id">instr</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#instr">instr</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">live</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#f">f</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#instr">instr</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> = <span class="kwd">Next</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id">rs</span>'#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live">live</a></span> <span class="id">live</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> (<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> (<span class="id">rs</span>' <span class="id"><a href="compcert.x86.Asm.html#RSP">RSP</a></span>)) <span class="id">live</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4605')">Proof.</div>
<div class="proofscript" id="proof4605">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hnb</span> <span class="id">Hm</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">instr</span>; <span class="id">cbn</span> <span class="kwd">in</span> <span class="id">H</span> |- *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lazymatch</span> <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>) = <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.x86.Asm.html#Stuck">Stuck</a></span> = <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Next</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> 10 <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness_refl">match_liveness_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Pallocframe&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span> <span class="kwd">in</span> <span class="id">Heqo0</span>. <span class="tactic">rewrite</span> <span class="id">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span> <span class="kwd">in</span> <span class="id">Heqo</span>. <span class="tactic">rewrite</span> <span class="id">Heqo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span> <span class="kwd">in</span> <span class="id">Heqp0</span>. <span class="tactic">rewrite</span> <span class="id">Heqp0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">intuition</span> (<span class="tactic">eauto</span>; <span class="id">xomega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Pfreeframe&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span> <span class="kwd">in</span> <span class="id">Heqo1</span>. <span class="tactic">rewrite</span> <span class="id">Heqo1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">intuition</span> (<span class="tactic">eauto</span>; <span class="id">xomega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<h3> <span class="bracket"><span class="id">step</span></span> </h3>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="step_match">step_match</a></span> <span class="id">i</span> <span class="id">nb</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">live1</span> <span class="id">live2</span> <span class="id">live1</span>' <span class="id">t</span> <span class="id">rs</span>' <span class="id">m</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#step">step</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> (<span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p_">p_</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#i">i</a></span>)) (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live1">live1</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#t">t</a></span> (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live1</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span>#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live1">live1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live2">live2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">live2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#step">step</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#rs">rs</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#m">m</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#live2">live2</a></span>) <span class="id"><a href="compcert.x86.AsmLinking.html#t">t</a></span> (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id">rs</span>' <span class="id">m</span>' <span class="id">live2</span>') /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness">match_liveness</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#nb">nb</a></span> <span class="id">rs</span>'#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span> <span class="id">live1</span>' <span class="id">live2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#leb">leb</a></span> (<span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.init_nb">init_nb</a></span> <span class="id">rs</span>'#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span>) <span class="id">live2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4606')">Proof.</div>
<div class="proofscript" id="proof4606">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">Hlive</span> <span class="id">Hnb</span> <span class="id">Hm</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">Hlive</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;instruction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_internal_ptr_linkorder">find_internal_ptr_linkorder</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#exec_instr_match">exec_instr_match</a></span> <span class="kwd">as</span> (? &amp; ? &amp; ? &amp; ? &amp; ?); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> 10 <span class="kwd">using</span> <span class="id"><a href="compcert.x86.Asm.html#exec_step_internal">exec_step_internal</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_internal_ptr_linkorder">find_internal_ptr_linkorder</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">eauto</span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.Asm.html#exec_step_builtin">exec_step_builtin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">Events.external_call_nextblock</a></span> <span class="kwd">in</span> <span class="id">H11</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;external&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE.se">se</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span>) <span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#External">External</a></span> <span class="id">ef</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_funct_ptr_linkorder">find_funct_ptr_linkorder</a></span> <span class="kwd">as</span> (<span class="id">fd</span> &amp; <span class="id">Hfd</span> &amp; <span class="id">Hlo</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ef</span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="id">inv</span> <span class="id">Hlo</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.x86.Asm.html#Pregmap.set">Pregmap.set</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.x86.Asm.html#RSP">RSP</a></span>) <span class="kwd">with</span> <span class="id">rs</span>#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.AST.html#ef_sig">ef_sig</a></span>, <span class="id">sig_res</span> <span class="kwd">as</span> [[]|]; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.Asm.html#exec_step_external">exec_step_external</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">Events.external_call_nextblock</a></span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.SE">SE</a></span>.<br/>
<br/>
<div class="doc">The measure we use for the simulation is somewhat subtle.
    There are two kinds of stuttering steps which occur when we
    switch between components. On cross-component calls, the PC
    initially points to an external function, but points to an
    internal function again once we've switched to the right
    component. On cross-component returns, the size of the
    activation stack will decrease. The two cases can be
    distinguished by the fact that <span class="bracket"><span class="id">live</span></span> is always true when
    performing cross-component calls, and is at least initially
    false when performing cross-component returns.
    Together with the fact the the stack size will increase by
    one when performing a call, we can massage these different
    criteria together and obtain the following measure. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="kwd">measure</span> (<span class="id">S</span> : <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">Genv.symtbl</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.SmallstepLinking.html#frame">frame</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.L">L</a></span>)): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.x86.AsmLinking.html#S">S</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">se</span>, <span class="id"><a href="compcert.common.SmallstepLinking.html#st">st</a></span> <span class="id">i</span> (<span class="id">nb</span>, <span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id">rs</span> <span class="id">m</span> <span class="id">live</span>) :: <span class="id">k</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">k</span> +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">live</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id">se</span> (<span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p_">p_</a></span> <span class="id">i</span>)) <span class="id">rs</span>#<span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#External">External</a></span> <span class="id">_</span>) =&gt; 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="foo">foo</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.LanguageInterface.html#cc_id">cc_id</a></span> <span class="id"><a href="compcert.common.LanguageInterface.html#cc_id">cc_id</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SmallstepLinking.html#semantics">SmallstepLinking.semantics</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.L">L</a></span> (<span class="id"><a href="compcert.common.AST.html#erase_program">erase_program</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.x86.Asm.html#semantics">semantics</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4607')">Proof.</div>
<div class="proofscript" id="proof4607">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#Forward_simulation">Forward_simulation</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fsim_order</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#ltof">ltof</a></span> <span class="id">_</span> <span class="kwd">measure</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fsim_match_states</span> := <span class="kwd">fun</span> <span class="id">se1</span> <span class="id">se2</span> <span class="id">w</span> <span class="id">idx</span> <span class="id">s1</span> '(<span class="id">init_nb</span>, <span class="id">s2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.AsmLinking.html#idx">idx</a></span> = (<span class="id"><a href="compcert.x86.AsmLinking.html#se1">se1</a></span>, <span class="id"><a href="compcert.x86.AsmLinking.html#s1">s1</a></span>) /\ <span class="id"><a href="compcert.x86.AsmLinking.html#match_states">match_states</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#init_nb">init_nb</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#s1">s1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#s2">s2</a></span>); <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">se</span> <span class="id">_</span> [ ] [ ] <span class="id">Hse</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;valid&nbsp;queries&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">q</span> <span class="id">_</span> [ ]. <span class="id">cbn</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SmallstepLinking.html#valid_query">valid_query</a></span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">Genv.is_internal</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86.Asm.html#asm_entry">asm_entry</a></span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.x86.AsmLinking.html#find_def_link">find_def_link</a></span> <span class="id">se</span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p1">p1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p2">p2</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span> <span class="id">b</span>) <span class="kwd">in</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.Hp">Hp</a></span>; <span class="tactic">rewrite</span> ?<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_l">orb_false_l</a></span>, ?<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_r">orb_false_r</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="compcert.common.Linking.html#Linker_def">Linker_def</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_fundef">Linker_fundef</a></span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span> <span class="kwd">as</span> [[|]|], <span class="id">a</span> <span class="kwd">as</span> [[|]|], <span class="id">b0</span> <span class="kwd">as</span> [[|]|]; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">cbn</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.AST.html#external_function_eq">external_function_eq</a></span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Linking.html#link">link</a></span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">e0</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">e0</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">q</span> <span class="id">_</span> <span class="id">s1</span> [ ] <span class="id">Hs1</span>. <span class="tactic">destruct</span> <span class="id">Hs1</span> <span class="kwd">as</span> [<span class="id">i</span> [<span class="id">nb</span> <span class="id">S</span>] <span class="id">Hq</span> [<span class="id">HS</span> <span class="id">Hnb</span>]]. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> <span class="id">_</span>, (<span class="id">nb</span>, <span class="id">S</span>). <span class="tactic">destruct</span> <span class="id">HS</span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_internal_linkorder">find_internal_linkorder</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econstructor</span>; <span class="id">cbn</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;final&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">s1</span> [<span class="id">nb</span> <span class="id">s2</span>] <span class="id">r1</span> [<span class="id">_</span> <span class="id">Hs</span>] <span class="id">Hr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hs</span> <span class="kwd">as</span> [<span class="id">i</span> <span class="id">qi</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">Hk</span> <span class="id">Hl</span> <span class="id">Hb</span> <span class="id">Hsp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr1</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">Hk</span>. <span class="id">inv</span> <span class="id">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>; <span class="tactic">split</span>; <span class="id">cbn</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;external&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">idx</span> <span class="id">s1</span> [<span class="id">nb</span> <span class="id">s2</span>] <span class="id">qx</span> [<span class="id">Hidx</span> [<span class="id">i</span> <span class="id">qi</span> <span class="id">k</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">Hk</span> <span class="id">Hl</span> <span class="id">Hb</span> <span class="id">Hsp</span>]] <span class="id">Hqx</span>. <span class="id">inv</span> <span class="id">Hqx</span>; <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>, <span class="id">qx</span>. <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H3</span>. <span class="id">edestruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#find_funct_linkorder">find_funct_linkorder</a></span> <span class="kwd">as</span> (? &amp; ? &amp; ?); <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">Hl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">pose</span> <span class="id">proof</span> (<span class="id">H4</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>). <span class="id">pose</span> <span class="id">proof</span> (<span class="id">H4</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>). <span class="tactic">clear</span> - <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">Hp</span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.is_internal">Genv.is_internal</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">rs</span> <span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.AsmLinking.html#find_def_link">find_def_link</a></span> <span class="id">se</span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p1">p1</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p2">p2</a></span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.p">p</a></span> <span class="id">b</span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO.Hp">Hp</a></span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">destruct</span> <span class="id">c</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[|]|], <span class="id">b0</span> <span class="kwd">as</span> [[|]|]; <span class="id">cbn</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.AST.html#external_function_eq">external_function_eq</a></span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id">v</span> <span class="id">v0</span>) <span class="kwd">as</span> [|]; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">r</span> <span class="id">_</span> <span class="id">s</span>' [ ] <span class="id">Hs</span>'. <span class="id">inv</span> <span class="id">Hs</span>'. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>'0 <span class="kwd">as</span> [<span class="id">nb</span>' <span class="id">s</span>'], <span class="id">H6</span> <span class="kwd">as</span> [<span class="id">Hae</span> <span class="id">Hnb</span>']. <span class="id">inv</span> <span class="id">Hae</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">se</span>, <span class="id">_</span>), (<span class="id">nb</span>, <span class="id">_</span>). <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span>; <span class="tactic">auto</span>. { <span class="id">inv</span> <span class="id">Hl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_inner_sp">match_inner_sp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_stack_nextblock">match_stack_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;simulation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' <span class="id">Hstep1</span> <span class="id">idx</span> [<span class="id">nb</span> <span class="id">s2</span>] [<span class="id">Hidx</span> <span class="id">Hs</span>]. <span class="tactic">subst</span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hstep1</span>; <span class="id">inv</span> <span class="id">Hs</span>; <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;internal&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>' <span class="kwd">as</span> [<span class="id">nb</span>' [<span class="id">rs</span>' <span class="id">m</span>' <span class="id">live1</span>']], <span class="id">H</span> <span class="kwd">as</span> [? ?]. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.x86.AsmLinking.html#step_match">step_match</a></span> <span class="kwd">as</span> (<span class="id">live2</span>' &amp; <span class="id">Hstep2</span> &amp; <span class="id">Hs</span>' &amp; <span class="id">Hl</span>' &amp; ?);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_stack_nextblock">match_stack_nextblock</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">_</span>), (<span class="id">_</span>, <span class="id">_</span>). <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span>; <span class="tactic">eauto</span> 10 <span class="kwd">using</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;push&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>' <span class="kwd">as</span> [<span class="id">nb</span>' [<span class="id">rs</span>' <span class="id">m</span>' <span class="id">live1</span>']], <span class="id">H1</span> <span class="kwd">as</span> [? ?]. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">_</span>), (<span class="id">nb</span>, <span class="id">_</span>). <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">red</span>. <span class="id">cbn</span>. <span class="tactic">rewrite</span> <span class="id">H10</span>, <span class="id">H7</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">constructor</span>; <span class="id">cbn</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_liveness_refl">match_liveness_refl</a></span>, <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;pop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sk</span> <span class="kwd">as</span> [<span class="id">bk</span> <span class="id">sk</span>], <span class="id">s</span>' <span class="kwd">as</span> [<span class="id">b</span> <span class="id">s</span>'], <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H0</span> <span class="id">Hb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">_</span>), (<span class="id">_</span>, <span class="id">_</span>). <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">red</span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="kwd">as</span> [[|]|], <span class="id"><a href="compcert.x86.Asm.html#inner_sp">inner_sp</a></span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">rs</span>#<span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span>; <span class="id">cbn</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_stack_nextblock">match_stack_nextblock</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cbn</span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span>. <span class="id">xomega</span>. <span class="tactic">discriminate</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.AsmLinking.html#match_inner_sp">match_inner_sp</a></span>, <span class="id"><a href="compcert.x86.AsmLinking.html#match_stack_nextblock">match_stack_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#well_founded_ltof">well_founded_ltof</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="compcert.x86.AsmLinking.html#FOO">FOO</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
