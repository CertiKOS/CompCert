
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Relative</title>
<meta name="description" content="Documentation of Coq module Relative" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Relative</h1>
<div class="coq">
<br/>
<h1> Relative error of the roundings </h1>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Core.html">Core</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.  <br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_relative">Fprop_relative</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic">Fprop_relative_generic</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">prop_exp</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> }.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.relative_error_conversion">relative_error_conversion</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_lt_conversion">relative_error_lt_conversion</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">b</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> &lt;&gt; 0 -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span>)%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6157')">Proof with</div>
<div class="proofscript" id="proof6157">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">b</span> <span class="id">Hb0</span> <span class="id">Hxb</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Hx0</span>|<span class="id">Hx0</span>].<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">exists</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">specialize</span> (<span class="id">Hxb</span> <span class="id">Hx0</span>).<br/>
<span class="id">exists</span> ((<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id">x</span> - <span class="id">x</span>) / <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">split</span>. 2: <span class="id">now</span> <span class="id">field</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx0</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R1">Rabs_R1</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_le_conversion">relative_error_le_conversion</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">b</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span>)%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6158')">Proof with</div>
<div class="proofscript" id="proof6158">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">b</span> <span class="id">Hb0</span> <span class="id">Hxb</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Hx0</span>|<span class="id">Hx0</span>].<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">exists</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">exists</span> ((<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id">x</span> - <span class="id">x</span>) / <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">split</span>. 2: <span class="id">now</span> <span class="id">field</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx0</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R1">Rabs_R1</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_le_conversion_inv">relative_error_le_conversion_inv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span>)%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6159')">Proof with</div>
<div class="proofscript" id="proof6159">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">b</span> (<span class="id">eps</span>, (<span class="id">Beps</span>, <span class="id">Heps</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span> : (0 &lt;= <span class="id">b</span>)%<span class="id">R</span>); [<span class="id">now</span> <span class="id">revert</span> <span class="id">Beps</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>|].<br/>
<span class="tactic">rewrite</span> <span class="id">Heps</span>; <span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">eps</span> * <span class="id">x</span>)%<span class="id">R</span>; [|<span class="tactic">ring</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>|].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_le_conversion_round_inv">relative_error_le_conversion_round_inv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span>)%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#b">b</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6160')">Proof with</div>
<div class="proofscript" id="proof6160">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">b</span>.<br/>
<span class="tactic">set</span> (<span class="id">rx</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">intros</span> (<span class="id">eps</span>, (<span class="id">Beps</span>, <span class="id">Heps</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span> : (0 &lt;= <span class="id">b</span>)%<span class="id">R</span>); [<span class="id">now</span> <span class="id">revert</span> <span class="id">Beps</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>|].<br/>
<span class="tactic">rewrite</span> <span class="id">Heps</span>; <span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> (- (<span class="id">eps</span> * <span class="id">rx</span>))%<span class="id">R</span>; [|<span class="tactic">ring</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>|].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.relative_error_conversion">relative_error_conversion</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.emin">emin</a></span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.p">p</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> : <span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error">relative_error</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6161')">Proof with</div>
<div class="proofscript" id="proof6161">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>': (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="tactic">intros</span> <span class="id">T</span>; <span class="id">contradict</span> <span class="id">Hx</span>; <span class="tactic">rewrite</span> <span class="id">T</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp">error_lt_ulp</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt; <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>).<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
Qed.</div>
<br/>
<div class="doc">1+&epsilon; property in any rounding </div>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_ex">relative_error_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6162')">Proof with</div>
<div class="proofscript" id="proof6162">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_lt_conversion">relative_error_lt_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error">relative_error</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_F2R_emin">relative_error_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6163')">Proof.</div>
<div class="proofscript" id="proof6163">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error">relative_error</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#bpow_le_F2R">bpow_le_F2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#lt_F2R">lt_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_F2R_emin_ex">relative_error_F2R_emin_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6164')">Proof with</div>
<div class="proofscript" id="proof6164">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_lt_conversion">relative_error_lt_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_F2R_emin">relative_error_F2R_emin</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_round">relative_error_round</a></span> :<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6165')">Proof with</div>
<div class="proofscript" id="proof6165">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hp</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>': (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="tactic">intros</span> <span class="id">T</span>; <span class="id">contradict</span> <span class="id">Hx</span>; <span class="tactic">rewrite</span> <span class="id">T</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp">error_lt_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>').<br/>
<span class="tactic">assert</span> (<span class="id">He</span>': (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt; <span class="id">ex</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>).<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">generalize</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="tactic">clear</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Hx</span>' <span class="id">He</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">_</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_le">round_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">ex</span> - 1 + 1)%<span class="id">Z</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_round_F2R_emin">relative_error_round_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6166')">Proof.</div>
<div class="proofscript" id="proof6166">
<span class="tactic">intros</span> <span class="id">Hp</span> <span class="id">m</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_round">relative_error_round</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Hp</span>.<br/>
<span class="tactic">unfold</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#bpow_le_F2R">bpow_le_F2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#lt_F2R">lt_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_generic.choice">choice</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N">relative_error_N</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6167')">Proof.</div>
<div class="proofscript" id="proof6167">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/2 * <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>': (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt; <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>).<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
Qed.</div>
<br/>
<div class="doc">1+&epsilon; property in rounding to nearest </div>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_ex">relative_error_N_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6168')">Proof with</div>
<div class="proofscript" id="proof6168">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion">relative_error_le_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N">relative_error_N</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_F2R_emin">relative_error_N_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6169')">Proof with</div>
<div class="proofscript" id="proof6169">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N">relative_error_N</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#bpow_le_F2R">bpow_le_F2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#lt_F2R">lt_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_F2R_emin_ex">relative_error_N_F2R_emin_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6170')">Proof with</div>
<div class="proofscript" id="proof6170">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion">relative_error_le_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_F2R_emin">relative_error_N_F2R_emin</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_round">relative_error_N_round</a></span> :<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6171')">Proof with</div>
<div class="proofscript" id="proof6171">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hp</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/2 * <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>': (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>').<br/>
<span class="tactic">assert</span> (<span class="id">He</span>': (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span> &lt; <span class="id">ex</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>).<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">generalize</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="tactic">clear</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Hx</span>' <span class="id">He</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">_</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_le">round_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">ex</span> - 1 + 1)%<span class="id">Z</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.Hmin">Hmin</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_round_F2R_emin">relative_error_N_round_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.p">p</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6172')">Proof with</div>
<div class="proofscript" id="proof6172">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hp</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_round">relative_error_N_round</a></span> <span class="kwd">with</span> (1 := <span class="id">Hp</span>).<br/>
<span class="tactic">unfold</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#bpow_le_F2R">bpow_le_F2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#lt_F2R">lt_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic.emin">emin</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_generic">Fprop_relative_generic</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLX">Fprop_relative_FLX</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLX.Hp">Hp</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt">Z.lt</a></span> 0 <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_FLX_aux">relative_error_FLX_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span> - <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6173')">Proof.</div>
<div class="proofscript" id="proof6173">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLX.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLX">relative_error_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6174')">Proof with</div>
<div class="proofscript" id="proof6174">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error">relative_error</a></span> <span class="kwd">with</span> (<span class="id">ex</span> - 1)%<span class="id">Z</span>...<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLX_aux">relative_error_FLX_aux</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
Qed.</div>
<br/>
<div class="doc">1+&epsilon; property in any rounding in FLX </div>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLX_ex">relative_error_FLX_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6175')">Proof with</div>
<div class="proofscript" id="proof6175">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_lt_conversion">relative_error_lt_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLX">relative_error_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLX_round">relative_error_FLX_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6176')">Proof with</div>
<div class="proofscript" id="proof6176">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_round">relative_error_round</a></span> <span class="kwd">with</span> (<span class="id">ex</span> - 1)%<span class="id">Z</span>...<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLX_aux">relative_error_FLX_aux</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLX.choice">choice</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLX">relative_error_N_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6177')">Proof with</div>
<div class="proofscript" id="proof6177">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N">relative_error_N</a></span> <span class="kwd">with</span> (<span class="id">ex</span> - 1)%<span class="id">Z</span>...<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLX_aux">relative_error_FLX_aux</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
Qed.</div>
<br/>
<div class="doc">unit roundoff </div>
<span class="kwd">Definition</span> <span class="id"><a name="u_ro">u_ro</a></span> := (/2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1))%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="u_ro_pos">u_ro_pos</a></span> : (0 &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6178')">Proof.</div>
<div class="proofscript" id="proof6178">
 <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="u_ro_lt_1">u_ro_lt_1</a></span> : (<span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> &lt; 1)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6179')">Proof.</div>
<div class="proofscript" id="proof6179">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>; <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> 2); [<span class="id">lra</span>|].<br/>
<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_r">Rinv_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>; [|<span class="id">lra</span>].<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> 0));<br/>
&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>|<span class="tactic">simpl</span>; <span class="id">lra</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="u_rod1pu_ro_pos">u_rod1pu_ro_pos</a></span> : (0 &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6180')">Proof.</div>
<div class="proofscript" id="proof6180">
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>];<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro_pos">u_ro_pos</a></span>); <span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="u_rod1pu_ro_le_u_ro">u_rod1pu_ro_le_u_ro</a></span> : (<span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6181')">Proof.</div>
<div class="proofscript" id="proof6181">
<span class="tactic">assert</span> (<span class="id">Pu_ro</span> := <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro_pos">u_ro_pos</a></span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)); [<span class="id">lra</span>|].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">lra</span>].<br/>
<span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> * <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>|]; <span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">relative_error_N_FLX</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6182')">Proof with</div>
<div class="proofscript" id="proof6182">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intro</span> <span class="id">x</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Pu_ro</span> : (0 &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>]. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
{ <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="id">right</span>. }<br/>
<span class="tactic">set</span> (<span class="id">ufpx</span> := <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span> - 1)%<span class="id">Z</span>).<br/>
<span class="tactic">set</span> (<span class="id">rx</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Pufpx</span> : (0 &lt;= <span class="id">ufpx</span>)%<span class="id">R</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
<span class="tactic">assert</span> (<span class="id">H_2_1</span> : (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>) &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> * <span class="id">ufpx</span>)%<span class="id">R</span>).<br/>
{ <span class="tactic">refine</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">_</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>|<span class="id">right</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>, <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>, <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>, <span class="id">ufpx</span>; <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Req_bool_false">Req_bool_false</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Nzx</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;-<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>; <span class="tactic">do</span> 2 <span class="tactic">f_equal</span>; <span class="tactic">ring</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">H_2_3</span> : (<span class="id">ufpx</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
{ <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- <span class="id">ufpx</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Sx</span>|<span class="id">Sx</span>].<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">ufpx</span> - <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_pt">round_N_pt</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>; <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>; [<span class="id">right</span>; <span class="tactic">ring</span>|]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="id">ufpx</span>); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="id">_</span> <span class="id">Sx</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_mag_le">bpow_mag_le</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (- <span class="id">ufpx</span> - <span class="id">x</span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_pt">round_N_pt</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>; <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>; [<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span>; [<span class="id">right</span>|]|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="id">x</span>); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>); <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>; <span class="tactic">unfold</span> <span class="id">ufpx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_opp">mag_opp</a></span>, &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_mag_le">bpow_mag_le</a></span>|]; <span class="id">lra</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> ((<span class="id">rx</span> - <span class="id">x</span>) / <span class="id">x</span>) &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>))%<span class="id">R</span>).<br/>
{ <span class="tactic">assert</span> (<span class="id">H</span> : (0 &lt; <span class="id">ufpx</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>))%<span class="id">R</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_le_0_compat">Rplus_lt_le_0_compat</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>]. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>) / (<span class="id">ufpx</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>)))).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Rinv">Rabs_Rinv</a></span> <span class="id">_</span> <span class="id">Nzx</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rinv_le">Rinv_le</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> ((<span class="id">ufpx</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>)) * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; <span class="id">lra</span>. }<br/>
&nbsp;&nbsp;<span class="id">field_simplify</span>; [<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> ?<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_1">Rinv_1</a></span>, ?<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>| |]; <span class="id">lra</span>. }<br/>
<span class="id">revert</span> <span class="id">H</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Rinv">Rabs_Rinv</a></span> <span class="id">_</span> <span class="id">Nzx</span>); <span class="tactic">intro</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>|].<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="id">right</span>; <span class="id">field</span>; <span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_no_R0">Rabs_no_R0</a></span>|<span class="id">lra</span>].<br/>
Qed.</div>
<br/>
<div class="doc">1+&epsilon; property in rounding to nearest in FLX </div>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLX_ex">relative_error_N_FLX_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6183')">Proof with</div>
<div class="proofscript" id="proof6183">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion">relative_error_le_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_FLX">relative_error_N_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">relative_error_N_FLX</span>'<span class="id">_ex</span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>))%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6184')">Proof with</div>
<div class="proofscript" id="proof6184">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion">relative_error_le_conversion</a></span>...<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_rod1pu_ro_pos">u_rod1pu_ro_pos</a></span>. }<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">relative_error_N_FLX</span>'.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_N_round_ex_derive">relative_error_N_round_ex_derive</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">rx</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">eps</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Prop.Relative.html#rx">rx</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#rx">rx</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6185')">Proof.</div>
<div class="proofscript" id="proof6185">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">rx</span> (<span class="id">d</span>, (<span class="id">Bd</span>, <span class="id">Hd</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Pu_ro</span> := <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro_pos">u_ro_pos</a></span>).<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#Rabs_le_inv">Rabs_le_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bd</span>).<br/>
<span class="tactic">assert</span> (<span class="id">H</span>' := <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_rod1pu_ro_le_u_ro">u_rod1pu_ro_le_u_ro</a></span>); <span class="tactic">assert</span> (<span class="id">H</span>'' := <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro_lt_1">u_ro_lt_1</a></span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">rx</span> 0) <span class="kwd">as</span> [<span class="id">Zfx</span>|<span class="id">Nzfx</span>].<br/>
{ <span class="id">exists</span> 0%<span class="id">R</span>; <span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>, <span class="id">Zfx</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Zfx</span> <span class="kwd">in</span> <span class="id">Hd</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral">Rmult_integral</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span> <span class="id">Hd</span>)); [|<span class="id">lra</span>]. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
{ <span class="id">now</span> <span class="id">exfalso</span>; <span class="id">revert</span> <span class="id">Hd</span>; <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>. }<br/>
<span class="tactic">set</span> (<span class="id">d</span>' := ((<span class="id">x</span> - <span class="id">rx</span>) / <span class="id">rx</span>)%<span class="id">R</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span>' : (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">d</span>' &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">d</span>'; <span class="tactic">rewrite</span> <span class="id">Hd</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> / <span class="id">_</span>)%<span class="id">R</span> <span class="kwd">with</span> (- <span class="id">d</span> / (1 + <span class="id">d</span>))%<span class="id">R</span>; [|<span class="id">now</span> <span class="id">field</span>; <span class="tactic">split</span>; <span class="id">lra</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> (/ <span class="id">_</span>)); [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>; <span class="id">lra</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (1 + <span class="id">d</span>)); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bd</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro_pos">u_ro_pos</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> (1 - <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>))); [<span class="id">right</span>; <span class="id">field</span>|]; <span class="id">lra</span>. }<br/>
<span class="id">now</span> <span class="id">exists</span> <span class="id">d</span>'; <span class="tactic">split</span>; [|<span class="tactic">unfold</span> <span class="id">d</span>'; <span class="id">field</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLX_round_ex">relative_error_N_FLX_round_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span>)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6186')">Proof.</div>
<div class="proofscript" id="proof6186">
<span class="tactic">intro</span> <span class="id">x</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_round_ex_derive">relative_error_N_round_ex_derive</a></span>, <span class="id">relative_error_N_FLX</span>'<span class="id">_ex</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLX_round">relative_error_N_FLX_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span>(<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6187')">Proof.</div>
<div class="proofscript" id="proof6187">
<span class="tactic">intro</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion_round_inv">relative_error_le_conversion_round_inv</a></span>, <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_FLX_round_ex">relative_error_N_FLX_round_ex</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLX">Fprop_relative_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLT">Fprop_relative_FLT</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLT.Hp">Hp</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt">Z.lt</a></span> 0 <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="relative_error_FLT_aux">relative_error_FLT_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span> - <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6188')">Proof.</div>
<div class="proofscript" id="proof6188">
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">k</span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLT.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLT">relative_error_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6189')">Proof with</div>
<div class="proofscript" id="proof6189">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error">relative_error</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1)%<span class="id">Z</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT_aux">relative_error_FLT_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLT_F2R_emin">relative_error_FLT_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6190')">Proof with</div>
<div class="proofscript" id="proof6190">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1))) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#generic_format_FLT_FIX">generic_format_FLT_FIX</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FIX.html#generic_format_FIX">generic_format_FIX</a></span>.<br/>
<span class="id">now</span> <span class="id">exists</span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">m</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT">relative_error_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLT_F2R_emin_ex">relative_error_FLT_F2R_emin_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6191')">Proof with</div>
<div class="proofscript" id="proof6191">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_lt_conversion">relative_error_lt_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT_F2R_emin">relative_error_FLT_F2R_emin</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">1+&epsilon; property in any rounding in FLT </div>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_FLT_ex">relative_error_FLT_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6192')">Proof with</div>
<div class="proofscript" id="proof6192">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_lt_conversion">relative_error_lt_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT">relative_error_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_relative.Fprop_relative_FLT.choice">choice</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLT">relative_error_N_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6193')">Proof with</div>
<div class="proofscript" id="proof6193">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N">relative_error_N</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1)%<span class="id">Z</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT_aux">relative_error_FLT_aux</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">1+&epsilon; property in rounding to nearest in FLT </div>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLT_ex">relative_error_N_FLT_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6194')">Proof with</div>
<div class="proofscript" id="proof6194">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion">relative_error_le_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_FLT">relative_error_N_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLT_round">relative_error_N_FLT_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6195')">Proof with</div>
<div class="proofscript" id="proof6195">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_round">relative_error_N_round</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1)%<span class="id">Z</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT_aux">relative_error_FLT_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLT_F2R_emin">relative_error_N_FLT_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6196')">Proof with</div>
<div class="proofscript" id="proof6196">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1))) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RiemannInt.html#RinvN_pos">RinvN_pos</a></span> 1).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#generic_format_FLT_FIX">generic_format_FLT_FIX</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FIX.html#generic_format_FIX">generic_format_FIX</a></span>.<br/>
<span class="id">now</span> <span class="id">exists</span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">m</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_FLT">relative_error_N_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLT_F2R_emin_ex">relative_error_N_FLT_F2R_emin_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1))%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6197')">Proof with</div>
<div class="proofscript" id="proof6197">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_le_conversion">relative_error_le_conversion</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RiemannInt.html#RinvN_pos">RinvN_pos</a></span> 1).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_FLT_F2R_emin">relative_error_N_FLT_F2R_emin</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="relative_error_N_FLT_round_F2R_emin">relative_error_N_FLT_round_F2R_emin</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="kwd">let</span> <span class="id">x</span> := <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1) * <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6198')">Proof with</div>
<div class="proofscript" id="proof6198">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1))) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RiemannInt.html#RinvN_pos">RinvN_pos</a></span> 1).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#generic_format_FLT_FIX">generic_format_FLT_FIX</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FIX.html#generic_format_FIX">generic_format_FIX</a></span>.<br/>
<span class="id">now</span> <span class="id">exists</span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">m</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_round">relative_error_N_round</a></span> <span class="kwd">with</span> (<span class="id">emin</span> := (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1)%<span class="id">Z</span>)...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_FLT_aux">relative_error_FLT_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="error_N_FLT_aux">error_N_FLT_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span>, <span class="id">exists</span>  <span class="id">eta</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> + 1))%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>))%<span class="id">R</span>      /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>*<span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span>=0)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>) + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6199')">Proof.</div>
<div class="proofscript" id="proof6199">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>+<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>)) <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#relative_error_N_ex">relative_error_N_ex</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>+<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>)%<span class="id">Z</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">eps</span>,(<span class="id">Heps1</span>,<span class="id">Heps2</span>)).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_left">Zmax_left</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>;[<span class="tactic">assumption</span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="id">now</span> <span class="id">left</span>].<br/>
<span class="id">exists</span> <span class="id">eps</span>; <span class="id">exists</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">split</span>;[<span class="tactic">assumption</span>|<span class="tactic">split</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">split</span>;[<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>|<span class="id">idtac</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">exists</span> 0%<span class="id">R</span>; <span class="id">exists</span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id">x</span> - <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/2*<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_right">Zmax_right</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">e</span>-1 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>+<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="id">x</span>) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">split</span> ; <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">relative_error_N_FLT</span>'<span class="id">_ex</span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span> <span class="id">eta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>))%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> * <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span> = 0)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span><br/>
&nbsp;&nbsp;= (<span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>) + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6200')">Proof.</div>
<div class="proofscript" id="proof6200">
<span class="tactic">intro</span> <span class="id">x</span>.<br/>
<span class="tactic">set</span> (<span class="id">rx</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span> := <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_rod1pu_ro_pos">u_rod1pu_ro_pos</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> - 1)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">MX</span>|<span class="id">Mx</span>].<br/>
{ <span class="tactic">destruct</span> (<span class="id">relative_error_N_FLX</span>'<span class="id">_ex</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.Hp">Hp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">d</span>, (<span class="id">Bd</span>, <span class="id">Hd</span>)).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">d</span>, 0%<span class="id">R</span>; <span class="tactic">split</span>; [<span class="tactic">exact</span> <span class="id">Bd</span>|]; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>]. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>; <span class="tactic">split</span>; [<span class="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hd</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#round_FLT_FLX">round_FLT_FLX</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">rx</span> - <span class="id">x</span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span>)%<span class="id">R</span>).<br/>
{ <span class="tactic">refine</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">_</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#ulp_FLT_small">ulp_FLT_small</a></span>; [<span class="id">now</span> <span class="id">right</span>|<span class="id">now</span> <span class="tactic">simpl</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Mx</span>), <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>; <span class="id">lia</span>. }<br/>
<span class="id">exists</span> 0%<span class="id">R</span>, (<span class="id">rx</span> - <span class="id">x</span>)%<span class="id">R</span>; <span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>|]; <span class="tactic">split</span>; [<span class="tactic">exact</span> <span class="id">H</span>|].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>; <span class="tactic">split</span>; [|<span class="tactic">ring</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">relative_error_N_FLT</span>'<span class="id">_ex_separate</span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id">x</span>'<br/>
&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> /\<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">eta</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> /\ <span class="id">x</span>' = <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span>)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">eps</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span> / (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_ro">u_ro</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT.choice">choice</a></span>) <span class="id">x</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id">x</span>' * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6201')">Proof.</div>
<div class="proofscript" id="proof6201">
<span class="tactic">intro</span> <span class="id">x</span>.<br/>
<span class="tactic">set</span> (<span class="id">rx</span> := <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>).<br/>
<span class="tactic">destruct</span> (<span class="id">relative_error_N_FLT</span>'<span class="id">_ex</span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">d</span>, (<span class="id">e</span>, (<span class="id">Bd</span>, (<span class="id">Be</span>, (<span class="id">Hde0</span>, <span class="id">Hde</span>))))).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">d</span> * <span class="id">x</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">e</span>)) <span class="kwd">as</span> [<span class="id">HdxLte</span>|<span class="id">HeLedx</span>].<br/>
{ <span class="id">exists</span> <span class="id">rx</span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>].<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>]. }<br/>
&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">e</span>; <span class="tactic">split</span>; [<span class="tactic">exact</span> <span class="id">Be</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rx</span>; <span class="tactic">rewrite</span> <span class="id">Hde</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral">Rmult_integral</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hde0</span>) <span class="kwd">as</span> [<span class="id">Zd</span>|<span class="id">Ze</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Zd</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>; <span class="id">revert</span> <span class="id">HdxLte</span>; <span class="tactic">rewrite</span> <span class="id">Ze</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">exists</span> 0%<span class="id">R</span>; <span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#u_rod1pu_ro_pos">u_rod1pu_ro_pos</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>]. }<br/>
<span class="id">exists</span> <span class="id">x</span>; <span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">simpl</span>|<span class="tactic">split</span>].<br/>
{ <span class="id">exists</span> 0%<span class="id">R</span>; <span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>]|<span class="tactic">ring</span>]. }<br/>
<span class="id">exists</span> <span class="id">d</span>; <span class="tactic">rewrite</span> <span class="id">Hde</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral">Rmult_integral</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hde0</span>) <span class="kwd">as</span> [<span class="id">Zd</span>|<span class="id">Ze</span>].<br/>
{ <span class="tactic">split</span>; [<span class="tactic">exact</span> <span class="id">Bd</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Ze</span> : <span class="id">e</span> = 0%<span class="id">R</span>); [|<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Ze</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rabs_eq_R0">Rabs_eq_R0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">revert</span> <span class="id">HeLedx</span>; <span class="tactic">rewrite</span> <span class="id">Zd</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>. }<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Ze</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.Fprop_relative_FLT">Fprop_relative_FLT</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="error_N_FLT">error_N_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">emin</span> <span class="id">prec</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), (0 &lt; <span class="id"><a href="compcert.flocq.Prop.Relative.html#prec">prec</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">eps</span> <span class="id">eta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Prop.Relative.html#prec">prec</a></span> + 1))%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span> &lt;= /2 * <span class="id"><a href="compcert.flocq.Prop.Relative.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#emin">emin</a></span>)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span> * <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span> = 0)%<span class="id">R</span> /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Prop.Relative.html#x">x</a></span> * (1 + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eps">eps</a></span>) + <span class="id"><a href="compcert.flocq.Prop.Relative.html#eta">eta</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6202')">Proof.</div>
<div class="proofscript" id="proof6202">
<span class="tactic">intros</span> <span class="id">emin</span> <span class="id">prec</span> <span class="id">Pprec</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rtotal_order">Rtotal_order</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Nx</span>|[<span class="id">Zx</span>|<span class="id">Px</span>]].<br/>
{ <span class="tactic">assert</span> (<span class="id">Pmx</span> : (0 &lt; - <span class="id">x</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (@<span class="id"><a href="compcert.flocq.Prop.Relative.html#error_N_FLT_aux">error_N_FLT_aux</a></span> <span class="id">emin</span> <span class="id">prec</span> <span class="id">Pprec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">t</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id">choice</span> (- (<span class="id"><a href="compcert.flocq.Prop.Relative.html#t">t</a></span> + 1))%<span class="id">Z</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(- <span class="id">x</span>)%<span class="id">R</span> <span class="id">Pmx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">d</span>,(<span class="id">e</span>,(<span class="id">Hd</span>,(<span class="id">He</span>,(<span class="id">Hde</span>,<span class="id">Hr</span>))))).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">d</span>; <span class="id">exists</span> (- <span class="id">e</span>)%<span class="id">R</span>; <span class="tactic">split</span>; [<span class="tactic">exact</span> <span class="id">Hd</span>|<span class="tactic">split</span>; [|<span class="tactic">split</span>]].<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>. }<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_r_reverse">Ropp_mult_distr_r_reverse</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>), <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_plus_distr">Ropp_plus_distr</a></span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>. }<br/>
{ <span class="tactic">assert</span> (<span class="id">Ph2</span> : (0 &lt;= / 2)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_l">Rmult_le_reg_l</a></span> 2 <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_r">Rinv_r</a></span>; [<span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_0_1">Rle_0_1</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">exists</span> 0%<span class="id">R</span>; <span class="id">exists</span> 0%<span class="id">R</span>; <span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]].<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>]. }<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>]. }<br/>
&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>]. }<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#error_N_FLT_aux">error_N_FLT_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Relative.html#Fprop_relative">Fprop_relative</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
