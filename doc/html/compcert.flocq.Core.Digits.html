
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Digits</title>
<meta name="description" content="Documentation of Coq module Digits" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Digits</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html">Zquot</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html">Zaux</a></span>.<br/>
<br/>
<div class="doc">Number of bits (radix 2) of a positive integer.
It serves as an upper bound on the number of digits to ensure termination.
</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="digits2_Pnat">digits2_Pnat</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="digits2_Pnat_correct">digits2_Pnat_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">d</span> := <span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 <span class="id"><a href="compcert.flocq.Core.Digits.html#d">d</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#d">d</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5593')">Proof.</div>
<div class="proofscript" id="proof5593">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">d</span>. <span class="tactic">unfold</span> <span class="id">d</span>. <span class="tactic">clear</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hp</span>: <span class="kwd">forall</span> <span class="id">m</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>) = 2 * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>)%<span class="id">Z</span>) <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">induction</span> <span class="id">n</span> ; <span class="tactic">simpl</span> <span class="id">digits2_Pnat</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpos_xI">Zpos_xI</a></span>, 2!<span class="id">Hp</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpos_xO">Zpos_xO</a></span> <span class="id">n</span>), 2!<span class="id">Hp</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcore_digits">Fcore_digits</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_digits.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zdigit">Zdigit</a></span> <span class="id">n</span> <span class="id">k</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_lt">Zdigit_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> &lt; 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5594')">Proof.</div>
<div class="proofscript" id="proof5594">
<span class="tactic">intros</span> <span class="id">n</span> [|<span class="id">k</span>|<span class="id">k</span>] <span class="id">Hk</span> ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">case</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_0">Zdigit_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5595')">Proof.</div>
<div class="proofscript" id="proof5595">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_opp">Zdigit_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (-<span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp">Z.opp</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5596')">Proof.</div>
<div class="proofscript" id="proof5596">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_opp_l">Zquot_opp_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_opp_l">Zrem_opp_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_ge_Zpower_pos">Zdigit_ge_Zpower_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5597')">Proof.</div>
<div class="proofscript" id="proof5597">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">n</span> <span class="id">Hn</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot_small">Z.quot_small</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hn</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hn</span>).<br/>
<span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> (<span class="id">e</span> + (<span class="id">k</span> - <span class="id">e</span>))%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">e</span>)) <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_l">Zmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="kwd">with</span> <span class="id">n</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hn</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hn</span>)).<br/>
<span class="tactic">clear</span>.<br/>
<span class="id">now</span> <span class="tactic">destruct</span> <span class="id">e</span> <span class="kwd">as</span> [|<span class="id">e</span>|<span class="id">e</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_ge_Zpower">Zdigit_ge_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5598')">Proof.</div>
<div class="proofscript" id="proof5598">
<span class="tactic">intros</span> <span class="id">e</span> [|<span class="id">n</span>|<span class="id">n</span>] <span class="id">Hn</span> <span class="id">k</span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_ge_Zpower_pos">Zdigit_ge_Zpower_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">n</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp">Z.opp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_opp">Zdigit_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_ge_Zpower_pos">Zdigit_ge_Zpower_pos</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_0">Z.opp_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_not_0_pos">Zdigit_not_0_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> + 1))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5599')">Proof.</div>
<div class="proofscript" id="proof5599">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">n</span> <span class="id">He</span> (<span class="id">Hn1</span>,<span class="id">Hn2</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOdiv_mod_mult">ZOdiv_mod_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem_small">Z.rem_small</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_not_lt">Zle_not_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">Hn1</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id">Z.quot_rem</span>' <span class="id">n</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">e</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_0_r">Zmult_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_l">Zplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt_pos_pos">Zrem_lt_pos_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hn1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hn1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">e</span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ (<span class="id">e</span> + 1))%<span class="id">Z</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hn2</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 3.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">e</span> 1).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_not_0">Zdigit_not_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> + 1))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5600')">Proof.</div>
<div class="proofscript" id="proof5600">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">n</span> <span class="id">He</span> <span class="id">Hn</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">n</span>) <span class="kwd">as</span> [<span class="id">Hn</span>'|<span class="id">Hn</span>'].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="id">_</span> <span class="id">Hn</span>') <span class="kwd">in</span> <span class="id">Hn</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_not_0_pos">Zdigit_not_0_pos</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_non_eq">Zabs_non_eq</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hn</span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_not_0_pos">Zdigit_not_0_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hn</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_opp">Zdigit_opp</a></span>, <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_mul_pow">Zdigit_mul_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>') <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> - <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5601')">Proof.</div>
<div class="proofscript" id="proof5601">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">k</span>' <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="id">revert</span> <span class="id">k</span> <span class="id">H</span>.<br/>
<span class="tactic">pattern</span> <span class="id">k</span>' ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Wf_Z.html#Zlt_0_ind">Zlt_0_ind</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>').<br/>
<span class="tactic">clear</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' <span class="id">IHk</span>' <span class="id">Hk</span>' <span class="id">k</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>)).<br/>
<span class="tactic">pattern</span> <span class="id">k</span> <span class="tactic">at</span> 1 ; <span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> (<span class="id">k</span> - <span class="id">k</span>' + <span class="id">k</span>')%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_mult_cancel_r">Zquot_mult_cancel_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">H0</span>|<span class="id">H0</span>].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span> <span class="id">n</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">replace</span> <span class="id">k</span>' <span class="kwd">with</span> (<span class="id">k</span>' - <span class="id">k</span> + <span class="id">k</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">H0</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Z_quot_mult">Z_quot_mult</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id">k</span>' - <span class="id">k</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">k</span>' - <span class="id">k</span> - 1 + 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_exp">Zpower_exp</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Z_rem_mult">Z_rem_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">H0</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_div_pow">Zdigit_div_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>')) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> + <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5602')">Proof.</div>
<div class="proofscript" id="proof5602">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span> <span class="id">Hk</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_Zquot">Zquot_Zquot</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_mod_pow">Zdigit_mod_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> &lt; <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>')) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5603')">Proof.</div>
<div class="proofscript" id="proof5603">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOdiv_mod_mult">ZOdiv_mod_mult</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">k</span>))).<br/>
<span class="tactic">replace</span> <span class="id">k</span>' <span class="kwd">with</span> (<span class="id">k</span> + 1 + (<span class="id">k</span>' - (<span class="id">k</span> + 1)))%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_exp">Zpower_exp</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOmod_mod_mult">ZOmod_mod_mult</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_mod_pow_out">Zdigit_mod_pow_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id">k</span>' &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>')) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5604')">Proof.</div>
<div class="proofscript" id="proof5604">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOdiv_small_abs">ZOdiv_small_abs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>').<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">k</span>')) <span class="tactic">at</span> 2 <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Zsum_digit">Zsum_digit</a></span> <span class="id">f</span> <span class="id">k</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span> =&gt; (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit">Zsum_digit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#f">f</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>))%<span class="id">Z</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zsum_digit_digit">Zsum_digit_digit</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5605')">Proof.</div>
<div class="proofscript" id="proof5605">
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">induction</span> <span class="id">k</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem_1_r">Z.rem_1_r</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Zsum_digit</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">IHk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOdiv_mod_mult">ZOdiv_mod_mult</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOmod_mod_mult">ZOmod_mod_mult</a></span> <span class="id">n</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">k</span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Z.quot_rem</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 3.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_ext">Zdigit_ext</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n1">n1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n2">n2</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#n1">n1</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5606')">Proof.</div>
<div class="proofscript" id="proof5606">
<span class="tactic">intros</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOmod_small_abs">ZOmod_small_abs</a></span> <span class="id">n1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n2</span>)))).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOmod_small_abs">ZOmod_small_abs</a></span> <span class="id">n2</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n2</span>)))) <span class="tactic">at</span> 2.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n2</span>)) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_nat">Z.abs_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n2</span>)))).<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit_digit">Zsum_digit_digit</a></span>.<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_nat">Z.abs_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n2</span>))).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id">IHn</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#inj_Zabs_nat">inj_Zabs_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_l">Z.le_max_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n2</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_id">Zpower_gt_id</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_r">Z.le_max_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n1</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_id">Zpower_gt_id</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_l">Z.le_max_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ZOmod_plus_pow_digit">ZOmod_plus_pow_digit</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) = (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5607')">Proof.</div>
<div class="proofscript" id="proof5607">
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span> <span class="id">Huv</span> <span class="id">Hd</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">n</span>) <span class="kwd">as</span> [<span class="id">Hn</span>|<span class="id">Hn</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zplus_rem">Zplus_rem</a></span> <span class="kwd">with</span> (1 := <span class="id">Huv</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOmod_small_abs">ZOmod_small_abs</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span> <span class="id">n</span>).<br/>
<span class="tactic">pattern</span> <span class="id">n</span> <span class="tactic">at</span> -2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hn</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#inj_Zabs_nat">inj_Zabs_nat</a></span> <span class="id">n</span>).<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_nat">Z.abs_nat</a></span> <span class="id">n</span>) <span class="kwd">as</span> [|<span class="id">p</span> <span class="id">IHp</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem_1_r">Z.rem_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit_digit">Zsum_digit_digit</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Zsum_digit</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Hn</span>'.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span>) <span class="id">p</span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) * <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span> +<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span>) <span class="id">p</span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) * <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>))%<span class="id">Z</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span>) <span class="id">p</span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span>) <span class="id">p</span> +<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)) * <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_triangle">Z.abs_triangle</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span> + (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> - 1) * <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_lt_le_compat">Zplus_lt_le_compat</a></span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zsum_digit_digit">Zsum_digit_digit</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">IHp</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_succ_le">Zle_succ_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_Zmult">Zabs_Zmult</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_r">Zmult_le_compat_r</a></span>. 2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ_le">Zlt_succ_le</a></span>.<br/>
<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>) &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> -  1))%<span class="id">Z</span>.<br/>
<span class="tactic">clear</span> ; <span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span>.<br/>
<span class="tactic">assert</span> (0 &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> 2%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> - 1)) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc_pred">Zsucc_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span> &lt; <span class="id">n</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.gt_lt">Z.gt_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_succ_gt">Zle_succ_gt</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id">Hd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">K</span>|<span class="id">K</span>] ; <span class="tactic">rewrite</span> <span class="id">K</span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_r">Zplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">destruct</span> <span class="id">n</span> <span class="kwd">as</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 3!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_r">Zrem_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ZOdiv_plus_pow_digit">ZOdiv_plus_pow_digit</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) = (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5608')">Proof.</div>
<div class="proofscript" id="proof5608">
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span> <span class="id">Huv</span> <span class="id">Hd</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_r">Zplus_0_r</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">n</span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">n</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOdiv_plus">ZOdiv_plus</a></span> <span class="kwd">with</span> (1 := <span class="id">Huv</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Digits.html#ZOmod_plus_pow_digit">ZOmod_plus_pow_digit</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">n</span>) <span class="kwd">as</span> [<span class="id">Hn</span>|<span class="id">Hn</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#ZOdiv_small_abs">ZOdiv_small_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hn</span>.<br/>
<span class="tactic">destruct</span> <span class="id">n</span> <span class="kwd">as</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_r">Zquot_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_plus">Zdigit_plus</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5609')">Proof.</div>
<div class="proofscript" id="proof5609">
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">v</span> <span class="id">Huv</span> <span class="id">Hd</span> <span class="id">k</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk</span>|<span class="id">Hk</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#ZOdiv_plus_pow_digit">ZOdiv_plus_pow_digit</a></span> <span class="kwd">with</span> (1 := <span class="id">Huv</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 3 5 7.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#ZOmod_plus_pow_digit">ZOmod_plus_pow_digit</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> <span class="id">v</span>.<br/>
<span class="tactic">intros</span> <span class="id">Zv</span> ; <span class="tactic">rewrite</span> <span class="id">Zv</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> <span class="id">u</span>.<br/>
<span class="tactic">intros</span> <span class="id">Zu</span> ; <span class="tactic">rewrite</span> <span class="id">Zu</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_odiv">Zsame_sign_odiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_odiv">Zsame_sign_odiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' (<span class="id">Hk1</span>,<span class="id">Hk2</span>).<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_div_pow">Zdigit_div_pow</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hd</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_0_compat">Zplus_le_0_compat</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' (<span class="id">Hk1</span>,<span class="id">Hk2</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hd</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 3!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Left and right shifts </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zscale">Zscale</a></span> <span class="id">n</span> <span class="id">k</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (-<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_scale">Zdigit_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id">k</span>' = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id">k</span>' - <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5610')">Proof.</div>
<div class="proofscript" id="proof5610">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_mul_pow">Zdigit_mul_pow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_div_pow">Zdigit_div_pow</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>').<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zscale_0">Zscale_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5611')">Proof.</div>
<div class="proofscript" id="proof5611">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_0_l">Zmult_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zsame_sign_scale">Zsame_sign_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5612')">Proof.</div>
<div class="proofscript" id="proof5612">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_0_compat">Zmult_le_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_imp">Zsame_sign_imp</a></span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_odiv">Zsame_sign_odiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zscale_mul_pow">Zscale_mul_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id">k</span>' = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> + <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5613')">Proof.</div>
<div class="proofscript" id="proof5613">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_0_compat">Zplus_le_0_compat</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>''.<br/>
<span class="tactic">pattern</span> <span class="id">k</span> <span class="tactic">at</span> 1 ; <span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> (<span class="id">k</span> + <span class="id">k</span>' + -<span class="id">k</span>')%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (0 &lt;= -<span class="id">k</span>')%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Z_quot_mult">Z_quot_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">replace</span> (-<span class="id">k</span>')%<span class="id">Z</span> <span class="kwd">with</span> (-(<span class="id">k</span>+<span class="id">k</span>') + <span class="id">k</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_mult_cancel_r">Zquot_mult_cancel_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zscale_scale">Zscale_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id">k</span>' = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> + <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5614')">Proof.</div>
<div class="proofscript" id="proof5614">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale_mul_pow">Zscale_mul_pow</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Slice of an integer </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zslice">Zslice</a></span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (-<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_slice">Zdigit_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5615')">Proof.</div>
<div class="proofscript" id="proof5615">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_mod_pow">Zdigit_mod_pow</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_slice_out">Zdigit_slice_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5616')">Proof.</div>
<div class="proofscript" id="proof5616">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_mod_pow_out">Zdigit_mod_pow_out</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_0">Zdigit_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_0">Zslice_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> <span class="id">k</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5617')">Proof.</div>
<div class="proofscript" id="proof5617">
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">k</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale_0">Zscale_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zsame_sign_slice">Zsame_sign_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> <span class="id">k</span>')%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5618')">Proof.</div>
<div class="proofscript" id="proof5618">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id">n</span> (-<span class="id">k</span>)).<br/>
<span class="tactic">intros</span> <span class="id">H</span> ; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zsame_sign_scale">Zsame_sign_scale</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_sgn2">Zrem_sgn2</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_0_r">Zmult_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_slice">Zslice_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k1</span>' <span class="id">k2</span>', (0 &lt;= <span class="id">k1</span>' &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>) <span class="id">k1</span>' <span class="id">k2</span>' = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> + <span class="id">k1</span>') (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.min">Z.min</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> - <span class="id">k1</span>') <span class="id">k2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5619')">Proof.</div>
<div class="proofscript" id="proof5619">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k1</span>' <span class="id">k2</span>' <span class="id">Hk1</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k2</span>') <span class="kwd">as</span> [<span class="id">Hk2</span>'|<span class="id">Hk2</span>'].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_ext">Zdigit_ext</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.min">Z.min</a></span> (<span class="id">k2</span> - <span class="id">k1</span>') <span class="id">k2</span>') <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk</span>'|<span class="id">Hk</span>'].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="id">n</span> (<span class="id">k1</span> + <span class="id">k1</span>')) <span class="kwd">with</span> (1 := <span class="id">Hk</span>').<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">k2</span>' <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk</span>''|<span class="id">Hk</span>''].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> (<span class="id">zify</span> ; <span class="tactic">omega</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="id">n</span> (<span class="id">k1</span> + <span class="id">k1</span>')) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>.<br/>
<span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.min_r">Z.min_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_false">Zle_bool_false</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_mul_pow">Zslice_mul_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> - <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5620')">Proof.</div>
<div class="proofscript" id="proof5620">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk2</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale_mul_pow">Zscale_mul_pow</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="id">now</span> <span class="tactic">replace</span> (- (<span class="id">k1</span> - <span class="id">k</span>))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">k</span> + -<span class="id">k1</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_div_pow">Zslice_div_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5621')">Proof.</div>
<div class="proofscript" id="proof5621">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk</span> <span class="id">Hk1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk2</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">k2</span>))).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk1</span>'.<br/>
<span class="tactic">replace</span> <span class="id">k1</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>'.<br/>
<span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot_1_r">Z.quot_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_false">Zle_bool_false</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_Zquot">Zquot_Zquot</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_scale">Zslice_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> - <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5622')">Proof.</div>
<div class="proofscript" id="proof5622">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hk</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice_mul_pow">Zslice_mul_pow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice_div_pow">Zslice_div_pow</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk1</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_div_pow_scale">Zslice_div_pow_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#k2">k2</a></span>)) (-<span class="id"><a href="compcert.flocq.Core.Digits.html#k1">k1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5623')">Proof.</div>
<div class="proofscript" id="proof5623">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_ext">Zdigit_ext</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>').<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> <span class="id">k</span>'), <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">k2</span> <span class="id">k</span>') <span class="kwd">as</span> [<span class="id">Hk2</span>|<span class="id">Hk2</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat_l">Zplus_le_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 (<span class="id">k1</span> + <span class="id">k</span>')) <span class="kwd">as</span> [<span class="id">Hk1</span>'|<span class="id">Hk1</span>'].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_div_pow">Zdigit_div_pow</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zplus_slice">Zplus_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">l1</span> <span class="id">l2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#l1">l1</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#l2">l2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#l1">l1</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#l1">l1</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#l2">l2</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#l1">l1</a></span>)%<span class="id">Z</span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#l1">l1</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#l2">l2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5624')">Proof.</div>
<div class="proofscript" id="proof5624">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">Hl1</span> <span class="id">Hl2</span>.<br/>
<span class="tactic">clear</span> <span class="id">Hl1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_ext">Zdigit_ext</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_plus">Zdigit_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">l1</span> + <span class="id">l2</span>) <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk2</span>|<span class="id">Hk2</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk2</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hk</span> <span class="id">Hk2</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">l1</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk1</span>|<span class="id">Hk1</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk1</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">simpl</span> ; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hk</span> <span class="id">Hk1</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span> <span class="id">_</span> (<span class="id">k</span> - <span class="id">l1</span>)) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_r">Zplus_0_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> <span class="id">n</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span> ; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice_0">Zslice_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id">n</span> (<span class="id">k1</span> + <span class="id">l1</span>) <span class="id">l2</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span> ; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale_0">Zscale_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zsame_sign_slice">Zsame_sign_slice</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zsame_sign_scale">Zsame_sign_scale</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zsame_sign_slice">Zsame_sign_slice</a></span>.<br/>
<span class="tactic">clear</span> <span class="id">k</span> <span class="id">Hk</span> ; <span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">l1</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk1</span>|<span class="id">Hk1</span>].<br/>
<span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcore_digits.digits_aux">digits_aux</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_digits.digits_aux.p">p</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Zdigits_aux">Zdigits_aux</a></span> (<span class="id">nb</span> <span class="id">pow</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) { <span class="kwd">struct</span> <span class="id">n</span> } : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> =&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#nb">nb</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.digits_aux.p">p</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#pow">pow</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#nb">nb</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_aux">Zdigits_aux</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#nb">nb</a></span> + 1) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult">Zmult</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#pow">pow</a></span>) <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.digits_aux">digits_aux</a></span>.<br/>
<br/>
<div class="doc">Number of digits of an integer </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zdigits">Zdigits</a></span> <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_aux">Zdigits_aux</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span>) 1 <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_aux">Zdigits_aux</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> 1 <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_correct">Zdigits_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5625')">Proof.</div>
<div class="proofscript" id="proof5625">
<span class="tactic">cut</span> (<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#p">p</a></span>) - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#p">p</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#p">p</a></span>)))%<span class="id">Z</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="tactic">exact</span> (<span class="id">H</span> <span class="id">n</span>).<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">U</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">n</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">n</span>))))%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat_correct">digits2_Pnat_correct</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_Zpower_nat">Zpower_Zpower_nat</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_nat_Z_of_nat">Zabs_nat_Z_of_nat</a></span>.<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">n</span>)).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> 2!(<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_nat_S">Zpower_nat_S</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span> <span class="kwd">with</span> (2 := <span class="id">IHn0</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_nat_Z_of_nat">Zabs_nat_Z_of_nat</a></span> <span class="id">n0</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_Zpower_nat">Zpower_Zpower_nat</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Build_radix">Build_radix</a></span> 2 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">revert</span> <span class="id">U</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">n</span>).<br/>
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">U</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 2 4 ; <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">V</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (1 - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">n</span>)%<span class="id">Z</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 0).<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">V</span> <span class="id">U</span>).<br/>
<span class="tactic">clear</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span> 1).<br/>
<span class="tactic">generalize</span> 1%<span class="id">Z</span> <span class="tactic">at</span> 2 3 5 6 7 9 10.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">induction</span> <span class="id">u</span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Zdigits_aux</span>.<br/>
<span class="tactic">intros</span> <span class="id">v</span> <span class="id">Hv</span> <span class="id">U</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 2 5 ; <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">IHu</span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hv</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span> (1 + <span class="id">v</span> - 1)%<span class="id">Z</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_succ_le">Zle_succ_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hv</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_unique">Zdigits_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#d">d</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#d">d</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5626')">Proof.</div>
<div class="proofscript" id="proof5626">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">d</span> <span class="id">Hd</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span>' := <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_abs">Zdigits_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>) = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5627')">Proof.</div>
<div class="proofscript" id="proof5627">
<span class="id">now</span> <span class="tactic">intros</span> [|<span class="id">n</span>|<span class="id">n</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_gt_0">Zdigits_gt_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5628')">Proof.</div>
<div class="proofscript" id="proof5628">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Zn</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_abs">Zdigits_abs</a></span> <span class="id">n</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hn</span>: (0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">destruct</span> <span class="id">n</span> ; [|<span class="id">easy</span>|<span class="id">easy</span>].<br/>
<span class="id">now</span> <span class="tactic">elim</span> <span class="id">Zn</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n</span>) <span class="kwd">as</span> [|<span class="id">p</span>|<span class="id">p</span>] ; <span class="tactic">try</span> <span class="id">easy</span> ; <span class="tactic">clear</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">generalize</span> 1%<span class="id">Z</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> : (0 &lt; 1)%<span class="id">Z</span>).<br/>
<span class="tactic">induction</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">intros</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">IHn</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_lt_succ">Zlt_lt_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_ge_0">Zdigits_ge_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5629')">Proof.</div>
<div class="proofscript" id="proof5629">
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">n</span> 0) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_out">Zdigit_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5630')">Proof.</div>
<div class="proofscript" id="proof5630">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_ge_Zpower">Zdigit_ge_Zpower</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_digits">Zdigit_digits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> - 1) &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5631')">Proof.</div>
<div class="proofscript" id="proof5631">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Zn</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigit_not_0">Zdigit_not_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_0_le_0_pred">Zlt_0_le_0_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">n</span> - 1 + 1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_slice">Zdigits_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">l</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#l">l</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#l">l</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#l">l</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5632')">Proof.</div>
<div class="proofscript" id="proof5632">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="kwd">with</span> (1 := <span class="id">Hl</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zscale">Zscale</a></span> <span class="id">n</span> (- <span class="id">k</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">l</span>))) <span class="kwd">as</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H1</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">l</span>)) <span class="tactic">at</span> 2 <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult_Zpower">Zdigits_mult_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5633')">Proof.</div>
<div class="proofscript" id="proof5633">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">Hm</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">m</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_unique">Zdigits_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_mul">Z.abs_mul</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_pow">Z.abs_pow</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>).<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_gt_0">radix_gt_0</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> + <span class="id">e</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - 1 + <span class="id">e</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_r">Zmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_0_le_0_pred">Zlt_0_le_0_pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_lt_compat_r">Zmult_lt_compat_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_Zpower">Zdigits_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> + 1)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5634')">Proof.</div>
<div class="proofscript" id="proof5634">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">e</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_mult_Zpower">Zdigits_mult_Zpower</a></span> ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_le">Zdigits_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5635')">Proof.</div>
<div class="proofscript" id="proof5635">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span> := <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">x</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hy</span> := <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="lt_Zdigits">lt_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5636')">Proof.</div>
<div class="proofscript" id="proof5636">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hy</span>.<br/>
<span class="tactic">cut</span> (<span class="id">y</span> &lt;= <span class="id">x</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">x</span>)%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_le">Zdigits_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpower_le_Zdigits">Zpower_le_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5637')">Proof.</div>
<div class="proofscript" id="proof5637">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">Hex</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H1</span> <span class="id">H2</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hex</span> ; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_le_Zpower">Zdigits_le_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5638')">Proof.</div>
<div class="proofscript" id="proof5638">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zpower_le_Zdigits">Zpower_le_Zdigits</a></span> <span class="id">e</span> <span class="id">x</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpower_gt_Zdigits">Zpower_gt_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5639')">Proof.</div>
<div class="proofscript" id="proof5639">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">Hex</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H1</span> <span class="id">H2</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H2</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_gt_Zpower">Zdigits_gt_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5640')">Proof.</div>
<div class="proofscript" id="proof5640">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">Hex</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zpower_gt_Zdigits">Zpower_gt_Zdigits</a></span> <span class="id">e</span> <span class="id">x</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Number of digits of a product.
This strong version is needed for proofs of division and square root
algorithms, since they involve operation remainders.
</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult_strong">Zdigits_mult_strong</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5641')">Proof.</div>
<div class="proofscript" id="proof5641">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_le_Zpower">Zdigits_le_Zpower</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span> <span class="kwd">with</span> ((<span class="id">x</span> + 1) * (<span class="id">y</span> + 1))%<span class="id">Z</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_succ">Zle_lt_succ</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_ge_0">Zdigits_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1 <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="id">y</span>) <span class="tactic">at</span> 1 <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hx</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hy</span> ; <span class="tactic">omega</span>.<br/>
<span class="id">change</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="kwd">with</span> (0 + 0 + 0)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat">Zplus_le_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat">Zplus_le_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_0_compat">Zmult_le_0_compat</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult">Zdigits_mult</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5642')">Proof.</div>
<div class="proofscript" id="proof5642">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_abs">Zdigits_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_abs">Zdigits_abs</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_abs">Zdigits_abs</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">x</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">y</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">x</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">y</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_le">Zdigits_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_Zmult">Zabs_Zmult</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span> <span class="id">x</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span> <span class="id">y</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_mult_strong">Zdigits_mult_strong</a></span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult_ge">Zdigits_mult_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> &lt;&gt; 0)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span> &lt;&gt; 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span> - 1 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Digits.html#y">y</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5643')">Proof.</div>
<div class="proofscript" id="proof5643">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Zy</span>.<br/>
<span class="tactic">cut</span> ((<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">x</span> - 1) + (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">y</span> - 1) &lt; <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id">x</span> * <span class="id">y</span>))%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_Zpower">Zdigits_gt_Zpower</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_Zmult">Zabs_Zmult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_exp">Zpower_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zpower_le_Zdigits">Zpower_le_Zdigits</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_pred">Zlt_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zpower_le_Zdigits">Zpower_le_Zdigits</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_pred">Zlt_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span> <span class="id">x</span>). <span class="tactic">omega</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span> <span class="id">y</span>). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_div_Zpower">Zdigits_div_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span> / <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span> - <span class="id"><a href="compcert.flocq.Core.Digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5644')">Proof.</div>
<div class="proofscript" id="proof5644">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">Hm</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">m</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_unique">Zdigits_unique</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>)) <span class="kwd">as</span> [<span class="id">He</span>'|<span class="id">He</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H1</span> <span class="id">H2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - <span class="id">e</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - 1 - <span class="id">e</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_sub_r">Z.pow_sub_r</a></span>.<br/>
&nbsp;&nbsp;2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_gt_0">radix_gt_0</a></span>.<br/>
&nbsp;&nbsp;2: <span class="tactic">clear</span> -<span class="id">He</span> <span class="id">He</span>' ; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_le">Z_div_le</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_gt">Z.lt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_lt_reg_r">Zmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits.beta">beta</a></span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="kwd">with</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mult_div_ge">Z_mult_div_ge</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_gt">Z.lt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - <span class="id">e</span> + <span class="id">e</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_pos">Z_div_pos</a></span> <span class="kwd">with</span> (2 := <span class="id">Hm</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_gt">Z.lt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">He</span>'.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zeq_minus">Zeq_minus</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span>)) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Zdiv_small">Zdiv_small</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hm</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="id">m</span>) <span class="tactic">at</span> 1.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Fcore_digits">Fcore_digits</a></span>.<br/>
<br/>
<div class="doc">Specialized version for computing the number of bits of an integer </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Zdigits2">Zdigits2</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Z_of_nat_S_digits2_Pnat">Z_of_nat_S_digits2_Pnat</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>)) = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5645')">Proof.</div>
<div class="proofscript" id="proof5645">
<span class="tactic">intros</span> <span class="id">m</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits_unique">Zdigits_unique</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat_Z">Zpower_nat_Z</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>.<br/>
<span class="id">change</span> (<span class="id">_</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pred">Z.pred</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">m</span>)))).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpred_succ">Zpred_succ</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat_Z">Zpower_nat_Z</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_Pnat_correct">digits2_Pnat_correct</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="digits2_pos">digits2_pos</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpos_digits2_pos">Zpos_digits2_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_pos">digits2_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>) = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5646')">Proof.</div>
<div class="proofscript" id="proof5646">
<span class="tactic">intros</span> <span class="id">m</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Digits.html#Z_of_nat_S_digits2_Pnat">Z_of_nat_S_digits2_Pnat</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">induction</span> <span class="id">m</span> ; <span class="tactic">simpl</span> ; <span class="tactic">try</span> <span class="id">easy</span> ;<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">f_equal</span>, <span class="id">IHm</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zdigits2">Zdigits2</a></span> <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> =&gt; <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.flocq.Core.Digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Zdigits2_Zdigits">Zdigits2_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits2">Zdigits2</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span> = <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.flocq.Core.Digits.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5647')">Proof.</div>
<div class="proofscript" id="proof5647">
<span class="tactic">intros</span> [|<span class="id">p</span>|<span class="id">p</span>] ; <span class="tactic">try</span> <span class="id">easy</span> ;<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zpos_digits2_pos">Zpos_digits2_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Digits.html#Zdigits2">Zdigits2</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
