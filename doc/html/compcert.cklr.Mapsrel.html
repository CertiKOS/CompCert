
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Mapsrel</title>
<meta name="description" content="Documentation of Coq module Mapsrel" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Mapsrel</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">LogicalRelations</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">OptionRel</span>.<br/>
<br/>
<br/>
<h1> Trees </h1>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="TreeRel">TreeRel</a></span> (<span class="id">T</span>: <span class="id"><a href="compcert.lib.Maps.html#TREE">TREE</a></span>).<br/>
<br/>
<div class="doc">The relator for trees takes any relation on <span class="bracket"><span class="id">option</span> <span class="id">_</span></span> as a parameter.
    Most likely, the source relation will have been constructed with
    <span class="bracket"><span class="id">option_rel</span></span> or <span class="bracket"><span class="id">option_le</span></span>, depending on the desired behavior. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="TreeRel.r">r</a></span> {<span class="id">A</span> <span class="id">B</span>} (<span class="id">R</span>: <span class="id">rel</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>)): <span class="id">rel</span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#T.t">T.t</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span>) (<span class="id"><a href="compcert.cklr.Mapsrel.html#T.t">T.t</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">t1</span> <span class="id">t2</span> =&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#T.get">T.get</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#i">i</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#t1">t1</a></span>) (<span class="id"><a href="compcert.cklr.Mapsrel.html#T.get">T.get</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#i">i</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#t2">t2</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.r_subrel">r_subrel</a></span> <span class="id">A</span> <span class="id">B</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>) (<span class="id">subrel</span> ++&gt; <span class="id">subrel</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2433')">Proof.</div>
<div class="proofscript" id="proof2433">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.r_subrel_params">r_subrel_params</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Params">Params</a></span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span>) 3.<br/>
<br/>
<div class="doc">Note that for empty trees to be related, the source relation has
    to contain (<span class="bracket">@<span class="id">None</span> <span class="id">A</span></span>, <span class="bracket">@<span class="id">None</span> <span class="id">B</span></span>). To express this, we formulate
    the relational property of <span class="bracket"><span class="id">T.empty</span></span> in terms of <span class="bracket"><span class="id">option_rel</span> ⊥</span>
    (the smallest relation which satisfies this criterion), and let
    the <span class="bracket"><span class="id">subrel</span></span> infrastructure do the rest. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.empty_rel">empty_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.empty">T.empty</a></span>) (<span class="id">forallr</span> <span class="id">A</span> <span class="id">B</span> : ⊤, <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> (<span class="id">option_rel</span> (@<span class="id">rel_bot</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2434')">Proof.</div>
<div class="proofscript" id="proof2434">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">_</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gempty">T.gempty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.get_rel">get_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.get">T.get</a></span>) (<span class="id">forallr</span> <span class="id">R</span>, - ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2435')">Proof.</div>
<div class="proofscript" id="proof2435">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">rstep</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.set_rel">set_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.set">T.set</a></span>) (<span class="id">forallr</span> <span class="id">R</span>, - ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> @@ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2436')">Proof.</div>
<div class="proofscript" id="proof2436">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">R</span> <span class="id">i</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">Hx</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Ht</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#T.elt_eq">T.elt_eq</a></span> <span class="id">i</span> <span class="id">j</span>) <span class="kwd">as</span> [<span class="id">Hij</span>|<span class="id">Hij</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gss">T.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gso">T.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">For <span class="bracket"><span class="id">T.remove</span></span>, we hit a similar issue as for <span class="bracket"><span class="id">T.empty</span></span>: since
    <span class="bracket"><span class="id">T.remove</span></span> will introduce a new <span class="bracket"><span class="id">None</span></span>, the codomain relation
    needs to be weakened. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.remove_rel">remove_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.remove">T.remove</a></span>) (<span class="id">forallr</span> <span class="id">R</span>, - ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> \/ <span class="id">option_rel</span> ⊥)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2437')">Proof.</div>
<div class="proofscript" id="proof2437">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">R</span> <span class="id">i</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Ht</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#T.elt_eq">T.elt_eq</a></span> <span class="id">i</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.grs">T.grs</a></span>. <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gro">T.gro</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">For <span class="bracket"><span class="id">T.map</span></span>, the <span class="bracket"><span class="id">None</span></span> vs. <span class="bracket"><span class="id">Some</span></span> situation is too complicated,
    so we provide properties hardcoded for <span class="bracket"><span class="id">option_rel</span></span> and <span class="bracket"><span class="id">option_le</span></span>. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.map_option_rel">map_option_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.map">T.map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">forallr</span> <span class="id">RA</span>, <span class="id">forallr</span> <span class="id">RB</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(- ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span>) ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> (<span class="id">option_rel</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span>) ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> (<span class="id">option_rel</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2438')">Proof.</div>
<div class="proofscript" id="proof2438">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A1</span> <span class="id">A2</span> <span class="id">RA</span> <span class="id">B1</span> <span class="id">B2</span> <span class="id">RB</span> <span class="id">f</span> <span class="id">g</span> <span class="id">Hfg</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Ht</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gmap">T.gmap</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.map_option_le">map_option_le</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.map">T.map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">forallr</span> <span class="id">RA</span>, <span class="id">forallr</span> <span class="id">RB</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(- ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span>) ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> (<span class="id">option_le</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span>) ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> (<span class="id">option_le</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2439')">Proof.</div>
<div class="proofscript" id="proof2439">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A1</span> <span class="id">A2</span> <span class="id">RA</span> <span class="id">B1</span> <span class="id">B2</span> <span class="id">RB</span> <span class="id">f</span> <span class="id">g</span> <span class="id">Hfg</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">Ht</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gmap">T.gmap</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">For <span class="bracket"><span class="id">T.combine</span></span>, the requirement of <span class="bracket"><span class="id">T.gcombine</span></span> that the
    function used should map <span class="bracket"><span class="id">None</span></span>s to <span class="bracket"><span class="id">None</span></span> can be expressed as the
    (perhaps somewhat obscure) relational property
    <span class="bracket"><span class="id">option_rel</span> ⊥ ++&gt; <span class="id">option_rel</span> ⊥ ++&gt; <span class="id">option_rel</span> ⊥</span>. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="TreeRel.combine_rel">combine_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="compcert.cklr.Mapsrel.html#T.combine">T.combine</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">forallr</span> <span class="id">RA</span>, <span class="id">forallr</span> <span class="id">RB</span>, <span class="id">forallr</span> <span class="id">RC</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RC">RC</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">option_rel</span> ⊥ ++&gt; <span class="id">option_rel</span> ⊥ ++&gt; <span class="id">option_rel</span> ⊥)) ++&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RC">RC</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2440')">Proof.</div>
<div class="proofscript" id="proof2440">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A1</span> <span class="id">A2</span> <span class="id">RA</span> <span class="id">B1</span> <span class="id">B2</span> <span class="id">RB</span> <span class="id">C1</span> <span class="id">C2</span> <span class="id">RC</span> <span class="id">f</span> <span class="id">g</span> [<span class="id">Hfgb</span> <span class="id">Hfg</span>] <span class="id">tA1</span> <span class="id">tA2</span> <span class="id">HtA</span> <span class="id">tB1</span> <span class="id">tB2</span> <span class="id">HtB</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">option_rel</span> ⊥ (<span class="id">f</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) (<span class="id">g</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)) <span class="tactic">by</span> <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#T.gcombine">T.gcombine</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel">TreeRel</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="PTreeRel">PTreeRel</a></span> := <span class="id"><a href="compcert.cklr.Mapsrel.html#TreeRel">TreeRel</a></span>(<span class="id"><a href="compcert.lib.Maps.html#PTree">PTree</a></span>).<br/>
<br/>
<div class="doc">This property for <span class="bracket"><span class="id">elements</span></span> is derived from <span class="bracket"><span class="id">elements_canonical_order</span></span>,
  which is specific to <span class="bracket"><span class="id">PTree</span></span>s. </div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="ptree_elements_rel">ptree_elements_rel</a></span>:<br/>
&nbsp;&nbsp;<span class="id">Monotonic</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">forallr</span> <span class="id">R</span>, <span class="id"><a href="compcert.cklr.Mapsrel.html#r">PTreeRel.r</a></span> (<span class="id">option_rel</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>) ++&gt; <span class="id">list_rel</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> * <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2441')">Proof.</div>
<div class="proofscript" id="proof2441">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">R</span> <span class="id">tA</span> <span class="id">tB</span> <span class="id">Ht</span>.<br/>
&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> * <span class="id">R</span>)%<span class="id">rel</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">tA</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">tB</span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_canonical_order">PTree.elements_canonical_order</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="id">transport</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">option_rel</span> <span class="id">R</span> (<span class="id">tA</span>!<span class="id">i</span>) (<span class="id">tB</span>!<span class="id">i</span>)) <span class="kwd">as</span> <span class="id">Hi</span> <span class="tactic">by</span> <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hi</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<h1> Maps </h1>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="MapRel">MapRel</a></span> (<span class="id">M</span>: <span class="id"><a href="compcert.lib.Maps.html#MAP">MAP</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="MapRel.r">r</a></span> {<span class="id">A</span> <span class="id">B</span>} (<span class="id">R</span>: <span class="id">rel</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>): <span class="id">rel</span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#M.t">M.t</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span>) (<span class="id"><a href="compcert.cklr.Mapsrel.html#M.t">M.t</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">m1</span> <span class="id">m2</span> =&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#M.get">M.get</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#i">i</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#m1">m1</a></span>) (<span class="id"><a href="compcert.cklr.Mapsrel.html#M.get">M.get</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#i">i</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#m2">m2</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="MapRel.r_subrel">r_subrel</a></span> <span class="id">A</span> <span class="id">B</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#A">A</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#B">B</a></span>) (<span class="id">subrel</span> ++&gt; <span class="id">subrel</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2442')">Proof.</div>
<div class="proofscript" id="proof2442">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="MapRel.r_subrel_params">r_subrel_params</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Params">Params</a></span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span>) 3.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="MapRel.init_rel">init_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#M.init">M.init</a></span>) (<span class="id">forallr</span> <span class="id">R</span>, <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2443')">Proof.</div>
<div class="proofscript" id="proof2443">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">R</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#M.gi">M.gi</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="MapRel.get_rel">get_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#M.get">M.get</a></span>) (<span class="id">forallr</span> <span class="id">R</span>, - ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2444')">Proof.</div>
<div class="proofscript" id="proof2444">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">rstep</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="MapRel.set_rel">set_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#M.set">M.set</a></span>) (<span class="id">forallr</span> <span class="id">R</span>, - ==&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#R">R</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2445')">Proof.</div>
<div class="proofscript" id="proof2445">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">R</span> <span class="id">i</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cklr.Mapsrel.html#M.elt_eq">M.elt_eq</a></span> <span class="id">j</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#M.gss">M.gss</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#M.gso">M.gso</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="MapRel.map_rel">map_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.Mapsrel.html#M.map">M.map</a></span>) (<span class="id">forallr</span> <span class="id">RA</span>, <span class="id">forallr</span> <span class="id">RB</span>, (<span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span>) ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RA">RA</a></span> ++&gt; <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel.r">r</a></span> <span class="id"><a href="compcert.cklr.Mapsrel.html#RB">RB</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2446')">Proof.</div>
<div class="proofscript" id="proof2446">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A1</span> <span class="id">A2</span> <span class="id">RA</span> <span class="id">B1</span> <span class="id">B2</span> <span class="id">RB</span> <span class="id">f</span> <span class="id">g</span> <span class="id">Hfg</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.cklr.Mapsrel.html#M.gmap">M.gmap</a></span>. <span class="id">rauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="compcert.cklr.Mapsrel.html#MapRel">MapRel</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
