
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Mult_error</title>
<meta name="description" content="Documentation of Coq module Mult_error" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Mult_error</h1>
<div class="coq">
<br/>
<h1> Error of the multiplication is in the FLX/FLT format </h1>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Core.html">Core</a></span> <span class="id"><a href="compcert.flocq.Calc.Operations.html">Operations</a></span> <span class="id"><a href="compcert.flocq.Prop.Plus_error.html">Plus_error</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_mult_error">Fprop_mult_error</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_mult_error.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_mult_error.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span> }.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="format">format</a></span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>)).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="cexp">cexp</a></span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>)).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_mult_error.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> }.<br/>
<br/>
<div class="doc">Auxiliary result that provides the exponent </div>
<span class="kwd">Lemma</span> <span class="id"><a name="mult_error_FLX_aux">mult_error_FLX_aux</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>:<span class="id"><a href="compcert.flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#f">f</a></span> = <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>))%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#f">f</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#f">f</a></span>)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id"><a href="compcert.flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#f">f</a></span> = <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6132')">Proof with</div>
<div class="proofscript" id="proof6132">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span> <span class="id">Hz</span>.<br/>
<span class="tactic">set</span> (<span class="id">f</span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id">x</span> * <span class="id">y</span>))).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> * <span class="id">y</span>) 0) <span class="kwd">as</span> [<span class="id">Hxy0</span>|<span class="id">Hxy0</span>].<br/>
<span class="id">contradict</span> <span class="id">Hz</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxy0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id">x</span> * <span class="id">y</span>)) <span class="kwd">as</span> (<span class="id">exy</span>, <span class="id">Hexy</span>).<br/>
<span class="id">specialize</span> (<span class="id">Hexy</span> <span class="id">Hxy0</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id">f</span> - <span class="id">x</span> * <span class="id">y</span>)) <span class="kwd">as</span> (<span class="id">er</span>, <span class="id">Her</span>).<br/>
<span class="id">specialize</span> (<span class="id">Her</span> <span class="id">Hz</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Hex</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hx0</span>: (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">contradict</span> <span class="id">Hxy0</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">Hx0</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> (<span class="id">ey</span>, <span class="id">Hey</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hy0</span>: (<span class="id">y</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">contradict</span> <span class="id">Hxy0</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">Hey</span> <span class="id">Hy0</span>).<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hc1</span>: (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span> - <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hey</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hexy</span>).<br/>
<span class="tactic">cut</span> (<span class="id">exy</span> - 1 &lt; <span class="id">ex</span> + <span class="id">ey</span>)%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hexy</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_0_lt_compat">Rmult_le_0_lt_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hc2</span>: (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hey</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hexy</span>).<br/>
<span class="tactic">cut</span> ((<span class="id">ex</span> - 1) + (<span class="id">ey</span> - 1) &lt; <span class="id">exy</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#prec_gt_0">prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>).<br/>
<span class="tactic">clear</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hexy</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hr</span>: ((<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (- (<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id">x</span>) *<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id">y</span>)) + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) (<span class="id">x</span> * <span class="id">y</span>)) *<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> ^ (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span> - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span>))) (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span>))) = <span class="id">f</span> - <span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="tactic">at</span> 6.<br/>
<span class="tactic">rewrite</span> <span class="id">Hy</span> <span class="tactic">at</span> 6.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Calc.Operations.html#F2R_mult">F2R_mult</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>, <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Calc.Operations.html#F2R_opp">F2R_opp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Calc.Operations.html#F2R_plus">F2R_plus</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Operations.html#Fplus">Fplus</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_imp_le_bool">Zle_imp_le_bool</a></span> <span class="kwd">with</span> (1 := <span class="id">Hc2</span>).<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">exists</span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (- (<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id">x</span>) *<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id">y</span>)) + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) (<span class="id">x</span> * <span class="id">y</span>)) *<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> ^ (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span> - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span>))) (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span>)).<br/>
<span class="tactic">split</span>;[<span class="tactic">assumption</span>|<span class="tactic">split</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">clear</span> <span class="id">Hr</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span> - <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>)%<span class="id">Z</span>.<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat_r">Zplus_le_compat_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hexy</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_le_bpow">mag_le_bpow</a></span> <span class="kwd">with</span> (1 := <span class="id">Hz</span>).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> (<span class="id">exy</span> - <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) (<span class="id">x</span> * <span class="id">y</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#error_lt_ulp">error_lt_ulp</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hexy</span>).<br/>
<span class="tactic">apply</span> <span class="id">Hc1</span>.<br/>
<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Error of the multiplication in FLX </div>
<span class="kwd">Theorem</span> <span class="id"><a name="mult_error_FLX">mult_error_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6133')">Proof.</div>
<div class="proofscript" id="proof6133">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.rnd">rnd</a></span> (<span class="id">x</span> * <span class="id">y</span>) - <span class="id">x</span> * <span class="id">y</span>) 0) <span class="kwd">as</span> [<span class="id">Hr0</span>|<span class="id">Hr0</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hr0</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#mult_error_FLX_aux">mult_error_FLX_aux</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span> <span class="id">Hr0</span>) <span class="kwd">as</span> ((<span class="id">m</span>,<span class="id">e</span>),(<span class="id">H1</span>,(<span class="id">H2</span>,<span class="id">H3</span>))).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mult_bpow_exact_FLX">mult_bpow_exact_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#e">e</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6134')">Proof.</div>
<div class="proofscript" id="proof6134">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Fx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
{ <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>. }<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">_</span>); <span class="tactic">set</span> (<span class="id">ex</span> := <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">_</span>).<br/>
<span class="id">pose</span> (<span class="id">f</span> := {| <span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Fnum</a></span> := <span class="id">mx</span>; <span class="id">Fexp</span> := <span class="id">ex</span> + <span class="id">e</span> |} : <span class="id"><a href="compcert.flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> (<span class="id">generic_format_F2R</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>).<br/>
{ <span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>. }<br/>
<span class="tactic">intro</span> <span class="id">Nzmx</span>; <span class="tactic">unfold</span> <span class="id">mx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#ex">ex</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#ex">ex</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">cexp</span>; <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_mult_bpow">mag_mult_bpow</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Nzx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error">Fprop_mult_error</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_mult_error_FLT">Fprop_mult_error_FLT</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_mult_error_FLT.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a name="Fprop_mult_error_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span> }.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="format">format</a></span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>)).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="cexp">cexp</a></span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>)).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_mult_error_FLT.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> }.<br/>
<br/>
<div class="doc">Error of the multiplication in FLT with underflow requirements </div>
<span class="kwd">Theorem</span> <span class="id"><a name="mult_error_FLT">mult_error_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span> &lt;&gt; 0 -&gt; <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> + 2*<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6135')">Proof with</div>
<div class="proofscript" id="proof6135">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">set</span> (<span class="id">f</span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> (<span class="id">x</span> * <span class="id">y</span>))).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">f</span> - <span class="id">x</span> * <span class="id">y</span>) 0) <span class="kwd">as</span> [<span class="id">Hr0</span>|<span class="id">Hr0</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hr0</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> * <span class="id">y</span>) 0) <span class="kwd">as</span> [<span class="id">Hxy</span>'|<span class="id">Hxy</span>'].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxy</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">ring_simplify</span> (0 - 0)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">Hxy</span> <span class="id">Hxy</span>').<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#mult_error_FLX_aux">mult_error_FLX_aux</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> <span class="id">x</span> <span class="id">y</span>) <span class="kwd">as</span> ((<span class="id">m</span>,<span class="id">e</span>),(<span class="id">H1</span>,(<span class="id">H2</span>,<span class="id">H3</span>))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#generic_format_FLX_FLT">generic_format_FLX_FLT</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#generic_format_FLX_FLT">generic_format_FLX_FLT</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.FLT.html#round_FLT_FLX">round_FLT_FLX</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span>).<br/>
<span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hxy</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#prec_gt_0">prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>).<br/>
<span class="tactic">clear</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.FLT.html#round_FLT_FLX">round_FLT_FLX</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span>) <span class="kwd">in</span> <span class="id">H1</span>.<br/>
2:<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hxy</span>).<br/>
2:<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span> ; <span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.FLX.html#prec_gt_0">prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) ; <span class="tactic">clear</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>, <span class="id">H3</span>.<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id">m</span> <span class="id">e</span>)) - <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">M1</span>,<span class="id">M2</span>); <span class="tactic">rewrite</span> <span class="id">M2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H2</span>).<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hxy0</span>:(<span class="id">x</span>*<span class="id">y</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">contradict</span> <span class="id">Hr0</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx0</span>: (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">contradict</span> <span class="id">Hxy0</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hy0</span>: (<span class="id">y</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">contradict</span> <span class="id">Hxy0</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Hx0</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> (<span class="id">ey</span>,<span class="id">Ey</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ey</span> <span class="id">Hy0</span>).<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> + 2 * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span> -1 &lt; <span class="id">ex</span> + <span class="id">ey</span>)%<span class="id">Z</span>.<br/>
2: <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">Hxy</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_0_lt_compat">Rmult_le_0_lt_compat</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Ex</span>.<br/>
<span class="tactic">apply</span> <span class="id">Ey</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="F2R_ge">F2R_ge</a></span>: <span class="kwd">forall</span> (<span class="id">y</span>:<span class="id"><a href="compcert.flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span>),<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6136')">Proof.</div>
<div class="proofscript" id="proof6136">
<span class="tactic">intros</span> (<span class="id">ny</span>,<span class="id">ey</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">ny</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_nonneg">Z.abs_nonneg</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Hy</span> <span class="id">_</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> <span class="id">_</span>)) <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span> <span class="id">H2</span>; <span class="id">contradict</span> <span class="id">H2</span>.<br/>
<span class="tactic">replace</span> <span class="id">ny</span> <span class="kwd">with</span> 0%<span class="id">Z</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_0_iff">Z.abs_0_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="mult_error_FLT_ge_bpow">mult_error_FLT_ge_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#e">e</a></span>+2*<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>-1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#y">y</a></span>)))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6137')">Proof with</div>
<div class="proofscript" id="proof6137">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">e</span>.<br/>
<span class="tactic">set</span> (<span class="id">f</span> := (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> (<span class="id">x</span> * <span class="id">y</span>))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">rewrite</span> <span class="id">Fx</span>, <span class="id">Fy</span>, &lt;- <span class="id"><a href="compcert.flocq.Calc.Operations.html#F2R_mult">F2R_mult</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Fmult</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Plus_error.html#round_repr_same_exp">round_repr_same_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>)<br/>
&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id">x</span>) *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>) <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">x</span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">y</span>)) <span class="kwd">as</span> (<span class="id">n</span>,<span class="id">Hn</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hn</span>; <span class="tactic">clear</span> <span class="id">Hn</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Calc.Operations.html#F2R_minus">F2R_minus</a></span>, <span class="id"><a href="compcert.flocq.Calc.Operations.html#Fminus_same_exp">Fminus_same_exp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#F2R_ge">F2R_ge</a></span> <span class="id">_</span> <span class="id">K</span>).<br/>
<span class="tactic">simpl</span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id">cexp</span>, <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Hx</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> (<span class="id">ey</span>,<span class="id">Hy</span>).<br/>
<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> ((<span class="id">ex</span>-<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>)+(<span class="id">ey</span>-<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span>))%<span class="id">Z</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat">Zplus_le_compat</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_l">Z.le_max_l</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">e</span> + 2*<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span> -1&lt; <span class="id">ex</span>+<span class="id">ey</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H1</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hx</span>.<br/>
<span class="tactic">intros</span> <span class="id">K</span>'; <span class="id">contradict</span> <span class="id">H1</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">K</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hy</span>.<br/>
<span class="tactic">intros</span> <span class="id">K</span>'; <span class="id">contradict</span> <span class="id">H1</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">K</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mult_bpow_exact_FLT">mult_bpow_exact_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.prec">prec</a></span> - <span class="id"><a href="compcert.flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#format">format</a></span> (<span class="id"><a href="compcert.flocq.Prop.Mult_error.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#e">e</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6138')">Proof.</div>
<div class="proofscript" id="proof6138">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Fx</span> <span class="id">He</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
{ <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>. }<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">_</span>); <span class="tactic">set</span> (<span class="id">ex</span> := <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#cexp">cexp</a></span> <span class="id">_</span>).<br/>
<span class="id">pose</span> (<span class="id">f</span> := {| <span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Fnum</a></span> := <span class="id">mx</span>; <span class="id">Fexp</span> := <span class="id">ex</span> + <span class="id">e</span> |} : <span class="id"><a href="compcert.flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> (<span class="id">generic_format_F2R</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>).<br/>
{ <span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>. }<br/>
<span class="tactic">intro</span> <span class="id">Nzmx</span>; <span class="tactic">unfold</span> <span class="id">mx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#ex">ex</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#ex">ex</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">cexp</span>; <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#mag_mult_bpow">mag_mult_bpow</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Nzx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max_l">Z.max_l</a></span>; [|<span class="tactic">omega</span>]; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_max_distr_r">Z.add_max_distr_r</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">n</span> := (<span class="id">_</span> - <span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span>); <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="id">_</span> <span class="id">n</span>); [<span class="tactic">unfold</span> <span class="id">n</span>; <span class="tactic">omega</span>|].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_l">Z.le_max_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Mult_error.html#Fprop_mult_error_FLT">Fprop_mult_error_FLT</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
