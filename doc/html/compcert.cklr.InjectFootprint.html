
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module InjectFootprint</title>
<meta name="description" content="Documentation of Coq module InjectFootprint" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module InjectFootprint</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.CallconvAlgebra.html">CallconvAlgebra</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cklr.CKLR.html">CKLR</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cklr.CKLRAlgebra.html">CKLRAlgebra</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cklr.Inject.html">Inject</a></span>.<br/>
<br/>
<br/>
<h1> Injection CKLR with footprint invariants </h1>
<br/>
<h2> Worlds </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="injp_world">injp_world</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="injpw">injpw</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m1</span> <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">Hm</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span>).<br/>
<br/>
<div class="doc">In addition to the criteria in <span class="bracket"><span class="id">ec_mem_inject</span></span>, in order to ensure
  that <span class="bracket"><span class="id">injp_acc</span></span> is transitive we will need the following property,
  which corresponds to <span class="bracket"><span class="id">ec_max_perm</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="injp_max_perm_decrease">injp_max_perm_decrease</a></span> (<span class="id">m</span> <span class="id">m</span>': <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m">m</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m">m</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="injp_acc">injp_acc</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#relation">relation</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_world">injp_world</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="injp_acc_intro">injp_acc_intro</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_max_perm_decrease">injp_max_perm_decrease</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_max_perm_decrease">injp_max_perm_decrease</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span>) <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span>) <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_acc">injp_acc</a></span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#Hm">Hm</a></span>) (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>').<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="injp_mi">injp_mi</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> '(<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="injp_match_mem">injp_match_mem</a></span>: <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_world">injp_world</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#relation">relation</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="injp_match_mem_intro">injp_match_mem_intro</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_match_mem">injp_match_mem</a></span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#Hm">Hm</a></span>) <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="injp_match_stbls">injp_match_stbls</a></span>: <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_world">injp_world</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#relation">relation</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symtbl">Genv.symtbl</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="injp_match_stbls_intro">injp_match_stbls_intro</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">se1</span> <span class="id">se2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls">Genv.match_stbls</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#se1">se1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#se2">se2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#se1">se1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#se2">se2</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_match_stbls">injp_match_stbls</a></span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#Hm">Hm</a></span>) <span class="id"><a href="compcert.cklr.InjectFootprint.html#se1">se1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#se2">se2</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_match_mem">injp_match_mem</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_match_stbls">injp_match_stbls</a></span>.<br/>
<br/>
<h2> Properties </h2>
<br/>
<div class="doc">Proving the transitivity of the accessibility relation is somewhat
  involved because the different properties need each other. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_unchanged_on_trans_implies_valid">mem_unchanged_on_trans_implies_valid</a></span> (<span class="id">P</span> <span class="id">Q</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">m</span>' <span class="id">m</span>'':<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#P">P</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#Q">Q</a></span> <span class="id">m</span>' <span class="id">m</span>'' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.cklr.InjectFootprint.html#P">P</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m">m</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.cklr.InjectFootprint.html#Q">Q</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#P">P</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m">m</a></span> <span class="id">m</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2483')">Proof.</div>
<div class="proofscript" id="proof2483">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">HPQ</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">o</span> =&gt; <span class="id">P</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#o">o</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#b">b</a></span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="injp_acc_preo">injp_acc_preo</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#PreOrder">PreOrder</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_acc">injp_acc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2484')">Proof.</div>
<div class="proofscript" id="proof2484">
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">red</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">red</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">w1</span> <span class="id">w2</span> <span class="id">w3</span> <span class="id">H12</span> <span class="id">H23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>' <span class="id">Hp1</span> <span class="id">Hp2</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">Hf</span> <span class="id">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H23</span> <span class="kwd">as</span> [? ? ? ? <span class="id">f</span>'' <span class="id">m1</span>'' <span class="id">m2</span>'' <span class="id">Hm</span>'' <span class="id">Hp1</span>' <span class="id">Hp2</span>' <span class="id">H1</span>' <span class="id">H2</span>' <span class="id">Hf</span>' <span class="id">Hs</span>']; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">Hb</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hp1</span>, <span class="id">Hp1</span>'; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">Hb</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hp2</span>, <span class="id">Hp2</span>'; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#mem_unchanged_on_trans_implies_valid">mem_unchanged_on_trans_implies_valid</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b1</span> <span class="id">_</span> <span class="id">Hb</span> <span class="id">Hb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">Hs</span>; <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#mem_unchanged_on_trans_implies_valid">mem_unchanged_on_trans_implies_valid</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id">Hptr2</span> <span class="id">Hb2</span> <span class="id">b1</span> <span class="id">delta</span> <span class="id">Hb</span>' <span class="id">Hperm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">assert</span> (<span class="id">xb2</span> = <span class="id">b2</span> /\ <span class="id">xdelta</span> = <span class="id">delta</span>) <span class="kwd">as</span> [? ?]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">Hf</span> <span class="kwd">in</span> <span class="id">Hb</span>; <span class="tactic">split</span>; <span class="tactic">congruence</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hptr2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hp1</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">edestruct</span> <span class="id">Hs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span> <span class="id">Hb</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">xb2</span> <span class="id">xdelta</span>] | ] <span class="id">eqn</span>:<span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">assert</span> (<span class="id">xb2</span> = <span class="id">b2</span> /\ <span class="id">xdelta</span> = <span class="id">delta</span>) <span class="kwd">as</span> [? ?]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">Hf</span>' <span class="kwd">in</span> <span class="id">Hb</span>'; <span class="tactic">split</span>; <span class="tactic">congruence</span>); <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">edestruct</span> <span class="id">Hs</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="injp_mi_acc">injp_mi_acc</a></span>:<br/>
&nbsp;&nbsp;<span class="id">Monotonic</span> (@<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_mi">injp_mi</a></span>) (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_acc">injp_acc</a></span> ++&gt; <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2485')">Proof.</div>
<div class="proofscript" id="proof2485">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_mi">injp_mi</a></span>. <span class="id">rauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_separated_refl">inject_separated_refl</a></span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#f">f</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m1">m1</a></span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2486')">Proof.</div>
<div class="proofscript" id="proof2486">
&nbsp;&nbsp;<span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> CKLR </h2>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="injp">injp</a></span>: <span class="id"><a href="compcert.cklr.CKLR.html#cklr">cklr</a></span> :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cklr.CKLR.html#Build_cklr">world</a></span> := <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_world">injp_world</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">wacc</span> := <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_acc">injp_acc</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mi</span> := <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_mi">injp_mi</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_mem</span> := <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_match_mem">injp_match_mem</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_stbls</span> := <span class="id"><a href="compcert.cklr.InjectFootprint.html#injp_match_stbls">injp_match_stbls</a></span>;<br/>
&nbsp;&nbsp;|}.<br/>
<br/>
<div class="doc">Acc separated </div>
<div class="toggleproof" onclick="toggleDisplay('proof2487')">Next Obligation.</div>
<div class="proofscript" id="proof2487">
&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">m1</span> <span class="id">into</span> <span class="id">M1</span>. <span class="tactic">rename</span> <span class="id">m2</span> <span class="id">into</span> <span class="id">M2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hw</span> <span class="id">Hw</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H6</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hw</span> <span class="id">Hw</span>') <span class="kwd">as</span> [<span class="id">Hm1</span> <span class="id">Hm2</span>].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2488')">Next Obligation.</div>
<div class="proofscript" id="proof2488">
 <span class="comment">(*&nbsp;~&gt;&nbsp;vs.&nbsp;match_stbls&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">w</span> <span class="id">w</span>' <span class="id">Hw</span>' <span class="id">se1</span> <span class="id">se2</span> <span class="id">Hse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hse</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">se1</span> <span class="id">se2</span> <span class="id">Hse</span> <span class="id">Hnb1</span> <span class="id">Hnb2</span>]. <span class="id">inv</span> <span class="id">Hw</span>'.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_stbls_incr">Genv.match_stbls_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span> <span class="id">Hb</span>'. <span class="id">specialize</span> (<span class="id">H9</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span> <span class="id">Hb</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2489')">Next Obligation.</div>
<div class="proofscript" id="proof2489">
 <span class="comment">(*&nbsp;match_stbls&nbsp;vs.&nbsp;Genv.match_stbls&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2490')">Next Obligation.</div>
<div class="proofscript" id="proof2490">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2491')">Next Obligation.</div>
<div class="proofscript" id="proof2491">
 <span class="comment">(*&nbsp;Mem.alloc&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] <span class="id">lo</span> <span class="id">hi</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m1</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="kwd">as</span> [<span class="id">m1</span>' <span class="id">b1</span>] <span class="id">eqn</span>:<span class="id">Hm1</span>'.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> (<span class="id">f</span>' &amp; <span class="id">m2</span>' &amp; <span class="id">b2</span> &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>' &amp; <span class="id">Hf</span>' &amp; <span class="id">Hb2</span> &amp; <span class="id">Hff</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>'); <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">Hb</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span> <span class="kwd">in</span> <span class="id">Hp</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span> <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">Hb</span> <span class="id">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span> <span class="kwd">in</span> <span class="id">Hp</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b2</span>); <span class="tactic">eauto</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span> <span class="id">m2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>. <span class="tactic">intros</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">Hb</span> <span class="id">Hb</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span> = <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hff</span>' <span class="kwd">in</span> <span class="id">Hb</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span>' = <span class="id">b2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2492')">Next Obligation.</div>
<div class="proofscript" id="proof2492">
 <span class="comment">(*&nbsp;Mem.free&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] [[<span class="id">b1</span> <span class="id">lo1</span>] <span class="id">hi1</span>] [[<span class="id">b2</span> <span class="id">lo2</span>] <span class="id">hi2</span>] <span class="id">Hr</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">lo1</span> <span class="id">hi1</span>) <span class="kwd">as</span> [<span class="id">m1</span>'|] <span class="id">eqn</span>:<span class="id">Hm1</span>'; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hr</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span> <span class="kwd">as</span> (<span class="id">m2</span>' &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">lo1</span> + <span class="id">delta</span> + <span class="id">sz</span>) <span class="kwd">with</span> (<span class="id">lo1</span> + <span class="id">sz</span> + <span class="id">delta</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'. <span class="tactic">repeat</span> <span class="id">rstep</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>'); <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span> <span class="id">Hofs</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; [ | <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_any_N">perm_any_N</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#inject_separated_refl">inject_separated_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2493')">Next Obligation.</div>
<div class="proofscript" id="proof2493">
 <span class="comment">(*&nbsp;Mem.load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">chunk</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hptr</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span>) <span class="kwd">as</span> [<span class="id">v1</span>|] <span class="id">eqn</span>:<span class="id">Hv1</span>; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">Mem.load_inject</a></span> <span class="kwd">as</span> (<span class="id">v2</span> &amp; <span class="id">Hv2</span> &amp; <span class="id">Hv</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hv2</span>. <span class="id">rauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2494')">Next Obligation.</div>
<div class="proofscript" id="proof2494">
 <span class="comment">(*&nbsp;Mem.store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">chunk</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hptr</span>] <span class="id">v1</span> <span class="id">v2</span> <span class="id">Hv</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">v1</span>) <span class="kwd">as</span> [<span class="id">m1</span>'|] <span class="id">eqn</span>:<span class="id">Hm1</span>'; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inject">Mem.store_mapped_inject</a></span> <span class="kwd">as</span> (<span class="id">m2</span>' &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'. <span class="tactic">repeat</span> <span class="id">rstep</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>'); <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span> <span class="id">Hofs</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span> <span class="id">chunk</span> <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; [ | <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_any_N">perm_any_N</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#inject_separated_refl">inject_separated_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2495')">Next Obligation.</div>
<div class="proofscript" id="proof2495">
 <span class="comment">(*&nbsp;Mem.loadbytes&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hptr</span>] <span class="id">sz</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">sz</span>) <span class="kwd">as</span> [<span class="id">vs1</span>|] <span class="id">eqn</span>:<span class="id">Hvs1</span>; [|<span class="id">rauto</span>].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inject">Mem.loadbytes_inject</a></span> <span class="kwd">as</span> (<span class="id">vs2</span> &amp; <span class="id">Hvs2</span> &amp; <span class="id">Hvs</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hvs2</span>. <span class="id">rauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2496')">Next Obligation.</div>
<div class="proofscript" id="proof2496">
 <span class="comment">(*&nbsp;Mem.storebytes&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] [<span class="id">b1</span> <span class="id">ofs1</span>] [<span class="id">b2</span> <span class="id">ofs2</span>] <span class="id">Hptr</span> <span class="id">vs1</span> <span class="id">vs2</span> <span class="id">Hvs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">as</span> [<span class="id">m1</span>'|] <span class="id">eqn</span>:<span class="id">Hm1</span>'; [|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">vs1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> \/ <span class="id">vs1</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="kwd">as</span> [<span class="id">Hvs1</span>|<span class="id">Hvs1</span>].<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">vs1</span>; <span class="id">constructor</span>; <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;- <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">Hvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">Mem.range_perm_storebytes</a></span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">Hm2</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span>. <span class="tactic">simpl</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hm</span>': <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">m2</span>') <span class="tactic">by</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_empty_inject">Mem.storebytes_empty_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>'); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#inject_separated_refl">inject_separated_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id"><a href="compcert.cklr.Valuesrel.html#ptr_inject">ptr_inject</a></span> <span class="id">f</span> (<span class="id">b1</span>, <span class="id">ofs1</span>) (<span class="id">b2</span>, <span class="id">ofs2</span>)) <span class="kwd">as</span> <span class="id">Hptr</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hptr</span> <span class="kwd">as</span> [<span class="id">Hptr</span>|<span class="id">Hptr</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hptr</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> [<span class="id">xb1</span> <span class="id">xofs1</span> <span class="id">xb2</span> <span class="id">delta</span> <span class="id">Hb</span>]]; <span class="tactic">clear</span> <span class="id">Hptr</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cklr.Valuesrel.html#ptrbits_unsigned">ptrbits_unsigned</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span> <span class="kwd">in</span> <span class="id">Hm1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hm1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vs1</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hptr</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inject">Mem.storebytes_mapped_inject</a></span> <span class="kwd">as</span> (<span class="id">m2</span>' &amp; <span class="id">Hm2</span>' &amp; <span class="id">Hm</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hm2</span>'. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.cklr.InjectFootprint.html#injpw">injpw</a></span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm</span>'); <span class="tactic">split</span>; <span class="tactic">repeat</span> <span class="id">rstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">red</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span> <span class="id">Hofs</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; [ | <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_any_N">perm_any_N</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">Hvs</span>. <span class="tactic">rewrite</span> <span class="id">Hvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.cklr.InjectFootprint.html#inject_separated_refl">inject_separated_refl</a></span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2497')">Next Obligation.</div>
<div class="proofscript" id="proof2497">
 <span class="comment">(*&nbsp;Mem.perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] <span class="id">_</span> <span class="id">_</span> [<span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">Hb</span>] <span class="id">p</span> <span class="id">k</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject">Mem.perm_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2498')">Next Obligation.</div>
<div class="proofscript" id="proof2498">
 <span class="comment">(*&nbsp;Mem.valid_block&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>] <span class="id">b1</span> <span class="id">b2</span> [<span class="id">delta</span> <span class="id">Hb</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2499')">Next Obligation.</div>
<div class="proofscript" id="proof2499">
 <span class="comment">(*&nbsp;Mem.meminj_no_overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">Mem.mi_no_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2500')">Next Obligation.</div>
<div class="proofscript" id="proof2500">
 <span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="id">ofs1</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2501')">Next Obligation.</div>
<div class="proofscript" id="proof2501">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.aligned_area_inject">Mem.aligned_area_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2502')">Next Obligation.</div>
<div class="proofscript" id="proof2502">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.disjoint_or_equal_inject">Mem.disjoint_or_equal_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2503')">Next Obligation.</div>
<div class="proofscript" id="proof2503">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">Hm</span>].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">cbn</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject_inv">Mem.perm_inject_inv</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2504')">Next Obligation.</div>
<div class="proofscript" id="proof2504">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">w</span>' &amp; <span class="id">Hw</span>' &amp; <span class="id">Hm</span>').<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hw</span>'. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">Hm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<h1> Properties </h1>
<br/>
<div class="doc">Needs memory interpolation
Lemma injp_injp:
  subcklr injp (injp @ inj @ injp).
Proof.
  intros _ _ _ <span class="bracket"><span class="id">f</span> <span class="id">m1</span> <span class="id">m4</span> <span class="id">Hm14</span></span>.
  eexists (injpw (meminj_dom f) m1 m1,
           (injw (meminj_dom f) (Mem.nextblock m1) (Mem.nextblock m1) _,
            injpw f m1 m4)).
  simpl.
  repeat apply conj.
  - exists m1; split.
    { constructor. eapply mem_inject_dom; eauto. }
    exists m1; split.
    { constructor; repeat rstep; eauto using mem_inject_dom. }
    constructor; eauto.
  - rewrite !meminj_dom_compose.
    apply inject_incr_refl.
  - intros (w12' &amp; w23' &amp; w34') m1' m4'.
    intros (m2' &amp; Hm12' &amp; m3' &amp; Hm23' &amp; Hm34').
    intros (H12 &amp; H23 &amp; H34). simpl in *.
    destruct Hm12' as <span class="bracket"><span class="id">f12</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">Hm12</span>'</span>.
    inversion Hm23' as <span class="bracket"><span class="id">f23</span> <span class="id">xm2</span>' <span class="id">xm3</span>' <span class="id">Hm23</span>''</span>; clear Hm23'; subst.
    destruct Hm34' as <span class="bracket"><span class="id">f34</span> <span class="id">m3</span>' <span class="id">m4</span>' <span class="id">Hm34</span>'</span>.
    inv H12.
    inv H23.
    inv H34.
    exists (injpw (compose_meminj f12 (compose_meminj f23 f34)) m1' m4').
    repeat apply conj.
    + constructor; eauto.
      eauto using Mem.inject_compose.
    + constructor; eauto.
      * apply injp_max_perm_decrease_dom; eauto.
      * eapply Mem.unchanged_on_implies; eauto.
        intros. apply loc_unmapped_dom; eauto.
      * rewrite &lt;- (meminj_dom_compose f).
        rewrite &lt;- (meminj_dom_compose f) at 2.
        rauto.
      * (* XXX we can't actually prove this because the intermediate
          injection may map a new block into an old one, and falsify
          the composite separation property. </div>
Abort.</div>
*)<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
