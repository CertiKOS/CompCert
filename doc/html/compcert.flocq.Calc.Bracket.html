
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Bracket</title>
<meta name="description" content="Documentation of Coq module Bracket" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Bracket</h1>
<div class="coq">
<br/>
<h1> Locations: where a real number is positioned with respect to its rounded-down value in an arbitrary format. </h1>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Raux.html">Raux</a></span> <span class="id"><a href="compcert.flocq.Core.Defs.html">Defs</a></span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html">Float_prop</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcalc_bracket">Fcalc_bracket</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket.d">d</a></span> <span class="id"><a name="Fcalc_bracket.u">u</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Fcalc_bracket.Hdu">Hdu</a></span> : (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>)%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="location">location</a></span> := <span class="id"><a name="loc_Exact">loc_Exact</a></span> | <span class="id"><a name="loc_Inexact">loc_Inexact</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#comparison">comparison</a></span> -&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#location">location</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket.x">x</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inbetween_loc">inbetween_loc</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare">Rcompare</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare">Rcompare</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> ((<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> + <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>) / 2))<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Locates a real number with respect to the middle of two other numbers. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="inbetween">inbetween</a></span> : <span class="id"><a href="compcert.flocq.Calc.Bracket.html#location">location</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="inbetween_Exact">inbetween_Exact</a></span> : <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> -&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="inbetween_Inexact">inbetween_Inexact</a></span> <span class="id">l</span> : (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare">Rcompare</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> ((<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> + <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>) / 2)%<span class="id">R</span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_spec">inbetween_spec</a></span> :<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> &lt;= <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_loc">inbetween_loc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6031')">Proof.</div>
<div class="proofscript" id="proof6031">
<span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_loc">inbetween_loc</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_spec">Rcompare_spec</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="id">now</span> <span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="id">constructor</span>.<br/>
<span class="id">constructor</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_unique">inbetween_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">l</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id">l</span>' -&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> = <span class="id">l</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6032')">Proof.</div>
<div class="proofscript" id="proof6032">
<span class="tactic">intros</span> <span class="id">l</span> <span class="id">l</span>' <span class="id">Hl</span> <span class="id">Hl</span>'.<br/>
<span class="tactic">inversion_clear</span> <span class="id">Hl</span> ; <span class="tactic">inversion_clear</span> <span class="id">Hl</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H0</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcalc_bracket.Fcalc_bracket_any">Fcalc_bracket_any</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket.Fcalc_bracket_any.l">l</a></span> : <span class="id"><a href="compcert.flocq.Calc.Bracket.html#location">location</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_bounds">inbetween_bounds</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.Fcalc_bracket_any.l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> &lt;= <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6033')">Proof.</div>
<div class="proofscript" id="proof6033">
<span class="tactic">intros</span> [<span class="id">Hx</span>|<span class="id">l</span>' <span class="id">Hx</span> <span class="id">Hl</span>] ; <span class="tactic">clear</span> <span class="id">l</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.Hdu">Hdu</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span> ; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_bounds_not_Eq">inbetween_bounds_not_Eq</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.Fcalc_bracket_any.l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.Fcalc_bracket_any.l">l</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6034')">Proof.</div>
<div class="proofscript" id="proof6034">
<span class="tactic">intros</span> [<span class="id">Hx</span>|<span class="id">l</span>' <span class="id">Hx</span> <span class="id">Hl</span>] <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">elim</span> <span class="id">H</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.Fcalc_bracket_any">Fcalc_bracket_any</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_distance_inexact">inbetween_distance_inexact</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span> - <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span> - <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span>) = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6035')">Proof.</div>
<div class="proofscript" id="proof6035">
<span class="tactic">intros</span> <span class="id">l</span> <span class="id">Hl</span>.<br/>
<span class="tactic">inversion_clear</span> <span class="id">Hl</span> <span class="kwd">as</span> [|<span class="id">l</span>' <span class="id">Hl</span>' <span class="id">Hx</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_middle">Rcompare_middle</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_distance_inexact_abs">inbetween_distance_inexact_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.d">d</a></span> - <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.u">u</a></span> - <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket.x">x</a></span>)) = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6036')">Proof.</div>
<div class="proofscript" id="proof6036">
<span class="tactic">intros</span> <span class="id">l</span> <span class="id">Hl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_distance_inexact">inbetween_distance_inexact</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds">inbetween_bounds</a></span> <span class="id">_</span> <span class="id">Hl</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds">inbetween_bounds</a></span> <span class="id">_</span> <span class="id">Hl</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket">Fcalc_bracket</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_ex">inbetween_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">d</span> <span class="id">u</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#u">u</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6037')">Proof.</div>
<div class="proofscript" id="proof6037">
<span class="tactic">intros</span> <span class="id">d</span> <span class="id">u</span> [|<span class="id">l</span>] <span class="id">Hdu</span>.<br/>
<span class="id">exists</span> <span class="id">d</span>.<br/>
<span class="id">now</span> <span class="id">constructor</span>.<br/>
<span class="id">exists</span> (<span class="id">d</span> + <span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> =&gt; 1 | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> =&gt; 2 | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; 3 <span class="kwd">end</span> / 4 * (<span class="id">u</span> - <span class="id">d</span>))%<span class="id">R</span>.<br/>
<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">set</span> (<span class="id">v</span> := (<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> =&gt; 1 | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> =&gt; 2 | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; 3 <span class="kwd">end</span> / 4)%<span class="id">R</span>).<br/>
<span class="tactic">assert</span> (0 &lt; <span class="id">v</span> &lt; 1)%<span class="id">R</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">unfold</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">case</span> <span class="id">l</span> ; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> 4%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">case</span> <span class="id">l</span> ; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id">d</span> * (<span class="id">v</span> - 1))%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (-<span class="id">u</span> * <span class="id">v</span>)%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (- <span class="id">u</span> * <span class="id">v</span> + (<span class="id">d</span> + <span class="id">v</span> * (<span class="id">u</span> - <span class="id">d</span>)))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">d</span> * (1 - <span class="id">v</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">replace</span> (- <span class="id">u</span> * <span class="id">v</span> + <span class="id">u</span>)%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">u</span> * (1 - <span class="id">v</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> <span class="kwd">with</span> <span class="id">v</span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hdu</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">set</span> (<span class="id">v</span> := (<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> =&gt; 1 | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> =&gt; 2 | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; 3 <span class="kwd">end</span>)%<span class="id">R</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_r">Rcompare_plus_r</a></span> (- (<span class="id">d</span> + <span class="id">u</span>) / 2)).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span> 4).<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">replace</span> (((<span class="id">d</span> + <span class="id">u</span>) / 2 + - (<span class="id">d</span> + <span class="id">u</span>) / 2) * 4)%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id">u</span> - <span class="id">d</span>) * 0)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">replace</span> ((<span class="id">d</span> + <span class="id">v</span> / 4 * (<span class="id">u</span> - <span class="id">d</span>) + - (<span class="id">d</span> + <span class="id">u</span>) / 2) * 4)%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id">u</span> - <span class="id">d</span>) * (<span class="id">v</span> - 2))%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_l">Rcompare_mult_l</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_r">Rcompare_plus_r</a></span> 2).<br/>
<span class="id">ring_simplify</span> (<span class="id">v</span> - 2 + 2)%<span class="id">R</span> (0 + 2)%<span class="id">R</span>.<br/>
<span class="tactic">unfold</span> <span class="id">v</span>.<br/>
<span class="tactic">case</span> <span class="id">l</span> ; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_IZR">Rcompare_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcalc_bracket_step">Fcalc_bracket_step</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket_step.start">start</a></span> <span class="id"><a name="Fcalc_bracket_step.step">step</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket_step.nb_steps">nb_steps</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket_step.Hstep">Hstep</a></span> : (0 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>)%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ordered_steps">ordered_steps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6038')">Proof.</div>
<div class="proofscript" id="proof6038">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ">Zlt_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="middle_range">middle_range</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>)) / 2 = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> / 2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6039')">Proof.</div>
<div class="proofscript" id="proof6039">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="id">field</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="Fcalc_bracket_step.Hnb_steps">Hnb_steps</a></span> : (1 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">l</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare">Rcompare</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> / 2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>))%<span class="id">R</span> = <span class="id">l</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id">l</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6040')">Proof.</div>
<div class="proofscript" id="proof6040">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">l</span>' <span class="id">Hx</span> <span class="id">Hk</span> <span class="id">Hl</span>'.<br/>
<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>' := <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds">inbetween_bounds</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#ordered_steps">ordered_steps</a></span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span>) <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#middle_range">middle_range</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_Lo">inbetween_step_Lo</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6041')">Proof.</div>
<div class="proofscript" id="proof6041">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hx</span> <span class="id">Hk1</span> <span class="id">Hk2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>' := <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds">inbetween_bounds</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#ordered_steps">ordered_steps</a></span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_not_Lt_inv">Rcompare_not_Lt_inv</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_l">Rcompare_plus_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_half_l">Rcompare_half_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_not_Lt">Rcompare_not_Lt</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_Hi">inbetween_step_Hi</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> &lt; 2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6042')">Proof.</div>
<div class="proofscript" id="proof6042">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hx</span> <span class="id">Hk1</span> <span class="id">Hk2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>' := <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds">inbetween_bounds</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#ordered_steps">ordered_steps</a></span> <span class="id">_</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Lt_inv">Rcompare_Lt_inv</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_l">Rcompare_plus_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_half_l">Rcompare_half_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_Lo_not_Eq">inbetween_step_Lo_not_Eq</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6043')">Proof.</div>
<div class="proofscript" id="proof6043">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">l</span> <span class="id">Hx</span> <span class="id">Hl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>' := <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds_not_Eq">inbetween_bounds_not_Eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span> <span class="id">Hl</span>).<br/>
<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#middle_range">middle_range</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_not_Lt_inv">Rcompare_not_Lt_inv</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="tactic">at</span> 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_l">Rcompare_plus_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_half_l">Rcompare_half_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_not_Lt">Rcompare_not_Lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 1).<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="middle_odd">middle_odd</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1 = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(((<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) + (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>))/2 = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> /2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6044')">Proof.</div>
<div class="proofscript" id="proof6044">
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="tactic">simpl</span>. <span class="id">field</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_any_Mi_odd">inbetween_step_any_Mi_odd</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>) -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1 = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6045')">Proof.</div>
<div class="proofscript" id="proof6045">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hx</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">inversion_clear</span> <span class="id">Hx</span> <span class="kwd">as</span> [|<span class="id">l</span>' <span class="id">_</span> <span class="id">Hl</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#middle_odd">middle_odd</a></span> <span class="id">_</span> <span class="id">Hk</span>) <span class="kwd">in</span> <span class="id">Hl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_Lo_Mi_Eq_odd">inbetween_step_Lo_Mi_Eq_odd</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1 = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6046')">Proof.</div>
<div class="proofscript" id="proof6046">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">Hx</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">inversion_clear</span> <span class="id">Hx</span> <span class="kwd">as</span> [<span class="id">Hl</span>|].<br/>
<span class="tactic">rewrite</span> <span class="id">Hl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_l">Rcompare_plus_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_half_r">Rcompare_half_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ">Zlt_succ</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_Hi_Mi_even">inbetween_step_Hi_Mi_even</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6047')">Proof.</div>
<div class="proofscript" id="proof6047">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hx</span> <span class="id">Hl</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>' := <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_bounds_not_Eq">inbetween_bounds_not_Eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span> <span class="id">Hl</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_not_Lt_inv">Rcompare_not_Lt_inv</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_plus_l">Rcompare_plus_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>, <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_half_r">Rcompare_half_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_not_Lt">Rcompare_not_Lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.Hstep">Hstep</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_step_Mi_Mi_even">inbetween_step_Mi_Mi_even</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6048')">Proof.</div>
<div class="proofscript" id="proof6048">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">Hx</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_not_Eq">inbetween_step_not_Eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_Eq">Rcompare_Eq</a></span>.<br/>
<span class="tactic">inversion_clear</span> <span class="id">Hx</span> <span class="kwd">as</span> [<span class="id">Hx</span>'|].<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>', &lt;- <span class="id">Hk</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="id">field</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Computes a new location when the interval containing a real
    number is split into nb_steps subintervals and the real is
    in the k-th one. (Even radix.) </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="new_location_even">new_location_even</a></span> <span class="id">k</span> <span class="id">l</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zeq_bool">Zeq_bool</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> 0 <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.compare">Z.compare</a></span> (2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="new_location_even_correct">new_location_even_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.even">Z.even</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_even">new_location_even</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6049')">Proof.</div>
<div class="proofscript" id="proof6049">
<span class="tactic">intros</span> <span class="id">He</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_even">new_location_even</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zeq_bool_spec">Zeq_bool_spec</a></span> <span class="id">k</span> 0) <span class="kwd">as</span> [<span class="id">Hk0</span>|<span class="id">Hk0</span>].<br/>
<span class="comment">(*&nbsp;k&nbsp;=&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hk0</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="tactic">set</span> (<span class="id">l</span>' := <span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id">l</span> | <span class="id">_</span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> <span class="kwd">end</span>).<br/>
<span class="tactic">assert</span> ((<span class="id">l</span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> /\ <span class="id">l</span>' = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span>) \/ (<span class="id">l</span> &lt;&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> /\ <span class="id">l</span>' = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span>)).<br/>
<span class="tactic">unfold</span> <span class="id">l</span>' ; <span class="tactic">case</span> <span class="id">l</span> ; <span class="tactic">try</span> (<span class="id">now</span> <span class="id">left</span>) ; <span class="id">right</span> ; <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(<span class="id">H1</span>,<span class="id">H2</span>)|(<span class="id">H1</span>,<span class="id">H2</span>)] ; <span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
<span class="id">constructor</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">inversion_clear</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Lo_not_Eq">inbetween_step_Lo_not_Eq</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="comment">(*&nbsp;k&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zcompare_spec">Zcompare_spec</a></span> (2 * <span class="id">k</span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>) <span class="kwd">as</span> [<span class="id">Hk1</span>|<span class="id">Hk1</span>|<span class="id">Hk1</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;2&nbsp;*&nbsp;k&nbsp;&lt;&nbsp;nb_steps&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Lo">inbetween_step_Lo</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zeven_ex">Zeven_ex</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>).<br/>
<span class="tactic">rewrite</span> <span class="id">He</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;2&nbsp;*&nbsp;k&nbsp;=&nbsp;nb_steps&nbsp;*)</span><br/>
<span class="tactic">set</span> (<span class="id">l</span>' := <span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> <span class="kwd">end</span>).<br/>
<span class="tactic">assert</span> ((<span class="id">l</span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> /\ <span class="id">l</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span>) \/ (<span class="id">l</span> &lt;&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> /\ <span class="id">l</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span>)).<br/>
<span class="tactic">unfold</span> <span class="id">l</span>' ; <span class="tactic">case</span> <span class="id">l</span> ; <span class="tactic">try</span> (<span class="id">now</span> <span class="id">left</span>) ; <span class="id">right</span> ; <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(<span class="id">H1</span>,<span class="id">H2</span>)|(<span class="id">H1</span>,<span class="id">H2</span>)] ; <span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Mi_Mi_even">inbetween_step_Mi_Mi_even</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Hi_Mi_even">inbetween_step_Hi_Mi_even</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="comment">(*&nbsp;.&nbsp;2&nbsp;*&nbsp;k&nbsp;&gt;&nbsp;nb_steps&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Hi">inbetween_step_Hi</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">exact</span> <span class="id">Hk1</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hk</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Computes a new location when the interval containing a real
    number is split into nb_steps subintervals and the real is
    in the k-th one. (Odd radix.) </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="new_location_odd">new_location_odd</a></span> <span class="id">k</span> <span class="id">l</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zeq_bool">Zeq_bool</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> 0 <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.compare">Z.compare</a></span> (2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> | <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="new_location_odd_correct">new_location_odd_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.even">Z.even</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_odd">new_location_odd</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6050')">Proof.</div>
<div class="proofscript" id="proof6050">
<span class="tactic">intros</span> <span class="id">Ho</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_odd">new_location_odd</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zeq_bool_spec">Zeq_bool_spec</a></span> <span class="id">k</span> 0) <span class="kwd">as</span> [<span class="id">Hk0</span>|<span class="id">Hk0</span>].<br/>
<span class="comment">(*&nbsp;k&nbsp;=&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hk0</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="tactic">set</span> (<span class="id">l</span>' := <span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> =&gt; <span class="id">l</span> | <span class="id">_</span> =&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> <span class="kwd">end</span>).<br/>
<span class="tactic">assert</span> ((<span class="id">l</span> = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> /\ <span class="id">l</span>' = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span>) \/ (<span class="id">l</span> &lt;&gt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Exact">loc_Exact</a></span> /\ <span class="id">l</span>' = <span class="id"><a href="compcert.flocq.Calc.Bracket.html#loc_Inexact">loc_Inexact</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span>)).<br/>
<span class="tactic">unfold</span> <span class="id">l</span>' ; <span class="tactic">case</span> <span class="id">l</span> ; <span class="tactic">try</span> (<span class="id">now</span> <span class="id">left</span>) ; <span class="id">right</span> ; <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [(<span class="id">H1</span>,<span class="id">H2</span>)|(<span class="id">H1</span>,<span class="id">H2</span>)] ; <span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
<span class="id">constructor</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">inversion_clear</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Lo_not_Eq">inbetween_step_Lo_not_Eq</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="comment">(*&nbsp;k&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zcompare_spec">Zcompare_spec</a></span> (2 * <span class="id">k</span> + 1) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>) <span class="kwd">as</span> [<span class="id">Hk1</span>|<span class="id">Hk1</span>|<span class="id">Hk1</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;2&nbsp;*&nbsp;k&nbsp;+&nbsp;1&nbsp;&lt;&nbsp;nb_steps&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Lo">inbetween_step_Lo</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>) (3 := <span class="id">Hk1</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;2&nbsp;*&nbsp;k&nbsp;+&nbsp;1&nbsp;=&nbsp;nb_steps&nbsp;*)</span><br/>
<span class="tactic">destruct</span> <span class="id">l</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Lo_Mi_Eq_odd">inbetween_step_Lo_Mi_Eq_odd</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>) (2 := <span class="id">Hk1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_any_Mi_odd">inbetween_step_any_Mi_odd</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>) (2 := <span class="id">Hk1</span>).<br/>
<span class="comment">(*&nbsp;.&nbsp;2&nbsp;*&nbsp;k&nbsp;+&nbsp;1&nbsp;&gt;&nbsp;nb_steps&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_step_Hi">inbetween_step_Hi</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#Zeven_ex">Zeven_ex</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Ho</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hk</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="new_location">new_location</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.even">Z.even</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_even">new_location_even</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_odd">new_location_odd</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="new_location_correct">new_location_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> + 1) * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.start">start</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.step">step</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location">new_location</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6051')">Proof.</div>
<div class="proofscript" id="proof6051">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location">new_location</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_lt_trans">Z.le_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hk</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hk</span>)).<br/>
<span class="tactic">pattern</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span> <span class="tactic">at</span> 2 3 5 ; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step.nb_steps">nb_steps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">intros</span> [<span class="id">p</span>|<span class="id">p</span>|] <span class="id">Hp</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_odd_correct">new_location_odd_correct</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>) (3 := <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hp</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_even_correct">new_location_even_correct</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>) (3 := <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hp</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hp</span> <span class="kwd">in</span> <span class="id">Hnb_steps</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">now</span> <span class="tactic">intros</span> <span class="id">p</span> <span class="id">_</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_step">Fcalc_bracket_step</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcalc_bracket_scale">Fcalc_bracket_scale</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inbetween_mult_aux">inbetween_mult_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">d</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span> + <span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) / 2 = (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span>) / 2 * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6052')">Proof.</div>
<div class="proofscript" id="proof6052">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">d</span> <span class="id">s</span>.<br/>
<span class="id">field</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_mult_compat">inbetween_mult_compat</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">l</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6053')">Proof.</div>
<div class="proofscript" id="proof6053">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">l</span> <span class="id">s</span> <span class="id">Hs</span> [<span class="id">Hx</span>|<span class="id">l</span>' <span class="id">Hx</span> <span class="id">Hl</span>] ; <span class="id">constructor</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_mult_aux">inbetween_mult_aux</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_mult_reg">inbetween_mult_reg</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">l</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Calc.Bracket.html#s">s</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#d">d</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6054')">Proof.</div>
<div class="proofscript" id="proof6054">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">l</span> <span class="id">s</span> <span class="id">Hs</span> [<span class="id">Hx</span>|<span class="id">l</span>' <span class="id">Hx</span> <span class="id">Hl</span>] ; <span class="id">constructor</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_eq_reg_r">Rmult_eq_reg_r</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> <span class="id">s</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span> <span class="kwd">with</span> (1 := <span class="id">Hs</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_mult_aux">inbetween_mult_aux</a></span> <span class="kwd">in</span> <span class="id">Hl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_scale">Fcalc_bracket_scale</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcalc_bracket_generic">Fcalc_bracket_generic</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcalc_bracket_generic.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<div class="doc">Specialization of inbetween for two consecutive floating-point numbers. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inbetween_float">inbetween_float</a></span> <span class="id">m</span> <span class="id">e</span> <span class="id">x</span> <span class="id">l</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span>)) (<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> + 1) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span>)) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_float_bounds">inbetween_float_bounds</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> + 1) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6055')">Proof.</div>
<div class="proofscript" id="proof6055">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span> [<span class="id">Hx</span>|<span class="id">l</span>' <span class="id">Hx</span> <span class="id">Hl</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_lt">F2R_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ">Zlt_succ</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Specialization of inbetween for two consecutive integers. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inbetween_int">inbetween_int</a></span> <span class="id">m</span> <span class="id">x</span> <span class="id">l</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween">inbetween</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> + 1)) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_float_new_location">inbetween_float_new_location</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.div">Z.div</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>)) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> + <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location">new_location</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Zmod">Zmod</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6056')">Proof.</div>
<div class="proofscript" id="proof6056">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span> <span class="id">k</span> <span class="id">Hk</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="kwd">in</span> *.<br/>
<span class="tactic">assert</span> (<span class="id">Hr</span>: <span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> (<span class="id">e</span> + <span class="id">k</span>)) = <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id">k</span>) <span class="id">e</span>)).<br/>
<span class="tactic">clear</span> -<span class="id">Hk</span>. <span class="tactic">intros</span> <span class="id">m</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_change_exp">F2R_change_exp</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id">e</span>).<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> (<span class="id">m</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id">_</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#r">r</a></span>) <span class="id">e</span>))).<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hp</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id">k</span> &gt; 0)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_gt">Z.lt_gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> 2!<span class="id">Hr</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_plus_distr_l">Zmult_plus_distr_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Defs.html#F2R">F2R</a></span> <span class="tactic">at</span> 2. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location_correct">new_location_correct</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Zaux.html#Zpower_gt_1">Zpower_gt_1</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>, &lt;- 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_mod_eq">Z_div_mod_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_float_new_location_single">inbetween_float_new_location_single</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.div">Z.div</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span>) (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> + 1) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#new_location">new_location</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Zmod">Zmod</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span>) <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6057')">Proof.</div>
<div class="proofscript" id="proof6057">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span> <span class="id">Hx</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> 1).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float_new_location">inbetween_float_new_location</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_float_ex">inbetween_float_ex</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6058')">Proof.</div>
<div class="proofscript" id="proof6058">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_ex">inbetween_ex</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#F2R_lt">F2R_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ">Zlt_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="inbetween_float_unique">inbetween_float_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">m</span>' <span class="id">l</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float">inbetween_float</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.flocq.Calc.Bracket.html#e">e</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#x">x</a></span> <span class="id">l</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Calc.Bracket.html#m">m</a></span> = <span class="id">m</span>' /\ <span class="id"><a href="compcert.flocq.Calc.Bracket.html#l">l</a></span> = <span class="id">l</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6059')">Proof.</div>
<div class="proofscript" id="proof6059">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">m</span>' <span class="id">l</span>' <span class="id">H</span> <span class="id">H</span>'.<br/>
<span class="tactic">refine</span> ((<span class="kwd">fun</span> <span class="id">Hm</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Hm">Hm</a></span> <span class="id">_</span>) <span class="id">_</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hm</span> <span class="kwd">in</span> <span class="id">H</span>'. <span class="tactic">clear</span> -<span class="id">H</span> <span class="id">H</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_unique">inbetween_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>) (2 := <span class="id">H</span>').<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float_bounds">inbetween_float_bounds</a></span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> <span class="id">l</span> <span class="id">H</span>) <span class="kwd">as</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Calc.Bracket.html#inbetween_float_bounds">inbetween_float_bounds</a></span> <span class="id">x</span> <span class="id">m</span>' <span class="id">e</span> <span class="id">l</span>' <span class="id">H</span>') <span class="kwd">as</span> (<span class="id">H3</span>,<span class="id">H4</span>).<br/>
<span class="tactic">cut</span> (<span class="id">m</span> &lt; <span class="id">m</span>' + 1 /\ <span class="id">m</span>' &lt; <span class="id">m</span> + 1)%<span class="id">Z</span>. <span class="tactic">clear</span> ; <span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span> ; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Float_prop.html#lt_F2R">lt_F2R</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic.beta">beta</a></span> <span class="id">e</span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Calc.Bracket.html#Fcalc_bracket_generic">Fcalc_bracket_generic</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
